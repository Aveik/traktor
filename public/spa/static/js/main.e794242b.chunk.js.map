{"version":3,"sources":["redux/notifications/notifications.selectors.js","redux/notifications/notifications.slice.js","components/Notifications/Single/Single.component.jsx","components/Notifications/Notifications.component.jsx","components/Layout/Layout.styles.js","components/Layout/CollapsingListItem/CollapsingListItem.styles.js","components/Layout/CollapsingListItem/CollapsingListItem.component.jsx","components/Layout/Layout.utils.js","components/Layout/Layout.component.jsx","components/NotFound/NotFound.component.jsx","redux/loading/loading.selectors.js","redux/modules/movie/movie.slice.js","utils.js","redux/modules/profile/comments/comments.slice.js","components/Comments/Post/Post.component.jsx","components/Comments/Single/Single.styles.js","components/Comments/Single/Single.component.jsx","components/Comments/Comments.component.jsx","redux/modules/profile/lists/lists.slice.js","redux/modules/profile/list/list.slice.js","redux/modules/profile/lists/lists.selectors.js","components/ListItemManager/ListItemManager.styles.js","components/ListItemManager/ListItemManager.component.jsx","components/Poster/Poster.component.jsx","components/Rating/Rating.component.jsx","redux/modules/movie/movie.selectors.js","redux/modules/profile/ratings/ratings.selectors.js","redux/modules/profile/ratings/ratings.slice.js","redux/modules/profile/recommendations/recommendations.selectors.js","redux/modules/profile/recommendations/recommendations.slice.js","redux/modules/profile/watchlist/watchlist.selectors.js","redux/modules/profile/watchlist/watchlist.slice.js","modules/Movie/Movie.component.jsx","components/Pagination/Pagination.component.jsx","hooks/usePagination.js","redux/modules/movies/movies.selectors.js","redux/modules/movies/movies.slice.js","components/Tile/Tile.styles.js","components/Tile/Tile.component.jsx","modules/Movies/Movies.utils.js","modules/Movies/Movies.component.jsx","redux/modules/person/person.selectors.js","redux/modules/person/person.slice.js","modules/Person/Person.component.jsx","redux/modules/profile/comments/comments.selectors.js","modules/Profile/Comments/Comments.component.jsx","redux/modules/profile/list/list.selectors.js","modules/Profile/List/List.component.jsx","modules/Profile/Lists/Lists.component.jsx","modules/Profile/Ratings/Ratings.component.jsx","modules/Profile/Recommendations/Recommendations.component.jsx","modules/Profile/Watchlist/Watchlist.component.jsx","redux/modules/search/search.selectors.js","redux/modules/search/search.slice.js","modules/Search/Search.component.jsx","redux/modules/show/show.selectors.js","redux/modules/show/show.slice.js","modules/Show/Show.component.jsx","redux/modules/shows/shows.selectors.js","redux/modules/shows/shows.slice.js","modules/Shows/Shows.component.jsx","redux/loading/loading.slice.js","redux/modules/profile/index.js","redux/store.js","App.component.jsx","index.js"],"names":["selectNotifications","createSelector","state","notifications","matches","action","type","endsWith","createSlice","extraReducers","builder","addMatcher","meta","requestId","payload","initialState","name","reducers","createNotification","prepare","message","id","nanoid","reducer","removeNotification","actions","Single","dispatch","useDispatch","onClick","Notifications","useSelector","Object","entries","map","makeStyles","drawerPaper","width","theme","nestedListItemGutters","paddingLeft","spacing","CollapsingListItem","children","listItemTextProps","props","classes","useStyles","useState","open","setOpen","e","preventDefault","ExpandLess","ExpandMore","in","disablePadding","React","Children","child","cloneElement","gutters","NAV_PATHS","nested","path","title","Layout","anchor","paper","color","variant","px","py","regularListItemProps","activeClassName","button","component","NavLink","key","to","primary","collapsingListItemProps","ml","NotFound","stateSelector","loading","selector","_","actionTypes","selectLoadingFlag","actionType","Boolean","selectLoadingFlagsReducedFactory","keys","filter","includes","some","fetchComments","createAsyncThunk","a","limit","slug","sort","rejectWithValue","axios","get","response","data","toString","fetchMovie","statsResponse","comments","Promise","all","summaryResponse","commentsResponse","peopleResponse","ratingsResponse","relatedResponse","people","ratings","related","stats","summary","fulfilled","DEFAULTS","getUserSlug","document","cookie","split","reduce","acc","value","userSlug","transformEntityToSingular","entity","page","entities","total","parseInt","headers","postComment","comment","spoiler","post","ids","removeComment","delete","updateComment","put","arg","index","findIndex","splice","pagination","unshift","Post","onSubmit","text","setText","setSpoiler","reset","htmlFor","onChange","target","checked","done","listItemRoot","marginBottom","_comment","createdAt","review","_spoiler","username","userRating","useMemo","fetching","setState","setComment","canEdit","isEditing","isRemoving","isRemoved","editor","then","root","MuiPaper","container","justify","item","display","Date","toLocaleString","label","size","Edit","fontSize","Delete","secondary","allowDangerousHtml","emoji","shortnameToImage","secondaryTypographyProps","renderComments","items","created_at","user","user_rating","Comments","_items","totalCount","isExtendedView","setIsExtendedView","setSort","slice","length","fullWidth","select","fetchLists","list","listItems","addList","removeList","push","fetchList","listResponse","itemsResponse","removeFromList","listSlug","addToList","addToListAndRefetch","args","removeFromListAndRefetch","selectEntities","profile","lists","selectListsForManagerFactory","__","listed","listItemActionRoot","minWidth","ListItemManager","listsSelector","loadingSelector","anchorEl","setAnchorEl","listedOnCount","mirror","setMirror","handleClick","fn","currentTarget","anchorOrigin","horizontal","vertical","onClose","transformOrigin","dense","subheader","disabled","disableRipple","edge","Poster","season","tmdbId","url","propTypes","PropTypes","func","isRequired","oneOf","number","string","Rating","initialValue","setValue","max","selectEntity","movie","selectRating","result","find","rating","fetchRatings","postRating","recommendations","selectIsRecommended","recommendation","fetchRecommendations","postRecommendation","removeRecommendation","watchlist","selectIsWatchlisted","fetchWatchlist","addToWatchlist","removeFromWatchlist","Movie","useParams","isRecommended","isWatchlisted","useEffect","addToWatchlistAndRefetch","postRecommendationAndRefetch","tmdb","alt","src","Pagination","hasNextPage","hasPreviousPage","onFirstPage","onLastPage","onNextPage","onPreviousPage","usePagination","pagesTotalSelector","useSearchParams","searchParams","setSearchParams","fromEntries","otherSearchProps","pagesTotal","toFirstPage","toLastPage","toNextPage","toPreviousPage","movies","selectPagesTotal","fetchMovies","category","footer","bottom","padding","position","image","height","objectFit","borderBottom","palette","divider","borderRight","Tile","releaseYear","watchers","className","renderTiles","Link","md","sm","xl","xs","year","trakt","renderTrending","Movies","person","fetchPerson","moviesResponse","showsResponse","shows","Person","JSON","stringify","List","Lists","allowComments","description","Ratings","Watchlist","search","fetchSearchResults","query","Search","searchResults","show","fetchShow","seasonsResponse","seasons","Show","selectLoadingFlagReduced","fetchShows","Shows","pattern","parts","asyncState","pop","join","combineReducers","store","configureStore","App","basename","element","replace","Providers","init","ReactDOM","render","getElementById"],"mappings":"qVAEMA,EAAsBC,aAC1B,SAAUC,GACR,OAAOA,EAAMC,iBAEf,SAAUA,GACR,OAAOA,K,OCLX,SAASC,EAAQC,GACf,OAAOA,EAAOC,KAAKC,SAAS,a,MAGDC,YAAY,CACvCC,cAAe,SAACC,GACdA,EAAQC,WAAWP,GAAS,SAACF,EAAOG,GAClCH,EAAMG,EAAOO,KAAKC,WAAaR,EAAOS,YAG1CC,aAAc,GACdC,KAAM,gBACNC,SAAU,CACRC,mBAAoB,CAClBC,QADkB,SACVC,GACN,MAAO,CACLN,QAAS,CACPO,GAAIC,cACJF,aAING,QATkB,SASVrB,EAAOG,GACbH,EAAMG,EAAOS,QAAQO,IAAMhB,EAAOS,QAAQM,UAG9CI,mBAdQ,SAcWtB,EAAOG,UACjBH,EAAMG,EAAOS,aAvBlBW,E,EAAAA,QAASF,E,EAAAA,QA4BWC,GAAuBC,EAA3CP,mBAA2CO,EAAvBD,oBAGbD,ICtBAG,MAVf,YAAkC,IAAhBL,EAAe,EAAfA,GAAID,EAAW,EAAXA,QACdO,EAAWC,cAMjB,OAAO,qBAAKC,QAJZ,WACEF,EAASH,EAAmBH,KAGvB,SAA4BD,KCCtBU,MAPf,WACE,IAAM3B,EAAgB4B,YAAY/B,GAClC,OAAOgC,OAAOC,QAAQ9B,GAAe+B,KAAI,mCAAEb,EAAF,KAAMD,EAAN,YACvC,cAAC,EAAD,CAAQC,GAAIA,EAAaD,QAASA,GAAbC,O,SCPVc,cAAW,CACxBC,YAAa,CACXC,MAAO,O,6DCFIF,eAAW,SAAUG,GAClC,MAAO,CACLC,sBAAuB,CACrBC,YAAaF,EAAMG,QAAQ,QC2ClBC,MAjCf,YAAwE,IAA1CC,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,kBAAsBC,EAAS,gDAC/DC,EAAUC,IADqD,EAE7CC,oBAAS,GAFoC,mBAE9DC,EAF8D,KAExDC,EAFwD,KAiBrE,OACE,qCACE,eAAC,IAAD,2BAAiBL,GAAjB,IAAwBhB,QAf5B,SAAqBsB,GACnBA,EAAEC,iBACFF,GAASD,IAaP,UACE,cAAC,IAAD,eAAqBL,IACpBK,EAAO,cAACI,EAAA,EAAD,IAAqB,cAACC,EAAA,EAAD,QAE/B,cAAC,IAAD,CAAaC,GAAIN,EAAjB,SACE,cAAC,IAAD,CAASO,gBAAc,EAAvB,SAdGC,IAAMC,SAASxB,IAAIS,GAAU,SAAUgB,GAC5C,OAAOF,IAAMG,aAAaD,EAAO,CAC/Bb,QAAS,CAAEe,QAASf,EAAQP,oCChB9BuB,EAAY,CAChB,CACEC,OAAQ,CACN,CACEC,KAAM,kBACNC,MAAO,YAET,CACED,KAAM,iBACNC,MAAO,WAET,CACED,KAAM,qBACNC,MAAO,eAET,CACED,KAAM,iBACNC,MAAO,WAET,CACED,KAAM,qBACNC,MAAO,gBAGXA,MAAO,UAET,CACEF,OAAQ,CACN,CACEC,KAAM,iBACNC,MAAO,YAET,CACED,KAAM,gBACNC,MAAO,WAET,CACED,KAAM,oBACNC,MAAO,eAET,CACED,KAAM,gBACNC,MAAO,WAET,CACED,KAAM,oBACNC,MAAO,gBAGXA,MAAO,SAET,CACEF,OAAQ,CACN,CACEC,KAAM,kBACNC,MAAO,WAET,CACED,KAAM,0BACNC,MAAO,mBAET,CACED,KAAM,oBACNC,MAAO,aAET,CACED,KAAM,gBACNC,MAAO,SAET,CACED,KAAM,mBACNC,MAAO,aAGXA,MAAO,WAET,CACEF,OAAQ,CACN,CACEC,KAAM,aACNC,MAAO,OAET,CACED,KAAM,gBACNC,MAAO,UAET,CACED,KAAM,eACNC,MAAO,SAET,CACED,KAAM,gBACNC,MAAO,WAGXA,MAAO,WC/DIC,MA5Bf,WACE,IAAMpB,EAAUC,IAEhB,OACE,eAAC,IAAD,WACE,eAAC,IAAD,CACEoB,OAAO,OACPrB,QAAS,CACPsB,MAAOtB,EAAQV,aAEjBiC,MAAM,GACNC,QAAQ,YANV,UAQE,eAAC,IAAD,CAAQC,GAAI,EAAGC,GAAI,EAAnB,UACE,cAAC,IAAD,CAAeF,QAAQ,KAAvB,qBACA,cAAC,IAAD,CAAeA,QAAQ,UAAvB,qBAEF,cAAC,IAAD,IACA,cAAC,IAAD,CAASd,gBAAc,EAAvB,SD8ECM,EAAU5B,KAAI,YAAoC,IAAxB6B,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,KAAMC,EAAS,EAATA,MACvCQ,EAAuB,CAC3BC,gBAAiB,eACjBC,QAAQ,EACRC,UAAWC,IACXC,IAAKb,EACLc,GAAIf,GAIN,IAAKD,GAAUC,EACb,OACE,cAAC,IAAD,2BAAiBS,GAAjB,aACE,cAAC,IAAD,CAAiBO,QAASf,OAKhC,IAAMtB,EAAWoB,EAAO7B,KAAI,YAA4B,IAAhB8B,EAAe,EAAfA,KAAMC,EAAS,EAATA,MAC5C,OAEE,uBADA,CACC,IAAD,2BAAiBQ,GAAjB,IAAuCK,IAAKb,EAAOc,GAAIf,IACrD,cAAC,IAAD,CAAiBgB,QAASf,QAK1BgB,EAA0B,CAC9BN,QAAQ,EACRG,IAAKb,EACLrB,kBAAmB,CACjBoC,QAASf,IAIb,OACE,cAAC,EAAD,2BAAwBgB,GAAxB,aACGtC,aCjHH,eAAC,IAAD,CAAQuC,GAAI,GAAZ,UACE,cAAC,EAAD,IACA,cAAC,IAAD,WC/BOC,MAJf,WACE,OAAO,gD,kBCDT,SAASC,EAAclF,GACrB,OAAOA,EAAMmF,QAIf,SAASC,EAASC,EAAGC,GACnB,OAAOA,EAGT,IAAMC,EAAoBxF,YAAe,CAACmF,EAAeE,IAAW,SAClED,EACAK,GAEA,OAAOC,QAAQN,EAAQK,OAczB,SAASE,IACP,OAAO3F,YAAe,CAACmF,EAAeE,IAAW,SAC/CpF,EACAsF,GAEA,OAAOxD,OAAO6D,KAAK3F,GAChB4F,QAAO,SAACzF,GAAD,OAAYmF,EAAYO,SAAS1F,MACxC2F,MAAK,SAAC3F,GAAD,OAAYH,EAAMG,S,sCCjCxB4F,GAAgBC,YAAiB,uBAAD,uCAAyB,uCAAAC,EAAA,6DAC3DC,EAD2D,EAC3DA,MAAOC,EADoD,EACpDA,KAAMC,EAD8C,EAC9CA,KACbC,EAF2D,EAE3DA,gBAF2D,kBAKpCC,KAAMC,IAAN,wBACJJ,EADI,qBACaC,EADb,yBACkCF,IANE,cAKrDM,EALqD,yBAQpDA,EAASC,MAR2C,yDAUpDJ,EAAgB,KAAMK,aAV8B,yDAAzB,yDAchCC,GAAaX,YAAiB,cAAD,uCAAgB,WACjDG,EADiD,oCAAAF,EAAA,6DAE/CI,EAF+C,EAE/CA,gBAF+C,kBAKnBC,KAAMC,IAAN,wBAA2BJ,EAA3B,WALmB,cAKzCS,EALyC,OAM7BV,EAAUU,EAAcH,KAAlCI,SANuC,SAarCC,QAAQC,IAAI,CACpBT,KAAMC,IAAN,wBAA2BJ,IAC3BG,KAAMC,IAAN,wBAA2BJ,EAA3B,mCAA0DD,IAC1DI,KAAMC,IAAN,wBAA2BJ,EAA3B,YACAG,KAAMC,IAAN,wBAA2BJ,EAA3B,aACAG,KAAMC,IAAN,wBAA2BJ,EAA3B,eAlB6C,0CAQ7Ca,EAR6C,KAS7CC,EAT6C,KAU7CC,EAV6C,KAW7CC,EAX6C,KAY7CC,EAZ6C,uBAoBxC,CACLP,SAAUI,EAAiBR,KAC3BY,OAAQH,EAAeT,KACvBa,QAASH,EAAgBV,KACzBc,QAASH,EAAgBX,KACzBe,MAAOZ,EAAcH,KACrBgB,QAAST,EAAgBP,OA1BoB,2DA6BxCJ,EAAgB,KAAMK,aA7BkB,0DAAhB,yDAuDpBrF,GAtBKf,YAAY,CAC9BC,eAAa,oBACVwF,GAAc2B,WADJ,SACe1H,EAAOG,GAC/BH,EAAM6G,SAAW1G,EAAOS,WAFf,eAIV+F,GAAWe,WAJD,SAIY1H,EAAOG,GAC5B,OAAOA,EAAOS,WALL,GAQbC,aAAc,CACZgG,SAAU,GACVQ,OAAQ,KACRC,QAAS,KACTC,QAAS,GACTC,MAAO,KACPC,QAAS,MAEX3G,KAAM,QACNC,SAAU,KAlBJM,QClDFsG,GACO,GAWb,SAASC,KACP,OAROC,SAASC,OAAOC,MAAM,MAAMC,QAAO,SAACC,EAAKH,GAAY,IAAD,EACpCA,EAAOC,MAAM,KADuB,mBAClDnD,EADkD,KAC7CsD,EAD6C,KAGzD,OADAD,EAAIrD,GAAOsD,EACJD,IACN,IAMeE,SAGpB,SAASC,GAA0BC,GACjC,OAAQA,GACN,IAAK,SACH,MAAO,QACT,IAAK,QACH,MAAO,OACT,IAAK,SACH,MAAO,SAET,QACE,MAAO,qBCnBb,IAAMtC,GAAgBC,YACpB,yBADoC,uCAEpC,WAAgBsC,EAAhB,oBAAArC,EAAA,6DAAwBI,EAAxB,EAAwBA,gBAAxB,kBAE2BC,KAAMC,IAAN,uBACLqB,KADK,0BAC0BU,EAD1B,kBAEnBX,KAJR,cAEUnB,EAFV,yBAOW,CACL+B,SAAU/B,EAASC,KACnB+B,MAAOC,SAASjC,EAASkC,QAAQ,8BATvC,yDAYWrC,EAAgB,KAAMK,aAZjC,yDAFoC,yDAmBhCiC,GAAc3C,YAAiB,wBAAD,uCAA0B,6CAAAC,EAAA,6DAC1D2C,EAD0D,EAC1DA,QAASP,EADiD,EACjDA,OAAQlC,EADyC,EACzCA,KADyC,IACnC0C,eADmC,SAE1DxC,EAF0D,EAE1DA,gBAEFgC,EAASD,GAA0BC,GAJyB,kBAMnC/B,KAAMwC,KAAK,mBAAX,GACrBF,WADqB,eAEpBP,EAAS,CAAEU,IAAK,CAAE5C,UAFE,yBAGrB0C,GAHqB,IANmC,cAMpDrC,EANoD,yBAWnDA,EAASC,MAX0C,2DAanDJ,EAAgB,KAAMK,aAb6B,0DAA1B,yDAiB9BsC,GAAgBhD,YACpB,0BADoC,uCAEpC,WAAgB7E,EAAhB,kBAAA8E,EAAA,6DAAsBI,EAAtB,EAAsBA,gBAAtB,kBAEUC,KAAM2C,OAAN,0BAAgC9H,IAF1C,+EAIWkF,EAAgB,KAAMK,aAJjC,wDAFoC,yDAWhCwC,GAAgBlD,YACpB,0BADoC,uCAEpC,uCAAAC,EAAA,6DAAkB2C,EAAlB,EAAkBA,QAASzH,EAA3B,EAA2BA,GAAI0H,EAA/B,EAA+BA,QAAaxC,EAA5C,EAA4CA,gBAA5C,kBAE2BC,KAAM6C,IAAN,0BAA6BhI,GAAM,CACxDyH,UACAC,YAJN,cAEUrC,EAFV,yBAMWA,EAASC,MANpB,yDAQWJ,EAAgB,KAAMK,aARjC,yDAFoC,yDA+CvBrF,GAhCKf,YAAY,CAC9BC,eAAa,sBACVyI,GAActB,WADJ,SACe1H,EAAOG,GAAS,IAC3BgB,EAAOhB,EAAOO,KAAnB0I,IACFC,EAAQrJ,EAAMuI,SAASe,WAAU,SAACV,GAAD,OAAaA,EAAQzH,KAAOA,KACnEnB,EAAMuI,SAASgB,OAAOF,EAAO,MAJpB,gBAMVtD,GAAc2B,WANJ,SAMe1H,EAAOG,GAC/BH,EAAMuI,SAAWpI,EAAOS,QAAQ2H,SAChCvI,EAAMwJ,WAAWhB,MAAQrI,EAAOS,QAAQ4H,SAR/B,gBAUVG,GAAYjB,WAVF,SAUa1H,EAAOG,GAC7BH,EAAMuI,SAASkB,QAAQtJ,EAAOS,YAXrB,gBAaVsI,GAAcxB,WAbJ,SAae1H,EAAOG,GAC/B,IAAMkJ,EAAQrJ,EAAMuI,SAASe,WAC3B,SAACV,GAAD,OAAaA,EAAQzH,KAAOhB,EAAOS,QAAQO,MAE7CnB,EAAMuI,SAASc,GAASlJ,EAAOS,WAjBtB,IAoBbC,aAAc,CACZ0H,SAAU,GACViB,WAAY,CACVhB,MAAO,IAGX1H,KAAM,mBACNC,SAAU,KA5BJM,QCrBOqI,OA/Cf,YAA6B,IAAbC,EAAY,EAAZA,SAAY,EACF7G,mBAAS,IADP,mBACnB8G,EADmB,KACbC,EADa,OAEI/G,oBAAS,GAFb,mBAEnB+F,EAFmB,KAEViB,EAFU,KAY1B,SAASC,IACPF,EAAQ,IACRC,GAAW,GAOb,OACE,qCACE,oDACA,uBAAOE,QAAQ,UAAf,+BACA,uBACA,0BAAU7I,GAAG,UAAU8I,SAtB3B,YAAkD,IAAZ/B,EAAW,EAArBgC,OAAUhC,MACpC2B,EAAQ3B,IAqB6CA,MAAO0B,IAC1D,uBACA,uBACEO,QAAStB,EACT1H,GAAG,UACH8I,SAvBN,YAAuD,IAAdE,EAAa,EAAvBD,OAAUC,QACvCL,EAAWK,IAuBP/J,KAAK,aAEP,uBAAO4J,QAAQ,UAAf,8BACA,uBACA,wBAAQrI,QAnBZ,WACEgI,EAAS,CAAEf,QAASgB,EAAMQ,KAAML,EAAOlB,aAkBNzI,KAAK,SAApC,8B,sGCrCS6B,eAAW,CACxBoI,aAAc,CACZ,qBAAsB,CACpBC,aAAc,MC+KL9I,OA3Jf,YASI,IARO+I,EAQR,EARD3B,QACA4B,EAOC,EAPDA,UACArJ,EAMC,EANDA,GACAsJ,EAKC,EALDA,OACSC,EAIR,EAJD7B,QACA8B,EAGC,EAHDA,SACAC,EAEC,EAFDA,WACAzC,EACC,EADDA,SAEM/C,EAAWyF,kBAAQnF,EAAkC,IACrD9C,EAAUC,KACVpB,EAAWC,cACXoJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BoF,EAASpF,EAAO,CAAC,0BAA2B,+BAL7C,EAOyB8C,mBAAS,MAPlC,mBAOM9C,EAPN,KAOa+K,EAPb,OAQ6BjI,mBAASyH,GARtC,mBAQM3B,EARN,KAQeoC,EARf,OAS6BlI,mBAAS4H,GATtC,mBASM7B,EATN,KASeiB,EATf,KAUKmB,EAAUrD,OAAkBO,EAC3B+C,EACK,YAAVlL,EADgBmL,EAEN,aAAVnL,EAF4BoL,EAGlB,YAAVpL,EAwCIqL,EACJ,qCACE,uBAAOrB,QAAQ,UAAf,+BACA,uBACA,0BAAUC,SAzCd,YAAqD,IAAZ/B,EAAW,EAArBgC,OAAUhC,MACvC8C,EAAW9C,IAwCgCA,MAAOU,IAChD,uBACA,uBACEuB,QAAStB,EACT1H,GAAG,UACH8I,SA1CN,YAAuD,IAAdE,EAAa,EAAvBD,OAAUC,QACvCL,EAAWK,IA0CP/J,KAAK,aAEP,uBAAO4J,QAAQ,UAAf,8BACA,uBACA,wBAAQrI,QA1BZ,WACEoJ,EAAS,WACTtJ,EACEyH,GAAc,CACZN,UACAzH,KACA0H,aAEFyC,MAAK,kBAAMP,EAAS,eAkBS3K,KAAK,SAAlC,6BAMJ,OAAIgL,EACK,KAIP,qCACGN,GAAYI,GAAa,cAAC,KAAD,IACzBJ,GAAYK,GAAc,cAAC,KAAD,IAC3B,cAAC,IAAD,CACEvI,QAAS,CACP2I,KAAM3I,EAAQyH,cAEhB3F,UAAW8G,KAJb,SAME,cAAC,IAAD,CACE1G,QACE,eAAC,IAAD,CAAS2G,WAAS,EAACC,QAAQ,gBAA3B,UACE,eAAC,IAAD,CAASC,MAAI,EAAb,UACE,eAAC,IAAD,CAAeC,QAAQ,SAASxH,QAAQ,QAAxC,UACGqG,EAAS,SAAW,QADvB,OACoCE,KAEpC,eAAC,IAAD,CAAeiB,QAAQ,SAASxH,QAAQ,UAAxC,uBACS,IAAIyH,KAAKrB,GAAWsB,eAAe,SAD5C,8BAEElB,EAAU,kBAAcA,EAAd,UAAmC,IAC5C/B,GACC,qCACG,MADH,IACU,cAAC,KAAD,CAASkD,MAAM,UAAUC,KAAK,mBAK7Cf,GACC,eAAC,IAAD,CAASU,MAAI,EAAb,UACE,cAAC,KAAD,CAAehK,QAlF/B,WACE,GAAIuJ,EAIF,OAHAH,EAAS,WACTC,EAAWT,QACXT,EAAWY,GAGbK,EAAS,YA2E6CiB,KAAK,QAA7C,SACE,cAACC,GAAA,EAAD,CAAUC,SAAS,YAErB,cAAC,KAAD,CAAevK,QA1E/B,WACEoJ,EAAS,YACTtJ,EAASuH,GAAc7H,IAAKmK,MAAK,kBAAMP,EAAS,eAwEIiB,KAAK,QAA3C,SACE,cAACG,GAAA,EAAD,CAAYD,SAAS,kBAM/BE,UACElB,EACEG,EAEA,cAAC,KAAD,CAAegB,oBAAkB,EAAjC,SACGC,KAAMC,iBAAiB3D,KAI9B4D,yBAA0B,CACxB9H,UAAW,eClJvB,SAAS+H,GAAeC,GAmCtB,OAAOA,EAAM1K,KAlCb,SAAgB2J,GAAO,IAAD,EAUhB,CACFA,EAAK/C,QACL+C,EAAKgB,WACLhB,EAAKxK,GACLwK,EAAKlB,OACLkB,EAAK9C,QACL8C,EAAKiB,KAAKjC,SACVgB,EAAKkB,YACLlB,EAAKiB,KAAK7D,IAAI5C,MAhBdyC,EAFkB,KAGlB4B,EAHkB,KAIlBrJ,EAJkB,KAKlBsJ,EALkB,KAMlB5B,EANkB,KAOlB8B,EAPkB,KAQlBC,EARkB,KASlBzC,EATkB,KAoBpB,OACE,cAAC,GAAD,CACES,QAASA,EACT4B,UAAWA,EACXrJ,GAAIA,EAEJsJ,OAAQA,EACR5B,QAASA,EACT8B,SAAUA,EACVC,WAAYA,EACZzC,SAAUA,GALLhH,MA2FE2L,I,GAAAA,GA/Ef,YAAgE,IAA5CzE,EAA2C,EAA3CA,OAAe0E,EAA4B,EAAnCL,MAAevG,EAAoB,EAApBA,KAAM6G,EAAc,EAAdA,WACzCvL,EAAWC,cACXoJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,2BAHkC,EAKjB8C,oBAAS,GALQ,mBAKtDmK,EALsD,KAKtCC,EALsC,OAMrCpK,mBAAS,WAN4B,mBAMtDsD,EANsD,KAMhD+G,EANgD,KAOvDT,EAAQO,EAAiBF,EAASA,EAAOK,MAAM,EAAG,IAqCxD,OACE,gCACGtC,GAAY,6CACb,yBAAQnJ,QAtCZ,WACEuL,GAAmBD,IAqCkB7M,KAAK,SAAxC,uBACa6M,EAAiB,QAAU,WADxC,WAGCA,GAAkB,cAAC,GAAD,CAAMtD,SA1B7B,YAAuD,IAA3Bf,EAA0B,EAA1BA,QAASwB,EAAiB,EAAjBA,KAAMvB,EAAW,EAAXA,QACzCpH,EACEkH,GAAY,CACVC,UACAP,SACAlC,OACA0C,aAEFyC,MAAK,WACLlB,IACA3I,EACEsE,GAAc,CACZG,MAAO8G,EACP7G,OACAC,gBAaJ,oDACqBsG,EAAMW,OAD3B,OACuCL,EADvC,OAGA,eAAC,IAAD,CACEM,WAAS,EACTvB,MAAM,mBACN9B,SA5CN,YAAkD,IAAZ/B,EAAW,EAArBgC,OAAUhC,MACpCiF,EAAQjF,GACRzG,EACEsE,GAAc,CACZG,MAAO8G,EACP7G,OACAC,KAAM8B,MAuCNqF,QAAM,EACNvB,KAAK,QACL9D,MAAO9B,EACPhC,QAAQ,WAPV,UASE,cAAC,IAAD,CAAa8D,MAAM,SAAnB,oBACA,cAAC,IAAD,CAAaA,MAAM,UAAnB,qBACA,cAAC,IAAD,CAAaA,MAAM,QAAnB,sBAEF,cAAC,IAAD,UAAUuE,GAAeC,S,wCCnHzBc,GAAaxH,YAAiB,sBAAD,uCAAwB,WACzD5F,EADyD,sBAAA6F,EAAA,6DAEvDI,EAFuD,EAEvDA,gBAFuD,kBAKhCC,KAAMC,IAAN,uBAA0BqB,KAA1B,WALgC,cAKjDpB,EALiD,gBAM/BM,QAAQC,IAC9BP,EAASC,KAAKzE,KAAI,SAACyL,GAAD,OAChBnH,KAAMC,IAAN,uBAA0BqB,KAA1B,kBAAiD6F,EAAK1E,IAAI5C,KAA1D,eARmD,cAMjDuH,EANiD,yBAWhDlH,EAASC,KAAKzE,KAAI,SAACyL,EAAMpE,GAAP,mBAAC,eACrBoE,GADoB,IAEvBf,MAAOgB,EAAUrE,GAAO5C,WAb6B,2DAgBhDJ,EAAgB,KAAMK,aAhB0B,0DAAxB,yDAoB7BiH,GAAU3H,YAAiB,oBAAD,uCAAsB,WACpDyH,EADoD,oBAAAxH,EAAA,6DAElDI,EAFkD,EAElDA,gBAFkD,kBAK3BC,KAAMwC,KAAN,uBACLlB,KADK,UAErB6F,GAPgD,cAK5CjH,EAL4C,yBAS3CA,EAASC,MATkC,yDAW3CJ,EAAgB,KAAMK,aAXqB,yDAAtB,yDAe1BkH,GAAa5H,YAAiB,uBAAD,uCAAyB,WAC1DG,EAD0D,kBAAAF,EAAA,6DAExDI,EAFwD,EAExDA,gBAFwD,kBAKlDC,KAAM2C,OAAN,uBAA6BrB,KAA7B,kBAAoDzB,IALF,+EAOjDE,EAAgB,KAAMK,aAP2B,wDAAzB,yDA+BpBrF,GApBKf,YAAY,CAC9BC,eAAa,sBACVoN,GAAQjG,WADE,SACS1H,EAAOG,GACzBH,EAAM6N,KAAK1N,EAAOS,YAFT,gBAIV4M,GAAW9F,WAJD,SAIY1H,EAAOG,GAC5B,OAAOA,EAAOS,WALL,gBAOVgN,GAAWlG,WAPD,SAOY1H,EAAOG,GAAS,IACxBgG,EAAShG,EAAOO,KAArB0I,IACFC,EAAQrJ,EAAMsJ,WAAU,SAACmE,GAAD,OAAUA,EAAK1E,IAAI5C,OAASA,KAC1DnG,EAAMuJ,OAAOF,EAAO,MAVX,IAabxI,aAAc,GACdC,KAAM,gBACNC,SAAU,KAhBJM,QC7CFyM,GAAY9H,YAAiB,qBAAD,uCAAuB,WACvD7E,EADuD,0BAAA8E,EAAA,6DAErDI,EAFqD,EAErDA,gBAFqD,kBAKTS,QAAQC,IAAI,CACtDT,KAAMC,IAAN,uBAA0BqB,KAA1B,kBAAiDzG,IACjDmF,KAAMC,IAAN,uBAA0BqB,KAA1B,kBAAiDzG,EAAjD,aAPmD,0CAK9C4M,EAL8C,KAKhCC,EALgC,kDAUhDD,EAAatH,MAVmC,IAWnDiG,MAAOsB,EAAcvH,QAX8B,2DAc9CJ,EAAgB,KAAMK,aAdwB,0DAAvB,yDAkB5BuH,GAAiBjI,YAAiB,sBAAD,uCAAwB,qCAAAC,EAAA,6DAC3DoC,EAD2D,EAC3DA,OAAQ6F,EADmD,EACnDA,SAAU/H,EADyC,EACzCA,KAClBE,EAF2D,EAE3DA,gBAF2D,kBAKrDC,KAAMwC,KAAN,uBACYlB,KADZ,kBACmCsG,EADnC,iCAGD7F,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YARmC,gFAYpDE,EAAgB,KAAMK,aAZ8B,yDAAxB,yDAgBjCyH,GAAYnI,YAAiB,mBAAD,uCAAqB,qCAAAC,EAAA,6DACnDoC,EADmD,EACnDA,OAAQ6F,EAD2C,EAC3CA,SAAU/H,EADiC,EACjCA,KAClBE,EAFmD,EAEnDA,gBAFmD,kBAK7CC,KAAMwC,KAAN,uBAA2BlB,KAA3B,kBAAkDsG,EAAlD,0BACH7F,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YAN6B,gFAS5CE,EAAgB,KAAMK,aATsB,yDAArB,yDAalC,SAAS0H,GAAoBC,GAC3B,8CAAO,WAAgB5M,GAAhB,SAAAwE,EAAA,sEACCxE,EAAS0M,GAAUE,IADpB,uBAEC5M,EAAS+L,MAFV,2CAAP,sDAMF,SAASc,GAAyBD,GAChC,8CAAO,WAAgB5M,GAAhB,SAAAwE,EAAA,sEACCxE,EAASwM,GAAeI,IADzB,uBAEC5M,EAAS+L,MAFV,2CAAP,sD,IAoBanM,GAdKf,YAAY,CAC9BC,cAAc,gBACXuN,GAAUpG,WADA,SACW1H,EAAOG,GAC3B,OAAOA,EAAOS,WAGlBC,aAAc,CACZ6L,MAAO,IAET5L,KAAM,OACNC,SAAU,KAVJM,QC/DFkN,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMwO,QAAQC,SAEvB,SAAUA,GACR,OAAOA,KAIX,SAASC,KACP,OAAO3O,aACL,SAAUC,GACR,OAAOA,EAAMwO,QAAQC,SAEvB,SAAUpJ,EAAGgD,GACX,OAAOA,KAET,SAAUhD,EAAGsJ,EAAIxI,GACf,OAAOA,KAET,SAAUsI,EAAOpG,EAAQlC,GAEvB,OADAkC,EAASD,GAA0BC,GAC5BoG,EAAMzM,KAAI,SAACyL,GAIhB,MAAO,CACLmB,OAJanB,EAAKf,MAAM5G,MACxB,SAAC6F,GAAD,OAAUA,EAAKvL,OAASiI,GAAUsD,EAAKtD,GAAQU,IAAI5C,OAASA,KAI5DrF,KAAM2M,EAAK3M,KACXqF,KAAMsH,EAAK1E,IAAI5C,YC/BVlE,mBAAW,CACxB4M,mBAAoB,CAClBC,SAAU,MCkHCC,OAhGf,YAAsD,IAA3BtM,EAA0B,EAA1BA,SAAU4F,EAAgB,EAAhBA,OAAQlC,EAAQ,EAARA,KACrCvD,EAAUC,KACVpB,EAAWC,cACXsN,EAAgBnE,kBAAQ6D,GAA8B,IACtDO,EAAkBpE,kBAAQnF,EAAkC,IAC5DP,EAAUtD,aAAY,SAAC7B,GAAD,OAC1BiP,EAAgBjP,EAAO,CAAC,mBAAoB,2BAExCyO,EAAQ5M,aAAY,SAAC7B,GAAD,OAAWgP,EAAchP,EAAOqI,EAAQlC,MARf,EASnBrD,mBAAS,MATU,mBAS5CoM,EAT4C,KASlCC,EATkC,KAU7CC,EAAgBvE,mBACpB,kBAAM4D,EAAM7I,QAAO,qBAAGgJ,UAAqBvB,SAC3C,CAACoB,IAEG1L,EAAO0C,QAAQyJ,GAd8B,EAevBpM,mBAAS,IAfc,mBAe5CuM,EAf4C,KAepCC,EAfoC,KAyBnD,SAASC,EAAYlH,EAAQuG,EAAQV,GACnC,OAAO,WACL,IAAIsB,EAAKpB,GACLlG,GAAQ,EACR0G,IACFY,EAAKlB,GACLpG,GAAQ,GAEVzG,EAAS+N,EAAG,CAAEnH,SAAQ6F,WAAU/H,UAChCmJ,EAAU,2BAAKD,GAAN,mBAAenB,EAAWhG,MAIvC,OACE,qCACGzF,GAvBL,SAAoBQ,GAClBkM,EAAYlM,EAAEwM,iBAsBUL,GACtB,eAAC,KAAD,CACEF,SAAUA,EACVQ,aAAc,CACZC,WAAY,SACZC,SAAU,UAEZC,QA1BN,WACEV,EAAY,OA0BRpM,KAAMA,EACN+M,gBAAiB,CACfH,WAAY,SACZC,SAAU,OAVd,UAaGzK,GAAW,cAAC,KAAD,IACZ,cAAC,IAAD,CACE4K,OAAK,EACLC,UACE,eAAC,KAAD,wBACaZ,EADb,OACgCX,EAAMpB,OADtC,YAHJ,SAQGoB,EAAMzM,KAAI,gBAAG4M,EAAH,EAAGA,OAAQ9N,EAAX,EAAWA,KAAMqF,EAAjB,EAAiBA,KAAjB,OACT,eAAC,IAAD,CACE1B,QAAM,EACNwL,SAAU9K,EAEVxD,QAAS4N,EAAYlH,EAAQuG,EAAQzI,GAJvC,UAME,cAAC,KAAD,CACEvD,QAAS,CACP2I,KAAM3I,EAAQiM,oBAFlB,SAKE,cAAC,KAAD,CACE1E,QAAShE,KAAQkJ,EAASA,EAAOlJ,GAAQyI,EACzCsB,eAAa,EACbC,KAAK,QACLnE,KAAK,YAGT,cAAC,IAAD,UAAkBlL,MAfbqF,e,mBCrFnB,SAASiK,GAAT,GAAmE,IAAjD3N,EAAgD,EAAhDA,SAAU4F,EAAsC,EAAtCA,OAAQgI,EAA8B,EAA9BA,OAAQrE,EAAsB,EAAtBA,KAAMsE,EAAgB,EAAhBA,OAAQlQ,EAAQ,EAARA,KAExD,GADAiI,EAASD,GAA0BC,IAC9BiI,EACH,OAAO,KAGT,IAAIC,EAAG,kBAAclI,EAAd,YAAwBiI,EAAxB,YAAkClQ,EAAlC,KAOP,OANIiQ,IACFE,GAAG,iBAAcF,IAEfrE,IACFuE,GAAG,eAAYvE,IAEVvJ,EAAS8N,GAGlBH,GAAOI,UAAY,CACjB/N,SAAUgO,KAAUC,KAAKC,WACzBtI,OAAQoI,KAAUG,MAAM,CAAC,SAAU,SAAU,UAAUD,WACvDN,OAAQI,KAAUI,OAClB7E,KAAMyE,KAAUK,OAChBR,OAAQG,KAAUI,OAClBzQ,KAAMqQ,KAAUG,MAAM,CAAC,WAAY,SAAU,aAGhCR,U,UCTAW,OAhBf,YAAwD,IAAtC9G,EAAqC,EAArCA,SAAqC,IAA3B/B,MAAO8I,OAAoB,MAAL,EAAK,IAC3BlO,mBAASkO,GADkB,mBAC9C9I,EAD8C,KACvC+I,EADuC,KAQrD,OAAO,cAAC,KAAD,CAAWC,IAAK,GAAIpQ,KAAK,IAAImJ,SALpC,SAAsB5E,EAAG6C,GACvB+I,EAAS/I,GACT+B,EAAS/B,IAGiDA,MAAOA,KCV/DiJ,GAAepR,aACnB,SAAUC,GACR,OAAOA,EAAMoR,SAEf,SAAU/I,GACR,OAAOA,KCLLkG,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMwO,QAAQlH,WAEvB,SAAUA,GACR,OAAOA,KAIL+J,GAAetR,YACnB,CACE,SAAUC,GACR,OAAOA,EAAMwO,QAAQlH,SAEvB,SAAUjC,EAAGjF,GACX,OAAOA,GAET,SAAUiF,EAAGsJ,EAAIxI,GACf,OAAOA,KAGX,SAAUmB,EAASlH,EAAM+F,GACvB,IAAMmL,EAAShK,EAAQiK,MACrB,SAACC,GAAD,OAAYA,EAAOpR,OAASA,GAAQoR,EAAOpR,GAAM2I,IAAI5C,OAASA,KAEhE,OAAOmL,EAASA,EAAOE,OAAS,KCxB9BC,GAAezL,YAAiB,wBAAD,uCAA0B,WAC7D5F,EAD6D,oBAAA6F,EAAA,6DAE3DI,EAF2D,EAE3DA,gBAF2D,kBAKpCC,KAAMC,IAAI,uBAL0B,cAKrDC,EALqD,yBAMpDA,EAASC,MAN2C,yDAQpDJ,EAAgB,KAAMK,aAR8B,yDAA1B,yDAY/BgL,GAAa1L,YAAiB,uBAAD,uCAAyB,qCAAAC,EAAA,6DACxDoC,EADwD,EACxDA,OAAQmJ,EADgD,EAChDA,OAAQrL,EADwC,EACxCA,KAChBE,EAFwD,EAExDA,gBAFwD,kBAKlDC,KAAMwC,KAAK,sBAAX,gBACHT,EAAS,CACR,CACEU,IAAK,CAAE5C,QACPqL,aATkD,gFAcjDnL,EAAgB,KAAMK,aAd2B,yDAAzB,yDA2CpBrF,IAzBM2E,YAAiB,yBAAD,uCAA2B,mCAAAC,EAAA,6DAC5DoC,EAD4D,EAC5DA,OAAQlC,EADoD,EACpDA,KACRE,EAF4D,EAE5DA,gBAF4D,kBAKtDC,KAAMwC,KAAK,6BAAX,gBACHT,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YANsC,gFASrDE,EAAgB,KAAMK,aAT+B,yDAA3B,yDAajBpG,YAAY,CAC9BC,cAAc,gBACXkR,GAAa/J,WADH,SACc1H,EAAOG,GAC9B,OAAOA,EAAOS,WAGlBC,aAAc,GACdC,KAAM,kBACNC,SAAU,KARJM,SC5CFkN,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMwO,QAAQmD,mBAEvB,SAAUA,GACR,OAAOA,KAILC,GAAsB7R,YAC1B,CACE,SAAUC,GACR,OAAOA,EAAMwO,QAAQmD,iBAEvB,SAAUtM,EAAGjF,GACX,OAAOA,GAET,SAAUiF,EAAGsJ,EAAIxI,GACf,OAAOA,KAGX,SAAUwL,EAAiBvR,EAAM+F,GAC/B,IAAMmL,EAASK,EAAgBJ,MAC7B,SAACM,GAAD,OACEA,EAAezR,OAASA,GAAQyR,EAAezR,GAAM2I,IAAI5C,OAASA,KAEtE,OAAOV,QAAQ6L,MCzBbQ,GAAuB9L,YAC3B,gCAD2C,uCAE3C,WAAgB5F,EAAhB,oBAAA6F,EAAA,6DAAwBI,EAAxB,EAAwBA,gBAAxB,kBAE2BC,KAAMC,IAAI,+BAFrC,cAEUC,EAFV,yBAGWA,EAASC,MAHpB,yDAKWJ,EAAgB,KAAMK,aALjC,yDAF2C,yDAYvCqL,GAAqB/L,YACzB,mCADyC,uCAEzC,mCAAAC,EAAA,6DAAkBoC,EAAlB,EAAkBA,OAAQlC,EAA1B,EAA0BA,KAAUE,EAApC,EAAoCA,gBAApC,kBAEUC,KAAMwC,KAAK,8BAAX,gBACHT,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YAH1B,gFAMWE,EAAgB,KAAMK,aANjC,yDAFyC,yDAarCsL,GAAuBhM,YAC3B,qCAD2C,uCAE3C,mCAAAC,EAAA,6DAAkBoC,EAAlB,EAAkBA,OAAQlC,EAA1B,EAA0BA,KAAUE,EAApC,EAAoCA,gBAApC,kBAEUC,KAAMwC,KAAK,qCAAX,gBACHT,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YAH1B,gFAMWE,EAAgB,KAAMK,aANjC,yDAF2C,yD,IA2C9BrF,GAhBKf,YAAY,CAC9BC,cAAc,gBACXuR,GAAqBpK,WADX,SACsB1H,EAAOG,GACtC,OAAOA,EAAOS,WAGlBC,aAAc,GACdC,KAAM,0BACNC,SAAU,KARJM,QCrDFkN,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMwO,QAAQyD,aAEvB,SAAUA,GACR,OAAOA,KAILC,GAAsBnS,YAC1B,CACE,SAAUC,GACR,OAAOA,EAAMwO,QAAQyD,WAEvB,SAAU5M,EAAGjF,GACX,OAAOA,GAET,SAAUiF,EAAGsJ,EAAIxI,GACf,OAAOA,KAGX,SAAU8L,EAAW7R,EAAM+F,GACzB,IAAMmL,EAASW,EAAUV,MACvB,SAAC5F,GAAD,OAAUA,EAAKvL,OAASA,GAAQuL,EAAKvL,GAAM2I,IAAI5C,OAASA,KAE1D,OAAOV,QAAQ6L,MCxBba,GAAiBnM,YACrB,0BADqC,uCAErC,WAAgB5F,EAAhB,oBAAA6F,EAAA,6DAAwBI,EAAxB,EAAwBA,gBAAxB,kBAE2BC,KAAMC,IAAI,yBAFrC,cAEUC,EAFV,yBAGWA,EAASC,MAHpB,yDAKWJ,EAAgB,KAAMK,aALjC,yDAFqC,yDAYjC0L,GAAiBpM,YACrB,wBADqC,uCAErC,mCAAAC,EAAA,6DAAkBoC,EAAlB,EAAkBA,OAAQlC,EAA1B,EAA0BA,KAAUE,EAApC,EAAoCA,gBAApC,kBAEUC,KAAMwC,KAAK,wBAAX,gBACHT,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YAH1B,gFAMWE,EAAgB,KAAMK,aANjC,yDAFqC,yDAajC2L,GAAsBrM,YAC1B,2BAD0C,uCAE1C,mCAAAC,EAAA,6DAAkBoC,EAAlB,EAAkBA,OAAQlC,EAA1B,EAA0BA,KAAUE,EAApC,EAAoCA,gBAApC,kBAEUC,KAAMwC,KAAK,+BAAX,gBACHT,EAAS,CAAC,CAAEU,IAAK,CAAE5C,YAH1B,gFAMWE,EAAgB,KAAMK,aANjC,yDAF0C,yD,IA2C7BrF,GAhBKf,YAAY,CAC9BC,cAAc,gBACX4R,GAAezK,WADL,SACgB1H,EAAOG,GAChC,OAAOA,EAAOS,WAGlBC,aAAc,GACdC,KAAM,oBACNC,SAAU,KARJM,QC6COiR,OA5Ef,WAAkB,IAAD,IACT7Q,EAAWC,cACTyE,EAASoM,cAATpM,KACF2E,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,kBAErBoR,EAAQvP,YAAYsP,IACpBK,EAAS3P,aAAY,SAAC7B,GAAD,OAAWqR,GAAarR,EAAO,QAASmG,MAC7DqM,EAAgB3Q,aAAY,SAAC7B,GAAD,OAChC4R,GAAoB5R,EAAO,QAASmG,MAEhCsM,EAAgB5Q,aAAY,SAAC7B,GAAD,OAChCkS,GAAoBlS,EAAO,QAASmG,MA2BtC,OAxBAuM,qBAAU,WACRjR,EAASkF,GAAWR,MACnB,CAAC1E,EAAU0E,IAuBZ,qCACG2E,GAAY,6CACb,cAAC,GAAD,CAAiBzC,OAAO,SAASlC,KAAMA,EAAvC,SACG,SAACxE,EAASyN,GAAV,OACC,wBAAQzN,QAASA,EAASvB,KAAK,SAA/B,SACGgP,EAAa,oBACGA,EADH,YAEV,mBAIV,wBAAQzN,QApBZ,WDPF,IAAuC0M,ECSjC5M,EADEgR,GDR+BpE,ECSM,CAAEhG,OAAQ,SAAUlC,QDR/D,uCAAO,WAAgB1E,GAAhB,SAAAwE,EAAA,sEACCxE,EAAS4Q,GAAoBhE,IAD9B,uBAEC5M,EAAS0Q,MAFV,2CAAP,uDARF,SAAkC9D,GAChC,8CAAO,WAAgB5M,GAAhB,SAAAwE,EAAA,sEACCxE,EAAS2Q,GAAe/D,IADzB,uBAEC5M,EAAS0Q,MAFV,2CAAP,sDCkBWQ,CAAyB,CAAEtK,OAAQ,SAAUlC,WAelB/F,KAAK,SAAvC,SACGqS,EAAgB,wBAA0B,oBAE7C,wBAAQ9Q,QA/BZ,WHCF,IAAwC0M,EGClC5M,EADE+Q,GHAgCnE,EGCM,CAAEhG,OAAQ,SAAUlC,QHAhE,uCAAO,WAAgB1E,GAAhB,SAAAwE,EAAA,sEACCxE,EAASuQ,GAAqB3D,IAD/B,uBAEC5M,EAASqQ,MAFV,2CAAP,uDARF,SAAsCzD,GACpC,8CAAO,WAAgB5M,GAAhB,SAAAwE,EAAA,sEACCxE,EAASsQ,GAAmB1D,IAD7B,uBAEC5M,EAASqQ,MAFV,2CAAP,sDGUWc,CAA6B,CAAEvK,OAAQ,SAAUlC,WA0BtB/F,KAAK,SAAvC,SACGoS,EAAgB,wBAA0B,cAE7C,cAAC,GAAD,CAAQvI,SAtCZ,SAAsB/B,GACpBzG,EAASiQ,GAAW,CAAErJ,OAAQ,SAAUmJ,OAAQtJ,EAAO/B,WAqCrB+B,MAAOsJ,IACvC,cAAC,GAAD,CACEnJ,OAAO,SACP2D,KAAK,OACLsE,OAAM,UAAEc,EAAM3J,eAAR,aAAE,EAAesB,IAAI8J,KAC3BzS,KAAK,SAJP,SAMG,SAACmQ,GAAD,OAAS,qBAAKuC,IAAI,SAASC,IAAKxC,OAEnC,cAAC,GAAD,CACElI,OAAO,SACPqE,MAAO0E,EAAMvK,SACbV,KAAMA,EACN6G,YAAY,UAAAoE,EAAM5J,aAAN,eAAaX,WAAY,QC9C9BmM,OA7Cf,YAQI,IAPF/C,EAOC,EAPDA,SACAgD,EAMC,EANDA,YACAC,EAKC,EALDA,gBACAC,EAIC,EAJDA,YACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,WACAC,EACC,EADDA,eAEA,OACE,gCACE,wBAAQrD,SAAUA,EAAUtO,QAASwR,EAAa/S,KAAK,SAAvD,wBAGA,wBACE6P,SAAUA,IAAaiD,EACvBvR,QAAS2R,EACTlT,KAAK,SAHP,2BAOA,wBACE6P,SAAUA,IAAagD,EACvBtR,QAAS0R,EACTjT,KAAK,SAHP,uBAOA,wBAAQ6P,SAAUA,EAAUtO,QAASyR,EAAYhT,KAAK,SAAtD,2BCoBSmT,OA/Cf,SAAuBC,GAAqB,IAAD,EACDC,cADC,mBAClCC,EADkC,KACpBC,EADoB,OAEG9I,mBAC1C,kBAAM/I,OAAO8R,YAAYF,KACzB,CAACA,IAJsC,IAEjCpL,YAFiC,MAE1B,IAF0B,EAElBuL,EAFkB,wBAMnCC,EAAajS,YAAY2R,GA8B/B,MAAO,CACLP,YAAaxK,SAASH,GAAQwL,EAC9BZ,gBAAiBzK,SAASH,GAAQ,EAClCA,OACAyL,YAhCF,WACEJ,EAAgB,aACdrL,KAAM,GACHuL,KA8BLG,WA1BF,WACEL,EAAgB,aACdrL,KAAMwL,GACHD,KAwBLI,WApBF,WACEN,EAAgB,aACdrL,KAAMG,SAASH,GAAQ,GACpBuL,KAkBLK,eAdF,WACEP,EAAgB,aACdrL,KAAMG,SAASH,GAAQ,GACpBuL,OClCHtF,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMmU,OAAO5L,YAEtB,SAAUA,GACR,OAAOA,KAIL6L,GAAmBrU,aACvB,SAAUC,GACR,OAAOA,EAAMmU,OAAO3K,WAAWhB,SAEjC,SAAUsL,GACR,OAAOA,KCXLO,GAAcrO,YAAiB,eAAD,uCAAiB,qCAAAC,EAAA,6DACjDqO,EADiD,EACjDA,SAAUhM,EADuC,EACvCA,KACVjC,EAFiD,EAEjDA,gBAFiD,kBAK1BC,KAAMC,IAAN,wBACJ+N,EADI,iBACahM,EADb,kBAC2BX,KAND,cAK3CnB,EAL2C,OAQhC,YAAb8N,IACF9N,EAASC,KAAOD,EAASC,KAAKzE,KAAI,SAAC2J,GAAD,MAAW,CAAEyF,MAAOzF,OATP,kBAW1C,CACLpD,SAAU/B,EAASC,KACnB+B,MAAOC,SAASjC,EAASkC,QAAQ,8BAbc,2DAgB1CrC,EAAgB,KAAMK,aAhBoB,0DAAjB,yDAsCrBrF,GAlBKf,YAAY,CAC9BC,cAAc,gBACX8T,GAAY3M,WADF,SACa1H,EAAOG,GAC7BH,EAAMuI,SAAWpI,EAAOS,QAAQ2H,SAChCvI,EAAMwJ,WAAWhB,MAAQrI,EAAOS,QAAQ4H,SAG5C3H,aAAc,CACZ0H,SAAU,GACViB,WAAY,CACVhB,MAAO,IAGX1H,KAAM,SACNC,SAAU,KAdJM,QCvBOY,gBAAW,SAACG,GAAD,MAAY,CACpCmS,OAAQ,CACNC,OAAQ,EACRC,QAAS,EACTC,SAAU,YAEZC,MAAO,CACLC,OAAQ,OACRC,UAAW,QACX1S,MAAO,QAEToJ,KAAM,CACJuJ,aAAa,aAAD,OAAe1S,EAAM2S,QAAQC,SACzCC,YAAY,aAAD,OAAe7S,EAAM2S,QAAQC,SACxCN,SAAU,gBCmCCQ,OAzCf,YAAyD,IAAzCC,EAAwC,EAAxCA,YAAapR,EAA2B,EAA3BA,MAAOuM,EAAoB,EAApBA,OAAQ8E,EAAY,EAAZA,SACpCxS,EAAUC,KAChB,OACE,sBAAKwS,UAAWzS,EAAQ2I,KAAxB,UACE,cAAC,GAAD,CAAQlD,OAAO,SAAS2D,KAAK,OAAOsE,OAAQA,EAAQlQ,KAAK,SAAzD,SACG,SAACmQ,GAAD,OAAS,qBAAKuC,IAAI,SAASuC,UAAWzS,EAAQ+R,MAAO5B,IAAKxC,OAE7D,sBAAK8E,UAAWzS,EAAQ2R,OAAxB,UACE,cAAC,KAAD,CACEpQ,MAAM,YACN4H,MACE,eAAC,IAAD,CAAe3H,QAAQ,UAAvB,UACGgR,EADH,sBAIFpJ,KAAK,UAEP,gCACE,eAAC,IAAD,CAAe7H,MAAM,cAAcyH,QAAQ,SAASxH,QAAQ,QAA5D,UACGL,EAAO,OAEV,cAAC,IAAD,CACEI,MAAM,gBACNyH,QAAQ,SACRxH,QAAQ,UAHV,SAKG+Q,cCRb,SAASG,GAAT,GAA4C,IAArBhB,EAAoB,EAApBA,SAAUH,EAAU,EAAVA,OAC/B,OAAQG,GACN,IAAK,WACH,OAzBN,SAAwBH,GACtB,OAAOA,EAAOnS,KAAI,gBAAGoP,EAAH,EAAGA,MAAOgE,EAAV,EAAUA,SAAV,OAChB,cAAC,IAAD,CACE1Q,UAAW6Q,IACX5J,MAAI,EAEJ6J,GAAI,EACJC,GAAI,EACJ5Q,GAAE,sBAAiBuM,EAAMrI,IAAI5C,MAC7BuP,GAAI,EACJC,GAAI,GARN,SAUE,cAAC,GAAD,CACER,YAAa/D,EAAMwE,KACnB7R,MAAOqN,EAAMrN,MACbuM,OAAQc,EAAMrI,IAAI8J,KAClBuC,SAAUA,KAXPhE,EAAMrI,IAAI8M,UAoBRC,CAAe3B,GACxB,IAAK,UAEL,IAAK,cAEL,IAAK,UAEL,IAAK,YAEL,IAAK,cAEL,QACE,OAAO,MCoBE4B,OAhDf,YAA+B,IAAbzB,EAAY,EAAZA,SACV7S,EAAWC,cADW,EAUxB6R,GAAca,IAPhBnB,EAH0B,EAG1BA,YACAC,EAJ0B,EAI1BA,gBACA5K,EAL0B,EAK1BA,KACAyL,EAN0B,EAM1BA,YACAC,EAP0B,EAO1BA,WACAC,EAR0B,EAQ1BA,WACAC,EAT0B,EAS1BA,eAEIpJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,mBAErBmU,EAAStS,YAAY0M,IAM3B,OAJAmE,qBAAU,WACRjR,EAAS4S,GAAY,CAAEC,WAAUhM,YAChC,CAACgM,EAAU7S,EAAU6G,IAGtB,qCACGwC,GAAY,6CACb,cAAC,GAAD,CACEmF,SAAUnF,EACVmI,YAAaA,EACbC,gBAAiBA,EACjBC,YAAaY,EACbX,WAAYY,EACZX,WAAYY,EACZX,eAAgBY,IAElB,cAAC,IAAD,CAASzI,WAAS,EAAlB,SAAoB6J,GAAY,CAAEhB,WAAUH,iBC7C5ChD,GAAepR,aACnB,SAAUC,GACR,OAAOA,EAAMgW,UAEf,SAAU3N,GACR,OAAOA,KCJL4N,GAAcjQ,YAAiB,eAAD,uCAAiB,WACnDG,EADmD,4BAAAF,EAAA,6DAEjDI,EAFiD,EAEjDA,gBAFiD,kBAKcS,QAAQC,IAAI,CACzET,KAAMC,IAAN,wBAA2BJ,EAA3B,mBACAG,KAAMC,IAAN,wBAA2BJ,EAA3B,YACAG,KAAMC,IAAN,wBAA2BJ,EAA3B,aAR+C,0CAK1Ca,EAL0C,KAKzBkP,EALyB,KAKTC,EALS,uBAU1C,CACLhC,OAAQ+B,EAAezP,KACvB2P,MAAOD,EAAc1P,KACrBgB,QAAST,EAAgBP,OAbsB,2DAgB1CJ,EAAgB,KAAMK,aAhBoB,0DAAjB,yDAoCrBrF,GAhBKf,YAAY,CAC9BC,cAAc,gBACX0V,GAAYvO,WADF,SACa1H,EAAOG,GAC7B,OAAOA,EAAOS,WAGlBC,aAAc,CACZsT,OAAQ,GACRiC,MAAO,GACP3O,QAAS,MAEX3G,KAAM,SACNC,SAAU,KAZJM,QCcOgV,OA5Bf,WAAmB,IAAD,EACV5U,EAAWC,cACTyE,EAASoM,cAATpM,KACF2E,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,mBAErBgW,EAASnU,YAAYsP,IAM3B,OAJAuB,qBAAU,WACRjR,EAASwU,GAAY9P,MACpB,CAAC1E,EAAU0E,IAGZ,qCACG2E,GAAY,6CACb,cAAC,GAAD,CACEzC,OAAO,SACP2D,KAAK,OACLsE,OAAM,UAAE0F,EAAOvO,eAAT,aAAE,EAAgBsB,IAAI8J,KAC5BzS,KAAK,UAJP,SAMG,SAACmQ,GAAD,OAAS,qBAAKuC,IAAI,SAASC,IAAKxC,OAEnC,8BAAM+F,KAAKC,UAAUP,EAAQ,KAAM,SC9BnCzH,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMwO,QAAQ3H,SAAS0B,YAEhC,SAAU1B,GACR,OAAOA,KAILuN,GAAmBrU,aACvB,SAAUC,GACR,OAAOA,EAAMwO,QAAQ3H,SAAS2C,WAAWhB,SAE3C,SAAUsL,GACR,OAAOA,KCiCIhH,OArCf,WACE,IAAMrL,EAAWC,cADC,EAUd6R,GAAca,IAPhBnB,EAHgB,EAGhBA,YACAC,EAJgB,EAIhBA,gBACA5K,EALgB,EAKhBA,KACAyL,EANgB,EAMhBA,YACAC,EAPgB,EAOhBA,WACAC,EARgB,EAQhBA,WACAC,EATgB,EAShBA,eAEIpJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,6BAErB6G,EAAWhF,YAAY0M,IAM7B,OAJAmE,qBAAU,WACRjR,EAASsE,GAAcuC,MACtB,CAAC7G,EAAU6G,IAGZ,qCACGwC,GAAY,6CACb,cAAC,GAAD,CACEmF,SAAUnF,EACVmI,YAAaA,EACbC,gBAAiBA,EACjBC,YAAaY,EACbX,WAAYY,EACZX,WAAYY,EACZX,eAAgBY,IAElB,8BAAMoC,KAAKC,UAAU1P,EAAU,KAAM,SC1CrCsK,GAAepR,aACnB,SAAUC,GACR,OAAOA,EAAMwO,QAAQf,QAEvB,SAAUpF,GACR,OAAOA,KCqBImO,OApBf,WACE,IAAM/U,EAAWC,cACTP,EAAOoR,cAAPpR,GACF2J,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,iBAErByN,EAAO5L,YAAYsP,IAMzB,OAJAuB,qBAAU,WACRjR,EAASqM,GAAU3M,MAClB,CAACM,EAAUN,IAGZ,qCACG2J,GAAY,6CACb,8BAAMwL,KAAKC,UAAU9I,EAAM,KAAM,SC2BxBgJ,OAvCf,WACE,IAAMhV,EAAWC,cACXoJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,0BAErByO,EAAQ5M,YAAY0M,IAoB1B,OAlBAmE,qBAAU,WACRjR,EAAS+L,QACR,CAAC/L,IAiBF,qCACGqJ,GAAY,6CACb,wBAAQnJ,QAjBZ,WACEF,EACEkM,GAAQ,CACN+I,eAAe,EACfC,YAAa,kBACb7V,KAAM,cAYoBV,KAAK,SAAjC,sBAGA,wBAAQuB,QAVZ,WACEF,EAASmM,GAAW,aASaxN,KAAK,SAApC,yBAGA,8BAAMkW,KAAKC,UAAU9H,EAAO,KAAM,SCnBzBmI,OAnBf,WACE,IAAMnV,EAAWC,cACXoJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,4BAErBsH,EAAUzF,YAAY0M,IAM5B,OAJAmE,qBAAU,WACRjR,EAASgQ,QACR,CAAChQ,IAGF,qCACGqJ,GAAY,6CACb,8BAAMwL,KAAKC,UAAUjP,EAAS,KAAM,SCK3BsP,OAnBf,WACE,IAAMnV,EAAWC,cACXoJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,oCAErB2R,EAAkB9P,YAAY0M,IAMpC,OAJAmE,qBAAU,WACRjR,EAASqQ,QACR,CAACrQ,IAGF,qCACGqJ,GAAY,6CACb,8BAAMwL,KAAKC,UAAU5E,EAAiB,KAAM,SCKnCkF,OAnBf,WACE,IAAMpV,EAAWC,cACXoJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,8BAErBiS,EAAYpQ,YAAY0M,IAM9B,OAJAmE,qBAAU,WACRjR,EAAS0Q,QACR,CAAC1Q,IAGF,qCACGqJ,GAAY,6CACb,8BAAMwL,KAAKC,UAAUtE,EAAW,KAAM,SCnBtC1D,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAM8W,OAAOvO,YAEtB,SAAUA,GACR,OAAOA,KAIL6L,GAAmBrU,aACvB,SAAUC,GACR,OAAOA,EAAM8W,OAAOtN,WAAWhB,SAEjC,SAAUsL,GACR,OAAOA,KCXLiD,GAAqB/Q,YAAiB,eAAD,uCAAiB,uCAAAC,EAAA,6DACxDoC,EADwD,EACxDA,OAAQC,EADgD,EAChDA,KAAM0O,EAD0C,EAC1CA,MACd3Q,EAFwD,EAExDA,gBAFwD,SAKxDgC,EAASD,GAA0BC,GALqB,SAMjC/B,KAAMC,IAAN,wBACJ8B,EADI,kBACY2O,EADZ,iBAC0B1O,EAD1B,kBACwCX,KAPP,cAMlDnB,EANkD,yBASjD,CACL+B,SAAU/B,EAASC,KACnB+B,MAAOC,SAASjC,EAASkC,QAAQ,8BAXqB,2DAcjDrC,EAAgB,KAAMK,aAd2B,0DAAjB,yDAoC5BrF,GAlBKf,YAAY,CAC9BC,cAAc,gBACXwW,GAAmBrP,WADT,SACoB1H,EAAOG,GACpCH,EAAMuI,SAAWpI,EAAOS,QAAQ2H,SAChCvI,EAAMwJ,WAAWhB,MAAQrI,EAAOS,QAAQ4H,SAG5C3H,aAAc,CACZ0H,SAAU,GACViB,WAAY,CACVhB,MAAO,IAGX1H,KAAM,SACNC,SAAU,KAdJM,QCiDO4V,I,GAAAA,GA1Df,YAA6B,IAAX5O,EAAU,EAAVA,OACV5G,EAAWC,cADS,EAUtB6R,GAAca,IAPhBnB,EAHwB,EAGxBA,YACAC,EAJwB,EAIxBA,gBACA5K,EALwB,EAKxBA,KACAyL,EANwB,EAMxBA,YACAC,EAPwB,EAOxBA,WACAC,EARwB,EAQxBA,WACAC,EATwB,EASxBA,eATwB,EAWcT,cAXd,mBAWnBC,EAXmB,KAWLC,EAXK,OAYH9I,mBAAQ,kBAAM/I,OAAO8R,YAAYF,KAAe,CACrEA,IADMsD,aAZkB,MAYV,GAZU,EAepBlM,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,mBAErBkX,EAAgBrV,YAAY0M,IAUlC,OARAmE,qBAAU,WACRjR,EAASsV,GAAmB,CAAE1O,SAAQC,OAAM0O,aAC3C,CAACvV,EAAU4G,EAAQC,EAAM0O,IAO1B,qCACGlM,GAAY,6CACb,cAAC,GAAD,CACEmF,SAAUnF,EACVmI,YAAaA,EACbC,gBAAiBA,EACjBC,YAAaY,EACbX,WAAYY,EACZX,WAAYY,EACZX,eAAgBY,IAElB,gCACE,uBAAOlK,QAAQ,QAAf,+BACA,uBACE7I,GAAG,QACH8I,SApBR,YAAmD,IAAZ/B,EAAW,EAArBgC,OAAUhC,MACrCyL,EAAgB,CAAEqD,MAAO9O,KAoBnB9H,KAAK,OACL8H,MAAO8O,OAGX,8BAAMV,KAAKC,UAAUW,EAAe,KAAM,SC7D1C/F,GAAepR,aACnB,SAAUC,GACR,OAAOA,EAAMmX,QAEf,SAAU9O,GACR,OAAOA,KCJLtC,GAAgBC,YAAiB,sBAAD,uCAAwB,uCAAAC,EAAA,6DAC1DC,EAD0D,EAC1DA,MAAOC,EADmD,EACnDA,KAAMC,EAD6C,EAC7CA,KACbC,EAF0D,EAE1DA,gBAF0D,kBAKnCC,KAAMC,IAAN,uBACLJ,EADK,qBACYC,EADZ,yBACiCF,IANE,cAKpDM,EALoD,yBAQnDA,EAASC,MAR0C,yDAUnDJ,EAAgB,KAAMK,aAV6B,yDAAxB,yDAchC0Q,GAAYpR,YAAiB,aAAD,uCAAe,WAC/CG,EAD+C,oCAAAF,EAAA,6DAE7CI,EAF6C,EAE7CA,gBAF6C,kBAanCS,QAAQC,IAAI,CACpBT,KAAMC,IAAN,uBAA0BJ,IAC1BG,KAAMC,IAAN,uBAA0BJ,EAA1B,sBACAG,KAAMC,IAAN,uBAA0BJ,EAA1B,YACAG,KAAMC,IAAN,uBAA0BJ,EAA1B,aACAG,KAAMC,IAAN,uBAA0BJ,EAA1B,aACAG,KAAMC,IAAN,uBAA0BJ,EAA1B,WACAG,KAAMC,IAAN,uBAA0BJ,EAA1B,iCApB2C,0CAM3Ca,EAN2C,KAO3CC,EAP2C,KAQ3CC,EAR2C,KAS3CC,EAT2C,KAU3CC,EAV2C,KAW3CR,EAX2C,KAY3CyQ,EAZ2C,uBAsBtC,CACLxQ,SAAUI,EAAiBR,KAC3BY,OAAQH,EAAeT,KACvBa,QAASH,EAAgBV,KACzBc,QAASH,EAAgBX,KACzB6Q,QAASD,EAAgB5Q,KACzBe,MAAOZ,EAAcH,KACrBgB,QAAST,EAAgBP,OA7BkB,2DAgCtCJ,EAAgB,KAAMK,aAhCgB,0DAAf,yDA2DnBrF,GAvBKf,YAAY,CAC9BC,eAAa,sBACVwF,GAAc2B,WADJ,SACe1H,EAAOG,GAC/BH,EAAM6G,SAAW1G,EAAOS,WAFf,gBAIVwW,GAAU1P,WAJA,SAIW1H,EAAOG,GAC3B,OAAOA,EAAOS,WALL,IAQbC,aAAc,CACZgG,SAAU,GACVQ,OAAQ,KACRC,QAAS,KACTC,QAAS,GACT+P,QAAS,GACT9P,MAAO,KACPC,QAAS,MAEX3G,KAAM,OACNC,SAAU,KAnBJM,QCMOkW,OA/Cf,WAAiB,IAAD,EACRC,EAA2B3M,kBAC/BnF,EACA,IAEIjE,EAAWC,cACTyE,EAASoM,cAATpM,KACF2E,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BwX,EAAyBxX,EAAO,CAAC,aAAc,2BAE3CmX,EAAOtV,YAAYsP,IACnBK,EAAS3P,aAAY,SAAC7B,GAAD,OAAWqR,GAAarR,EAAO,OAAQmG,MAgBlE,OAdAuM,qBAAU,WACRjR,EAAS2V,GAAUjR,MAClB,CAAC1E,EAAU0E,IAaZ,qCACG2E,GAAY,6CACb,wBAAQnJ,QAbZ,WACEF,EACEsE,GAAc,CAAEG,MAAOiR,EAAK3P,MAAMX,SAAUV,OAAMC,KAAM,aAWfhG,KAAK,SAA9C,gCAGA,cAAC,GAAD,CAAQ6J,SAVZ,SAAsB/B,GACpBzG,EAASiQ,GAAW,CAAErJ,OAAQ,QAASmJ,OAAQtJ,EAAO/B,WASpB+B,MAAOsJ,IACvC,cAAC,GAAD,CACEnJ,OAAO,QACP2D,KAAK,OACLsE,OAAM,UAAE6G,EAAK1P,eAAP,aAAE,EAAcsB,IAAI8J,KAC1BzS,KAAK,SAJP,SAMG,SAACmQ,GAAD,OAAS,qBAAKuC,IAAI,SAASC,IAAKxC,OAEnC,8BAAM+F,KAAKC,UAAUY,EAAM,KAAM,SCpDjC5I,GAAiBxO,aACrB,SAAUC,GACR,OAAOA,EAAMoW,MAAM7N,YAErB,SAAU6N,GACR,OAAOA,KAILhC,GAAmBrU,aACvB,SAAUC,GACR,OAAOA,EAAMoW,MAAM5M,WAAWhB,SAEhC,SAAUsL,GACR,OAAOA,KCXL2D,GAAazR,YAAiB,cAAD,uCAAgB,qCAAAC,EAAA,6DAC/CqO,EAD+C,EAC/CA,SAAUhM,EADqC,EACrCA,KACVjC,EAF+C,EAE/CA,gBAF+C,kBAKxBC,KAAMC,IAAN,uBACL+N,EADK,iBACYhM,EADZ,kBAC0BX,KANF,cAKzCnB,EALyC,OAQ9B,YAAb8N,IACF9N,EAASC,KAAOD,EAASC,KAAKzE,KAAI,SAAC2J,GAAD,MAAW,CAAEwL,KAAMxL,OATR,kBAWxC,CACLpD,SAAU/B,EAASC,KACnB+B,MAAOC,SAASjC,EAASkC,QAAQ,8BAbY,2DAgBxCrC,EAAgB,KAAMK,aAhBkB,0DAAhB,yDAsCpBrF,GAlBKf,YAAY,CAC9BC,cAAc,gBACXkX,GAAW/P,WADD,SACY1H,EAAOG,GAC5BH,EAAMuI,SAAWpI,EAAOS,QAAQ2H,SAChCvI,EAAMwJ,WAAWhB,MAAQrI,EAAOS,QAAQ4H,SAG5C3H,aAAc,CACZ0H,SAAU,GACViB,WAAY,CACVhB,MAAO,IAGX1H,KAAM,QACNC,SAAU,KAdJM,QCoCOqW,OAhDf,YAA8B,IAAbpD,EAAY,EAAZA,SACT7S,EAAWC,cADU,EAUvB6R,GAAca,IAPhBnB,EAHyB,EAGzBA,YACAC,EAJyB,EAIzBA,gBACA5K,EALyB,EAKzBA,KACAyL,EANyB,EAMzBA,YACAC,EAPyB,EAOzBA,WACAC,EARyB,EAQzBA,WACAC,EATyB,EASzBA,eAEIpJ,EAAWjJ,aAAY,SAAC7B,GAAD,OAC3BuF,EAAkBvF,EAAO,kBAErBoW,EAAQvU,YAAY0M,IAM1B,OAJAmE,qBAAU,WACRjR,EAASgW,GAAW,CAAEnD,WAAUhM,YAC/B,CAACgM,EAAU7S,EAAU6G,IAGtB,qCACGwC,GAAY,6CACb,cAAC,GAAD,CACEmF,SAAUnF,EACVmI,YAAaA,EACbC,gBAAiBA,EACjBC,YAAaY,EACbX,WAAYY,EACZX,WAAYY,EACZX,eAAgBY,IAElB,8BAAMoC,KAAKC,UAAUH,EAAO,KAAM,SC3CxC,SAASlW,GAAQC,GAEf,MADiB,CAAC,WAAY,aAAc,aAC5B2F,MAAK,SAAC6R,GAAD,OAAaxX,EAAOC,KAAKC,SAASsX,M,IAgB1CtW,GAbKf,YAAY,CAC9BC,cAAe,SAACC,GACdA,EAAQC,WAAWP,IAAS,SAACF,EAAOG,GAClC,IAAMyX,EAAQzX,EAAOC,KAAK2H,MAAM,KAC1B8P,EAAaD,EAAME,MACzB9X,EAAM,GAAD,OAAI4X,EAAMG,KAAK,OAAyB,YAAfF,MAGlChX,aAAc,GACdC,KAAM,UACNC,SAAU,KAVJM,Q,SCEO2W,gBAAgB,CAC7BnR,YACA4G,QACAgB,SACAnH,WACAqK,mBACAM,eCWagG,GAdDC,YAAe,CAC3B7W,QAAS,CACP8D,WACAiM,SACA+C,UACAlU,gBACA+V,UACAxH,WACAsI,UACAK,QACAf,YCMJ,SAAS+B,KACP,OACE,eAAC,IAAD,CAAQC,SAAS,OAAjB,UACE,cAAC,IAAD,CAAOC,QAAS,cAAC,IAAD,CAAUC,SAAO,EAACzT,GAAG,oBAAsBf,KAAK,MAChE,eAAC,IAAD,CAAOuU,QAAS,cAAC,EAAD,IAAYvU,KAAK,IAAjC,UACE,eAAC,IAAD,CAAOA,KAAK,SAAZ,UACE,cAAC,IAAD,CAAOuU,QAAS,cAAC,IAAD,CAAUC,SAAO,EAACzT,GAAG,aAAef,KAAK,MACzD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQ/D,SAAS,aAAexQ,KAAK,aACrD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQ/D,SAAS,YAAcxQ,KAAK,YACpD,cAAC,IAAD,CACEuU,QAAS,cAAC,GAAD,CAAQ/D,SAAS,gBAC1BxQ,KAAK,gBAEP,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQ/D,SAAS,YAAcxQ,KAAK,YACpD,cAAC,IAAD,CACEuU,QAAS,cAAC,GAAD,CAAQ/D,SAAS,gBAC1BxQ,KAAK,gBAEP,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAWvU,KAAK,aAElC,eAAC,IAAD,CAAOA,KAAK,QAAZ,UACE,cAAC,IAAD,CAAOuU,QAAS,cAAC,IAAD,CAAUC,SAAO,EAACzT,GAAG,aAAef,KAAK,MACzD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAO/D,SAAS,aAAexQ,KAAK,aACpD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAO/D,SAAS,YAAcxQ,KAAK,YACnD,cAAC,IAAD,CACEuU,QAAS,cAAC,GAAD,CAAO/D,SAAS,gBACzBxQ,KAAK,gBAEP,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAO/D,SAAS,YAAcxQ,KAAK,YACnD,cAAC,IAAD,CACEuU,QAAS,cAAC,GAAD,CAAO/D,SAAS,gBACzBxQ,KAAK,gBAEP,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAUvU,KAAK,aAEjC,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAYvU,KAAK,iBACjC,eAAC,IAAD,CAAOA,KAAK,SAAZ,UACE,cAAC,IAAD,CAAOuU,QAAS,cAAC,IAAD,CAAUC,SAAO,EAACzT,GAAG,QAAUf,KAAK,MACpD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQhQ,OAAO,QAAUvE,KAAK,QAC9C,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQhQ,OAAO,WAAavE,KAAK,WACjD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQhQ,OAAO,UAAYvE,KAAK,UAChD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,CAAQhQ,OAAO,WAAavE,KAAK,cAEnD,eAAC,IAAD,CAAOA,KAAK,UAAZ,UACE,cAAC,IAAD,CAAOuU,QAAS,cAAC,IAAD,CAAUC,SAAO,EAACzT,GAAG,YAAcf,KAAK,MACxD,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAavU,KAAK,YAClC,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAqBvU,KAAK,oBAC1C,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAevU,KAAK,cACpC,eAAC,IAAD,CAAOA,KAAK,QAAZ,UACE,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAWvU,KAAK,MAChC,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAUvU,KAAK,WAEjC,cAAC,IAAD,CAAOuU,QAAS,cAAC,GAAD,IAAcvU,KAAK,mBAGvC,cAAC,IAAD,CAAOuU,QAAS,cAAC,EAAD,IAAcvU,KAAK,SAgB1ByU,OAXf,WACE,OACE,cAAC,IAAD,CAAeN,MAAOA,GAAtB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,IACA,cAACE,GAAD,UCjFA1W,GAAawW,GAAbxW,S,8CAIR,sBAAAwE,EAAA,sEACQxE,GAAS+L,MADjB,uBAEQ/L,GAASgQ,MAFjB,uBAGQhQ,GAASqQ,MAHjB,uBAIQrQ,GAAS0Q,MAJjB,4C,mEAOAqG,GAAOlN,MAAK,WACVmN,IAASC,OAAO,cAAC,GAAD,IAAS7Q,SAAS8Q,eAAe,c","file":"static/js/main.e794242b.chunk.js","sourcesContent":["import { createSelector } from '@reduxjs/toolkit';\n\nconst selectNotifications = createSelector(\n  function (state) {\n    return state.notifications;\n  },\n  function (notifications) {\n    return notifications;\n  },\n);\n\nexport { selectNotifications };\n","import { createSlice, nanoid } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  return action.type.endsWith('/rejected');\n}\n\nconst { actions, reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      state[action.meta.requestId] = action.payload;\n    });\n  },\n  initialState: {},\n  name: 'notifications',\n  reducers: {\n    createNotification: {\n      prepare(message) {\n        return {\n          payload: {\n            id: nanoid(),\n            message,\n          },\n        };\n      },\n      reducer(state, action) {\n        state[action.payload.id] = action.payload.message;\n      },\n    },\n    removeNotification(state, action) {\n      delete state[action.payload];\n    },\n  },\n});\n\nconst { createNotification, removeNotification } = actions;\n\nexport { createNotification, removeNotification };\nexport default reducer;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { removeNotification } from '../../../redux/notifications/notifications.slice';\n\nfunction Single({ id, message }) {\n  const dispatch = useDispatch();\n\n  function handleClick() {\n    dispatch(removeNotification(id));\n  }\n\n  return <div onClick={handleClick}>{message}</div>;\n}\n\nexport default Single;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectNotifications } from '../../redux/notifications/notifications.selectors';\nimport Single from './Single/Single.component';\n\nfunction Notifications() {\n  const notifications = useSelector(selectNotifications);\n  return Object.entries(notifications).map(([id, message]) => (\n    <Single id={id} key={id} message={message} />\n  ));\n}\n\nexport default Notifications;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  drawerPaper: {\n    width: 256,\n  },\n});\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles(function (theme) {\n  return {\n    nestedListItemGutters: {\n      paddingLeft: theme.spacing(4),\n    },\n  };\n});\n","import {\n  Collapse as MuiCollapse,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport {\n  ExpandLess as ExpandLessIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nimport useStyles from './CollapsingListItem.styles';\n\nfunction CollapsingListItem({ children, listItemTextProps, ...props }) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  function handleClick(e) {\n    e.preventDefault();\n    setOpen(!open);\n  }\n\n  function renderChildren() {\n    return React.Children.map(children, function (child) {\n      return React.cloneElement(child, {\n        classes: { gutters: classes.nestedListItemGutters },\n      });\n    });\n  }\n\n  return (\n    <>\n      <MuiListItem {...props} onClick={handleClick}>\n        <MuiListItemText {...listItemTextProps} />\n        {open ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n      </MuiListItem>\n      <MuiCollapse in={open}>\n        <MuiList disablePadding>{renderChildren()}</MuiList>\n      </MuiCollapse>\n    </>\n  );\n}\n\nCollapsingListItem.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default CollapsingListItem;\n","import {\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport CollapsingListItem from './CollapsingListItem/CollapsingListItem.component';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/App.component.jsx in respective <Route> components.\nconst NAV_PATHS = [\n  {\n    nested: [\n      {\n        path: 'movies/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'movies/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'movies/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'movies/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'movies/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Movies',\n  },\n  {\n    nested: [\n      {\n        path: 'shows/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'shows/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'shows/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'shows/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'shows/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Shows',\n  },\n  {\n    nested: [\n      {\n        path: 'profile/ratings',\n        title: 'Ratings',\n      },\n      {\n        path: 'profile/recommendations',\n        title: 'Recommendations',\n      },\n      {\n        path: 'profile/watchlist',\n        title: 'Watchlist',\n      },\n      {\n        path: 'profile/lists',\n        title: 'Lists',\n      },\n      {\n        path: 'profile/comments',\n        title: 'Comments',\n      },\n    ],\n    title: 'Profile',\n  },\n  {\n    nested: [\n      {\n        path: 'search/all',\n        title: 'All',\n      },\n      {\n        path: 'search/movies',\n        title: 'Movies',\n      },\n      {\n        path: 'search/shows',\n        title: 'Shows',\n      },\n      {\n        path: 'search/people',\n        title: 'People',\n      },\n    ],\n    title: 'Search',\n  },\n];\n\nfunction renderListItems() {\n  return NAV_PATHS.map(function ({ nested, path, title }) {\n    const regularListItemProps = {\n      activeClassName: 'Mui-selected',\n      button: true,\n      component: NavLink,\n      key: title,\n      to: path,\n    };\n\n    // Regular ListItem. No need for custom CollapsingListItem.\n    if (!nested && path) {\n      return (\n        <MuiListItem {...regularListItemProps}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    }\n\n    const children = nested.map(function ({ path, title }) {\n      return (\n        // Overwrite key and path props as we are iterating over nested items.\n        <MuiListItem {...regularListItemProps} key={title} to={path}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    });\n\n    const collapsingListItemProps = {\n      button: true,\n      key: title,\n      listItemTextProps: {\n        primary: title,\n      },\n    };\n\n    return (\n      <CollapsingListItem {...collapsingListItemProps}>\n        {children}\n      </CollapsingListItem>\n    );\n  });\n}\n\nexport { NAV_PATHS, renderListItems };\n","import {\n  Box as MuiBox,\n  Divider as MuiDivider,\n  Drawer as MuiDrawer,\n  Grid as MuiGrid,\n  List as MuiList,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { Outlet } from 'react-router-dom';\n\nimport Notifications from '../Notifications/Notifications.component';\nimport useStyles from './Layout.styles';\nimport { renderListItems } from './Layout.utils';\n\nfunction Layout() {\n  const classes = useStyles();\n\n  return (\n    <MuiGrid>\n      <MuiDrawer\n        anchor='left'\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        color=''\n        variant='permanent'\n      >\n        <MuiBox px={2} py={1}>\n          <MuiTypography variant='h6'>Traktor</MuiTypography>\n          <MuiTypography variant='caption'>v0.1</MuiTypography>\n        </MuiBox>\n        <MuiDivider />\n        <MuiList disablePadding>{renderListItems()}</MuiList>\n      </MuiDrawer>\n      <MuiBox ml={32}>\n        <Notifications />\n        <Outlet />\n      </MuiBox>\n    </MuiGrid>\n  );\n}\n\nexport default Layout;\n","import React from 'react';\n\nfunction NotFound() {\n  return <h1>404 not found</h1>;\n}\n\nexport default NotFound;\n","import { createSelector } from '@reduxjs/toolkit';\n\nfunction stateSelector(state) {\n  return state.loading;\n}\n\n// Action types can be a string or array of strings\nfunction selector(_, actionTypes) {\n  return actionTypes;\n}\n\nconst selectLoadingFlag = createSelector([stateSelector, selector], function (\n  loading,\n  actionType,\n) {\n  return Boolean(loading[actionType]);\n});\n\nfunction selectLoadingFlagsFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state.loading)\n      .filter((action) => actionTypes.includes(action))\n      .map((action) => state.loading[action]);\n  });\n}\n\nfunction selectLoadingFlagsReducedFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state)\n      .filter((action) => actionTypes.includes(action))\n      .some((action) => state[action]);\n  });\n}\n\nexport {\n  selectLoadingFlag,\n  selectLoadingFlagsFactory,\n  selectLoadingFlagsReducedFactory,\n};\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchComments = createAsyncThunk('movie/comments/fetch', async function (\n  { limit, slug, sort },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/movies/${slug}/comments/${sort}?page=1&limit=${limit}`,\n    );\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst fetchMovie = createAsyncThunk('movie/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const statsResponse = await axios.get(`/trakt/movies/${slug}/stats`);\n    const { comments: limit } = statsResponse.data;\n    const [\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/movies/${slug}`),\n      axios.get(`/trakt/movies/${slug}/comments/highest?limit=${limit}`),\n      axios.get(`/trakt/movies/${slug}/people`),\n      axios.get(`/trakt/movies/${slug}/ratings`),\n      axios.get(`/trakt/movies/${slug}/related`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.comments = action.payload;\n    },\n    [fetchMovie.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'movie',\n  reducers: {},\n});\n\nexport { fetchComments, fetchMovie };\nexport default reducer;\n","const DEFAULTS = {\n  PAGE_SIZE: 40,\n};\n\nfunction parseCookie() {\n  return document.cookie.split('; ').reduce((acc, cookie) => {\n    const [key, value] = cookie.split('=');\n    acc[key] = value;\n    return acc;\n  }, {});\n}\n\nfunction getUserSlug() {\n  return process.env.NODE_ENV === 'development'\n    ? process.env.REACT_APP_MOCKED_USER_SLUG\n    : parseCookie().userSlug;\n}\n\nfunction transformEntityToSingular(entity) {\n  switch (entity) {\n    case 'movies':\n      return 'movie';\n    case 'shows':\n      return 'show';\n    case 'people':\n      return 'person';\n    // in case of search\n    default:\n      return 'movie,show,person';\n  }\n}\n\nexport { DEFAULTS, getUserSlug, transformEntityToSingular };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  DEFAULTS,\n  getUserSlug,\n  transformEntityToSingular,\n} from '../../../../utils';\n\nconst fetchComments = createAsyncThunk(\n  'profile/comments/fetch',\n  async function (page, { rejectWithValue }) {\n    try {\n      const response = await axios.get(\n        `/trakt/users/${getUserSlug()}/comments?page=${page}&limit=${\n          DEFAULTS.PAGE_SIZE\n        }`,\n      );\n      return {\n        entities: response.data,\n        total: parseInt(response.headers['x-pagination-page-count']),\n      };\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst postComment = createAsyncThunk('profile/comments/post', async function (\n  { comment, entity, slug, spoiler = false },\n  { rejectWithValue },\n) {\n  entity = transformEntityToSingular(entity);\n  try {\n    const response = await axios.post('/trakt/comments', {\n      comment,\n      [entity]: { ids: { slug } },\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeComment = createAsyncThunk(\n  'profile/comments/remove',\n  async function (id, { rejectWithValue }) {\n    try {\n      await axios.delete(`/trakt/comments/${id}`);\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst updateComment = createAsyncThunk(\n  'profile/comments/update',\n  async function ({ comment, id, spoiler }, { rejectWithValue }) {\n    try {\n      const response = await axios.put(`/trakt/comments/${id}`, {\n        comment,\n        spoiler,\n      });\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex((comment) => comment.id === id);\n      state.entities.splice(index, 1);\n    },\n    [fetchComments.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n    [postComment.fulfilled](state, action) {\n      state.entities.unshift(action.payload);\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      state.entities[index] = action.payload;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'profile/comments',\n  reducers: {},\n});\n\nexport { fetchComments, postComment, removeComment, updateComment };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nfunction Post({ onSubmit }) {\n  const [text, setText] = useState('');\n  const [spoiler, setSpoiler] = useState(false);\n\n  function handleTextChange({ target: { value } }) {\n    setText(value);\n  }\n\n  function handleSpoilerChange({ target: { checked } }) {\n    setSpoiler(checked);\n  }\n\n  function reset() {\n    setText('');\n    setSpoiler(false);\n  }\n\n  function handleSubmit() {\n    onSubmit({ comment: text, done: reset, spoiler });\n  }\n\n  return (\n    <>\n      <h3>Post a new comment</h3>\n      <label htmlFor='comment'>Type your comment</label>\n      <br />\n      <textarea id='comment' onChange={handleTextChange} value={text} />\n      <br />\n      <input\n        checked={spoiler}\n        id='spoiler'\n        onChange={handleSpoilerChange}\n        type='checkbox'\n      />\n      <label htmlFor='spoiler'>Is this spoiler?</label>\n      <br />\n      <button onClick={handleSubmit} type='button'>\n        Post comment\n      </button>\n    </>\n  );\n}\n\nPost.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Post;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemRoot: {\n    '&:not(:last-child)': {\n      marginBottom: 8,\n    },\n  },\n});\n","import {\n  Chip as MuiChip,\n  Grid as MuiGrid,\n  IconButton as MuiIconButton,\n  LinearProgress as MuiLinearProgress,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Paper as MuiPaper,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport { Delete as DeleteIcon, Edit as EditIcon } from '@material-ui/icons';\nimport emoji from 'emoji-toolkit';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport {\n  removeComment,\n  updateComment,\n} from '../../../redux/modules/profile/comments/comments.slice';\nimport { getUserSlug } from '../../../utils';\nimport useStyles from './Single.styles';\n\nfunction Single({\n  comment: _comment,\n  createdAt,\n  id,\n  review,\n  spoiler: _spoiler,\n  username,\n  userRating,\n  userSlug,\n}) {\n  const selector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selector(state, ['profile/comments/remove', 'profile/comments/update']),\n  );\n  const [state, setState] = useState(null);\n  const [comment, setComment] = useState(_comment);\n  const [spoiler, setSpoiler] = useState(_spoiler);\n  const canEdit = getUserSlug() === userSlug;\n  const [isEditing, isRemoving, isRemoved] = [\n    state === 'editing',\n    state === 'removing',\n    state === 'removed',\n  ];\n\n  function handleCommentChange({ target: { value } }) {\n    setComment(value);\n  }\n\n  function handleSpoilerChange({ target: { checked } }) {\n    setSpoiler(checked);\n  }\n\n  function toggleEditMode() {\n    if (isEditing) {\n      setState('default');\n      setComment(_comment);\n      setSpoiler(_spoiler);\n      return;\n    }\n    setState('editing');\n  }\n\n  //@TODO: unwrap promise and add .catch() as removing can fail\n  function handleRemove() {\n    setState('removing');\n    dispatch(removeComment(id)).then(() => setState('removed'));\n  }\n\n  //@TODO: unwrap promise and add .catch() as editing can fail\n  function handleEdit() {\n    setState('default');\n    dispatch(\n      updateComment({\n        comment,\n        id,\n        spoiler,\n      }),\n    ).then(() => setState('default'));\n  }\n\n  //@TODO: extract this as component for Post/Single as reusable editor.\n  const editor = (\n    <>\n      <label htmlFor='comment'>Edit your comment</label>\n      <br />\n      <textarea onChange={handleCommentChange} value={comment} />\n      <br />\n      <input\n        checked={spoiler}\n        id='spoiler'\n        onChange={handleSpoilerChange}\n        type='checkbox'\n      />\n      <label htmlFor='spoiler'>Is this spoiler?</label>\n      <br />\n      <button onClick={handleEdit} type='button'>\n        Edit comment\n      </button>\n    </>\n  );\n\n  if (isRemoved) {\n    return null;\n  }\n\n  return (\n    <>\n      {fetching && isEditing && <MuiLinearProgress />}\n      {fetching && isRemoving && <MuiLinearProgress />}\n      <MuiListItem\n        classes={{\n          root: classes.listItemRoot,\n        }}\n        component={MuiPaper}\n      >\n        <MuiListItemText\n          primary={\n            <MuiGrid container justify='space-between'>\n              <MuiGrid item>\n                <MuiTypography display='inline' variant='body2'>\n                  {review ? 'Review' : 'Shout'} by {username}\n                </MuiTypography>\n                <MuiTypography display='inline' variant='caption'>\n                  {` | ${new Date(createdAt).toLocaleString('da-Dk')} \n                ${userRating ? `| rated ${userRating} stars` : ''}`}\n                  {spoiler && (\n                    <>\n                      {' | '} <MuiChip label='Spoiler' size='small' />\n                    </>\n                  )}\n                </MuiTypography>\n              </MuiGrid>\n              {canEdit && (\n                <MuiGrid item>\n                  <MuiIconButton onClick={toggleEditMode} size='small'>\n                    <EditIcon fontSize='small' />\n                  </MuiIconButton>\n                  <MuiIconButton onClick={handleRemove} size='small'>\n                    <DeleteIcon fontSize='small' />\n                  </MuiIconButton>\n                </MuiGrid>\n              )}\n            </MuiGrid>\n          }\n          secondary={\n            isEditing ? (\n              editor\n            ) : (\n              <ReactMarkdown allowDangerousHtml>\n                {emoji.shortnameToImage(comment)}\n              </ReactMarkdown>\n            )\n          }\n          secondaryTypographyProps={{\n            component: 'div',\n          }}\n        />\n      </MuiListItem>\n    </>\n  );\n}\n\nSingle.propTypes = {\n  comment: PropTypes.string.isRequired,\n  createdAt: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  review: PropTypes.bool.isRequired,\n  spoiler: PropTypes.bool.isRequired,\n  username: PropTypes.string.isRequired,\n  userRating: PropTypes.number,\n  userSlug: PropTypes.string.isRequired,\n};\n\nexport default Single;\n","import {\n  List as MuiList,\n  MenuItem as MuiMenuItem,\n  TextField as MuiTextField,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport { fetchComments } from '../../redux/modules/movie/movie.slice';\nimport { postComment } from '../../redux/modules/profile/comments/comments.slice';\nimport Post from './Post/Post.component';\nimport Single from './Single/Single.component';\n\nfunction renderComments(items) {\n  function render(item) {\n    const [\n      comment,\n      createdAt,\n      id,\n      review,\n      spoiler,\n      username,\n      userRating,\n      userSlug,\n    ] = [\n      item.comment,\n      item.created_at,\n      item.id,\n      item.review,\n      item.spoiler,\n      item.user.username,\n      item.user_rating,\n      item.user.ids.slug,\n    ];\n    return (\n      <Single\n        comment={comment}\n        createdAt={createdAt}\n        id={id}\n        key={id}\n        review={review}\n        spoiler={spoiler}\n        username={username}\n        userRating={userRating}\n        userSlug={userSlug}\n      />\n    );\n  }\n  return items.map(render);\n}\n\nfunction Comments({ entity, items: _items, slug, totalCount }) {\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'movie/comments/fetch'),\n  );\n  const [isExtendedView, setIsExtendedView] = useState(false);\n  const [sort, setSort] = useState('highest');\n  const items = isExtendedView ? _items : _items.slice(0, 10);\n\n  function handleViewChange() {\n    setIsExtendedView(!isExtendedView);\n  }\n\n  function handleSortChange({ target: { value } }) {\n    setSort(value);\n    dispatch(\n      fetchComments({\n        limit: totalCount,\n        slug,\n        sort: value,\n      }),\n    );\n  }\n\n  function handlePostSubmit({ comment, done, spoiler }) {\n    dispatch(\n      postComment({\n        comment,\n        entity,\n        slug,\n        spoiler,\n      }),\n    ).then(() => {\n      done();\n      dispatch(\n        fetchComments({\n          limit: totalCount,\n          slug,\n          sort,\n        }),\n      );\n    });\n  }\n\n  return (\n    <div>\n      {fetching && <div>Loading...</div>}\n      <button onClick={handleViewChange} type='button'>\n        Switch to {isExtendedView ? 'brief' : 'extended'} view\n      </button>\n      {isExtendedView && <Post onSubmit={handlePostSubmit} />}\n      <h3>\n        Comments (showing {items.length} of {totalCount})\n      </h3>\n      <MuiTextField\n        fullWidth\n        label='Sort comments by'\n        onChange={handleSortChange}\n        select\n        size='small'\n        value={sort}\n        variant='outlined'\n      >\n        <MuiMenuItem value='newest'>Newest</MuiMenuItem>\n        <MuiMenuItem value='highest'>Highest</MuiMenuItem>\n        <MuiMenuItem value='likes'>Likes</MuiMenuItem>\n      </MuiTextField>\n      <MuiList>{renderComments(items)}</MuiList>\n    </div>\n  );\n}\n\nComments.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'shows']).isRequired,\n  items: PropTypes.array.isRequired,\n  slug: PropTypes.string.isRequired,\n  totalCount: PropTypes.number.isRequired,\n};\n\nexport default Comments;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchLists = createAsyncThunk('profile/lists/fetch', async function (\n  type,\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(`/trakt/users/${getUserSlug()}/lists`);\n    const listItems = await Promise.all(\n      response.data.map((list) =>\n        axios.get(`/trakt/users/${getUserSlug()}/lists/${list.ids.slug}/items`),\n      ),\n    );\n    return response.data.map((list, index) => ({\n      ...list,\n      items: listItems[index].data,\n    }));\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addList = createAsyncThunk('profile/lists/add', async function (\n  list,\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.post(\n      `/trakt/users/${getUserSlug()}/lists`,\n      list,\n    );\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeList = createAsyncThunk('profile/lists/remove', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/users/${getUserSlug()}/lists/${slug}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [addList.fulfilled](state, action) {\n      state.push(action.payload);\n    },\n    [fetchLists.fulfilled](state, action) {\n      return action.payload;\n    },\n    [removeList.fulfilled](state, action) {\n      const { arg: slug } = action.meta;\n      const index = state.findIndex((list) => list.ids.slug === slug);\n      state.splice(index, 1);\n    },\n  },\n  initialState: [],\n  name: 'profile/lists',\n  reducers: {},\n});\n\nexport { addList, fetchLists, removeList };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\nimport { fetchLists } from '../lists/lists.slice';\n\nconst fetchList = createAsyncThunk('profile/list/fetch', async function (\n  id,\n  { rejectWithValue },\n) {\n  try {\n    const [listResponse, itemsResponse] = await Promise.all([\n      axios.get(`/trakt/users/${getUserSlug()}/lists/${id}`),\n      axios.get(`/trakt/users/${getUserSlug()}/lists/${id}/items`),\n    ]);\n    return {\n      ...listResponse.data,\n      items: itemsResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeFromList = createAsyncThunk('profile/list/remove', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(\n      `/trakt/users/${getUserSlug()}/lists/${listSlug}/items/remove`,\n      {\n        [entity]: [{ ids: { slug } }],\n      },\n    );\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addToList = createAsyncThunk('profile/list/add', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(`/trakt/users/${getUserSlug()}/lists/${listSlug}/items`, {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction addToListAndRefetch(args) {\n  return async function (dispatch) {\n    await dispatch(addToList(args));\n    await dispatch(fetchLists());\n  };\n}\n\nfunction removeFromListAndRefetch(args) {\n  return async function (dispatch) {\n    await dispatch(removeFromList(args));\n    await dispatch(fetchLists());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchList.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    items: [],\n  },\n  name: 'list',\n  reducers: {},\n});\n\nexport { addToListAndRefetch, fetchList, removeFromListAndRefetch };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.profile.lists;\n  },\n  function (lists) {\n    return lists;\n  },\n);\n\nfunction selectListsForManagerFactory() {\n  return createSelector(\n    function (state) {\n      return state.profile.lists;\n    },\n    function (_, entity) {\n      return entity;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n    function (lists, entity, slug) {\n      entity = transformEntityToSingular(entity);\n      return lists.map((list) => {\n        const listed = list.items.some(\n          (item) => item.type === entity && item[entity].ids.slug === slug,\n        );\n        return {\n          listed,\n          name: list.name,\n          slug: list.ids.slug,\n        };\n      });\n    },\n  );\n}\n\nexport { selectEntities, selectListsForManagerFactory };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemActionRoot: {\n    minWidth: 32,\n  },\n});\n","import {\n  Checkbox as MuiCheckbox,\n  LinearProgress as MuiLinearProgress,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemIcon as MuiListItemAction,\n  ListItemText as MuiListItemText,\n  ListSubheader as MuiListSubheader,\n  Popover as MuiPopover,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../redux/loading/loading.selectors';\nimport {\n  addToListAndRefetch,\n  removeFromListAndRefetch,\n} from '../../redux/modules/profile/list/list.slice';\nimport { selectListsForManagerFactory } from '../../redux/modules/profile/lists/lists.selectors';\nimport useStyles from './ListItemManager.styles';\n\nfunction ListItemManager({ children, entity, slug }) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const listsSelector = useMemo(selectListsForManagerFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const loading = useSelector((state) =>\n    loadingSelector(state, ['profile/list/add', 'profile/list/remove']),\n  );\n  const lists = useSelector((state) => listsSelector(state, entity, slug));\n  const [anchorEl, setAnchorEl] = useState(null);\n  const listedOnCount = useMemo(\n    () => lists.filter(({ listed }) => listed).length,\n    [lists],\n  );\n  const open = Boolean(anchorEl);\n  const [mirror, setMirror] = useState({});\n\n  function handleOpen(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  function handleClick(entity, listed, listSlug) {\n    return function () {\n      let fn = addToListAndRefetch;\n      let value = true;\n      if (listed) {\n        fn = removeFromListAndRefetch;\n        value = false;\n      }\n      dispatch(fn({ entity, listSlug, slug }));\n      setMirror({ ...mirror, [listSlug]: value });\n    };\n  }\n\n  return (\n    <>\n      {children(handleOpen, listedOnCount)}\n      <MuiPopover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'center',\n          vertical: 'bottom',\n        }}\n        onClose={handleClose}\n        open={open}\n        transformOrigin={{\n          horizontal: 'center',\n          vertical: 'top',\n        }}\n      >\n        {loading && <MuiLinearProgress />}\n        <MuiList\n          dense\n          subheader={\n            <MuiListSubheader>\n              Listed on {listedOnCount} of {lists.length} lists\n            </MuiListSubheader>\n          }\n        >\n          {lists.map(({ listed, name, slug }) => (\n            <MuiListItem\n              button\n              disabled={loading}\n              key={slug}\n              onClick={handleClick(entity, listed, slug)}\n            >\n              <MuiListItemAction\n                classes={{\n                  root: classes.listItemActionRoot,\n                }}\n              >\n                <MuiCheckbox\n                  checked={slug in mirror ? mirror[slug] : listed}\n                  disableRipple\n                  edge='start'\n                  size='small'\n                />\n              </MuiListItemAction>\n              <MuiListItemText>{name}</MuiListItemText>\n            </MuiListItem>\n          ))}\n        </MuiList>\n      </MuiPopover>\n    </>\n  );\n}\n\nListItemManager.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  slug: PropTypes.string.isRequired,\n};\n\nexport default ListItemManager;\n","import PropTypes from 'prop-types';\n\nimport { transformEntityToSingular } from '../../utils';\n\nfunction Poster({ children, entity, season, size, tmdbId, type }) {\n  entity = transformEntityToSingular(entity);\n  if (!tmdbId) {\n    return null;\n  }\n\n  let url = `/images/${entity}/${tmdbId}/${type}?`;\n  if (season) {\n    url += `season=${season}`;\n  }\n  if (size) {\n    url += `size=${size}`;\n  }\n  return children(url);\n}\n\nPoster.propTypes = {\n  children: PropTypes.func.isRequired,\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  season: PropTypes.number,\n  size: PropTypes.string,\n  tmdbId: PropTypes.number,\n  type: PropTypes.oneOf(['backdrop', 'poster', 'profile']),\n};\n\nexport default Poster;\n","import { Rating as MuiRating } from '@material-ui/lab';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nfunction Rating({ onChange, value: initialValue = 0 }) {\n  const [value, setValue] = useState(initialValue);\n\n  function handleChange(_, value) {\n    setValue(value);\n    onChange(value);\n  }\n\n  return <MuiRating max={10} name='_' onChange={handleChange} value={value} />;\n}\n\nRating.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nexport default Rating;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.movie;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.profile.ratings;\n  },\n  function (ratings) {\n    return ratings;\n  },\n);\n\nconst selectRating = createSelector(\n  [\n    function (state) {\n      return state.profile.ratings;\n    },\n    function (_, type) {\n      return type;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n  ],\n  function (ratings, type, slug) {\n    const result = ratings.find(\n      (rating) => rating.type === type && rating[type].ids.slug === slug,\n    );\n    return result ? result.rating : 0;\n  },\n);\n\nexport { selectEntities, selectRating };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchRatings = createAsyncThunk('profile/ratings/fetch', async function (\n  type,\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get('/trakt/sync/ratings');\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst postRating = createAsyncThunk('profile/ratings/rate', async function (\n  { entity, rating, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings', {\n      [entity]: [\n        {\n          ids: { slug },\n          rating,\n        },\n      ],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeRating = createAsyncThunk('profile/ratings/remove', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings/remove', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRatings.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'profile/ratings',\n  reducers: {},\n});\n\nexport { fetchRatings, postRating, removeRating };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.profile.recommendations;\n  },\n  function (recommendations) {\n    return recommendations;\n  },\n);\n\nconst selectIsRecommended = createSelector(\n  [\n    function (state) {\n      return state.profile.recommendations;\n    },\n    function (_, type) {\n      return type;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n  ],\n  function (recommendations, type, slug) {\n    const result = recommendations.find(\n      (recommendation) =>\n        recommendation.type === type && recommendation[type].ids.slug === slug,\n    );\n    return Boolean(result);\n  },\n);\n\nexport { selectEntities, selectIsRecommended };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchRecommendations = createAsyncThunk(\n  'profile/recommendations/fetch',\n  async function (type, { rejectWithValue }) {\n    try {\n      const response = await axios.get('/trakt/sync/recommendations');\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst postRecommendation = createAsyncThunk(\n  'profile/recommendation/recommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst removeRecommendation = createAsyncThunk(\n  'profile/recommendation/unrecommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction postRecommendationAndRefetch(args) {\n  return async function (dispatch) {\n    await dispatch(postRecommendation(args));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nfunction removeRecommendationAndRefetch(args) {\n  return async function (dispatch) {\n    await dispatch(removeRecommendation(args));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRecommendations.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'profile/recommendations',\n  reducers: {},\n});\n\nexport {\n  fetchRecommendations,\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n};\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.profile.watchlist;\n  },\n  function (watchlist) {\n    return watchlist;\n  },\n);\n\nconst selectIsWatchlisted = createSelector(\n  [\n    function (state) {\n      return state.profile.watchlist;\n    },\n    function (_, type) {\n      return type;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n  ],\n  function (watchlist, type, slug) {\n    const result = watchlist.find(\n      (item) => item.type === type && item[type].ids.slug === slug,\n    );\n    return Boolean(result);\n  },\n);\n\nexport { selectEntities, selectIsWatchlisted };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchWatchlist = createAsyncThunk(\n  'profile/watchlist/fetch',\n  async function (type, { rejectWithValue }) {\n    try {\n      const response = await axios.get('/trakt/sync/watchlist');\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst addToWatchlist = createAsyncThunk(\n  'profile/watchlist/add',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/watchlist', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst removeFromWatchlist = createAsyncThunk(\n  'profile/watchlist/remove',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/watchlist/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction addToWatchlistAndRefetch(args) {\n  return async function (dispatch) {\n    await dispatch(addToWatchlist(args));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nfunction removeFromWatchlistAndRefetch(args) {\n  return async function (dispatch) {\n    await dispatch(removeFromWatchlist(args));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchWatchlist.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'profile/watchlist',\n  reducers: {},\n});\n\nexport {\n  addToWatchlistAndRefetch,\n  fetchWatchlist,\n  removeFromWatchlistAndRefetch,\n};\nexport default reducer;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport Comments from '../../components/Comments/Comments.component';\nimport ListItemManager from '../../components/ListItemManager/ListItemManager.component';\nimport Poster from '../../components/Poster/Poster.component';\nimport Rating from '../../components/Rating/Rating.component';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../redux/modules/movie/movie.selectors';\nimport { fetchMovie } from '../../redux/modules/movie/movie.slice';\nimport { selectRating } from '../../redux/modules/profile/ratings/ratings.selectors';\nimport { postRating } from '../../redux/modules/profile/ratings/ratings.slice';\nimport { selectIsRecommended } from '../../redux/modules/profile/recommendations/recommendations.selectors';\nimport {\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n} from '../../redux/modules/profile/recommendations/recommendations.slice';\nimport { selectIsWatchlisted } from '../../redux/modules/profile/watchlist/watchlist.selectors';\nimport {\n  addToWatchlistAndRefetch,\n  removeFromWatchlistAndRefetch,\n} from '../../redux/modules/profile/watchlist/watchlist.slice';\n\nfunction Movie() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'movie/fetch'),\n  );\n  const movie = useSelector(selectEntity);\n  const rating = useSelector((state) => selectRating(state, 'movie', slug));\n  const isRecommended = useSelector((state) =>\n    selectIsRecommended(state, 'movie', slug),\n  );\n  const isWatchlisted = useSelector((state) =>\n    selectIsWatchlisted(state, 'movie', slug),\n  );\n\n  useEffect(() => {\n    dispatch(fetchMovie(slug));\n  }, [dispatch, slug]);\n\n  function handleRating(value) {\n    dispatch(postRating({ entity: 'movies', rating: value, slug }));\n  }\n\n  function handleRecommend() {\n    if (isRecommended) {\n      dispatch(removeRecommendationAndRefetch({ entity: 'movies', slug }));\n      return;\n    }\n    dispatch(postRecommendationAndRefetch({ entity: 'movies', slug }));\n  }\n\n  function handleWatchlist() {\n    if (isWatchlisted) {\n      dispatch(removeFromWatchlistAndRefetch({ entity: 'movies', slug }));\n      return;\n    }\n    dispatch(addToWatchlistAndRefetch({ entity: 'movies', slug }));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <ListItemManager entity='movies' slug={slug}>\n        {(onClick, listedOnCount) => (\n          <button onClick={onClick} type='button'>\n            {listedOnCount\n              ? `Listed on ${listedOnCount} list(s)`\n              : 'Add to list'}\n          </button>\n        )}\n      </ListItemManager>\n      <button onClick={handleWatchlist} type='button'>\n        {isWatchlisted ? 'Remove from watchlist' : 'Add to watchlit'}\n      </button>\n      <button onClick={handleRecommend} type='button'>\n        {isRecommended ? 'Remove recommendation' : 'Recommend'}\n      </button>\n      <Rating onChange={handleRating} value={rating} />\n      <Poster\n        entity='movies'\n        size='w154'\n        tmdbId={movie.summary?.ids.tmdb}\n        type='poster'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <Comments\n        entity='movies'\n        items={movie.comments}\n        slug={slug}\n        totalCount={movie.stats?.comments || 0}\n      />\n    </>\n  );\n}\n\nexport default Movie;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction Pagination({\n  disabled,\n  hasNextPage,\n  hasPreviousPage,\n  onFirstPage,\n  onLastPage,\n  onNextPage,\n  onPreviousPage,\n}) {\n  return (\n    <div>\n      <button disabled={disabled} onClick={onFirstPage} type='button'>\n        First page\n      </button>\n      <button\n        disabled={disabled || !hasPreviousPage}\n        onClick={onPreviousPage}\n        type='button'\n      >\n        Previous page\n      </button>\n      <button\n        disabled={disabled || !hasNextPage}\n        onClick={onNextPage}\n        type='button'\n      >\n        Next page\n      </button>\n      <button disabled={disabled} onClick={onLastPage} type='button'>\n        Last page\n      </button>\n    </div>\n  );\n}\n\nPagination.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  hasNextPage: PropTypes.bool.isRequired,\n  hasPreviousPage: PropTypes.bool.isRequired,\n  onFirstPage: PropTypes.func.isRequired,\n  onLastPage: PropTypes.func.isRequired,\n  onNextPage: PropTypes.func.isRequired,\n  onPreviousPage: PropTypes.func.isRequired,\n};\n\nexport default Pagination;\n","import { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nfunction usePagination(pagesTotalSelector) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { page = '1', ...otherSearchProps } = useMemo(\n    () => Object.fromEntries(searchParams),\n    [searchParams],\n  );\n  const pagesTotal = useSelector(pagesTotalSelector);\n\n  function toFirstPage() {\n    setSearchParams({\n      page: 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toLastPage() {\n    setSearchParams({\n      page: pagesTotal,\n      ...otherSearchProps,\n    });\n  }\n\n  function toNextPage() {\n    setSearchParams({\n      page: parseInt(page) + 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toPreviousPage() {\n    setSearchParams({\n      page: parseInt(page) - 1,\n      ...otherSearchProps,\n    });\n  }\n\n  return {\n    hasNextPage: parseInt(page) < pagesTotal,\n    hasPreviousPage: parseInt(page) > 1,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  };\n}\n\nexport default usePagination;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.movies.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.movies.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchMovies = createAsyncThunk('movies/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/movies/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ movie: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchMovies.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'movies',\n  reducers: {},\n});\n\nexport { fetchMovies };\nexport default reducer;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  footer: {\n    bottom: 0,\n    padding: 8,\n    position: 'absolute',\n  },\n  image: {\n    height: '100%',\n    objectFit: 'cover',\n    width: '100%',\n  },\n  root: {\n    borderBottom: `1px solid ${theme.palette.divider}`,\n    borderRight: `1px solid ${theme.palette.divider}`,\n    position: 'relative',\n  },\n}));\n","import {\n  Chip as MuiChip,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Poster from '../../components/Poster/Poster.component';\nimport useStyles from './Tile.styles';\n\nfunction Tile({ releaseYear, title, tmdbId, watchers }) {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Poster entity='movies' size='w500' tmdbId={tmdbId} type='poster'>\n        {(url) => <img alt='poster' className={classes.image} src={url} />}\n      </Poster>\n      <div className={classes.footer}>\n        <MuiChip\n          color='secondary'\n          label={\n            <MuiTypography variant='caption'>\n              {watchers} people watching\n            </MuiTypography>\n          }\n          size='small'\n        />\n        <div>\n          <MuiTypography color='textPrimary' display='inline' variant='body1'>\n            {title}{' '}\n          </MuiTypography>\n          <MuiTypography\n            color='textSecondary'\n            display='inline'\n            variant='caption'\n          >\n            {releaseYear}\n          </MuiTypography>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nTile.propTypes = {\n  releaseYear: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  tmdbId: PropTypes.number.isRequired,\n  watchers: PropTypes.number.isRequired,\n};\n\nexport default Tile;\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Tile from '../../components/Tile/Tile.component';\n\nfunction renderTrending(movies) {\n  return movies.map(({ movie, watchers }) => (\n    <MuiGrid\n      component={Link}\n      item\n      key={movie.ids.trakt}\n      md={4}\n      sm={6}\n      to={`/app/movies/${movie.ids.slug}`}\n      xl={3}\n      xs={12}\n    >\n      <Tile\n        releaseYear={movie.year}\n        title={movie.title}\n        tmdbId={movie.ids.tmdb}\n        watchers={watchers}\n      />\n    </MuiGrid>\n  ));\n}\n\nfunction renderTiles({ category, movies }) {\n  switch (category) {\n    case 'trending':\n      return renderTrending(movies);\n    case 'popular':\n      return null;\n    case 'recommended':\n      return null;\n    case 'watched':\n      return null;\n    case 'collected':\n      return null;\n    case 'anticipated':\n      return null;\n    default:\n      return null;\n  }\n}\n\nexport { renderTiles };\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/movies/movies.selectors';\nimport { fetchMovies } from '../../redux/modules/movies/movies.slice';\nimport { renderTiles } from './Movies.utils';\n\nfunction Movies({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'movies/fetch'),\n  );\n  const movies = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchMovies({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <MuiGrid container>{renderTiles({ category, movies })}</MuiGrid>\n    </>\n  );\n}\n\nMovies.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'collected',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Movies;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.person;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchPerson = createAsyncThunk('person/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [summaryResponse, moviesResponse, showsResponse] = await Promise.all([\n      axios.get(`/trakt/people/${slug}?extended=full`),\n      axios.get(`/trakt/people/${slug}/movies`),\n      axios.get(`/trakt/people/${slug}/shows`),\n    ]);\n    return {\n      movies: moviesResponse.data,\n      shows: showsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchPerson.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    movies: [],\n    shows: [],\n    summary: null,\n  },\n  name: 'person',\n  reducers: {},\n});\n\nexport { fetchPerson };\nexport default reducer;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport Poster from '../../components/Poster/Poster.component';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../redux/modules/person/person.selectors';\nimport { fetchPerson } from '../../redux/modules/person/person.slice';\n\nfunction Person() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'person/fetch'),\n  );\n  const person = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchPerson(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Poster\n        entity='people'\n        size='w185'\n        tmdbId={person.summary?.ids.tmdb}\n        type='profile'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <pre>{JSON.stringify(person, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Person;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.profile.comments.entities;\n  },\n  function (comments) {\n    return comments;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.profile.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../../components/Pagination/Pagination.component';\nimport usePagination from '../../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../../redux/modules/profile/comments/comments.selectors';\nimport { fetchComments } from '../../../redux/modules/profile/comments/comments.slice';\n\nfunction Comments() {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'profile/comments/fetch'),\n  );\n  const comments = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchComments(page));\n  }, [dispatch, page]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <pre>{JSON.stringify(comments, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Comments;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.profile.list;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../../redux/modules/profile/list/list.selectors';\nimport { fetchList } from '../../../redux/modules/profile/list/list.slice';\n\nfunction List() {\n  const dispatch = useDispatch();\n  const { id } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'list/fetch'),\n  );\n  const list = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchList(id));\n  }, [dispatch, id]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(list, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default List;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/profile/lists/lists.selectors';\nimport {\n  addList,\n  fetchLists,\n  removeList,\n} from '../../../redux/modules/profile/lists/lists.slice';\n\nfunction Lists() {\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'profile/lists/fetch'),\n  );\n  const lists = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchLists());\n  }, [dispatch]);\n\n  function handleAdd() {\n    dispatch(\n      addList({\n        allowComments: false,\n        description: 'This is my list',\n        name: 'My list',\n      }),\n    );\n  }\n\n  function handleRemove() {\n    dispatch(removeList('my-list'));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <button onClick={handleAdd} type='button'>\n        Add list\n      </button>\n      <button onClick={handleRemove} type='button'>\n        Remove list\n      </button>\n      <pre>{JSON.stringify(lists, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Lists;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/profile/ratings/ratings.selectors';\nimport { fetchRatings } from '../../../redux/modules/profile/ratings/ratings.slice';\n\nfunction Ratings() {\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'profile/ratings/fetch'),\n  );\n  const ratings = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchRatings());\n  }, [dispatch]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(ratings, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Ratings;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/profile/recommendations/recommendations.selectors';\nimport { fetchRecommendations } from '../../../redux/modules/profile/recommendations/recommendations.slice';\n\nfunction Ratings() {\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'profile/recommendations/fetch'),\n  );\n  const recommendations = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchRecommendations());\n  }, [dispatch]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(recommendations, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Ratings;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/profile/watchlist/watchlist.selectors';\nimport { fetchWatchlist } from '../../../redux/modules/profile/watchlist/watchlist.slice';\n\nfunction Watchlist() {\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'profile/watchlist/fetch'),\n  );\n  const watchlist = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchWatchlist());\n  }, [dispatch]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(watchlist, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Watchlist;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.search.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.search.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS, transformEntityToSingular } from '../../../utils';\n\nconst fetchSearchResults = createAsyncThunk('search/fetch', async function (\n  { entity, page, query },\n  { rejectWithValue },\n) {\n  try {\n    entity = transformEntityToSingular(entity);\n    const response = await axios.get(\n      `/trakt/search/${entity}?query=${query}&page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchSearchResults.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'search',\n  reducers: {},\n});\n\nexport { fetchSearchResults };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/search/search.selectors';\nimport { fetchSearchResults } from '../../redux/modules/search/search.slice';\n\nfunction Search({ entity }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { query = '' } = useMemo(() => Object.fromEntries(searchParams), [\n    searchParams,\n  ]);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'search/fetch'),\n  );\n  const searchResults = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchSearchResults({ entity, page, query }));\n  }, [dispatch, entity, page, query]);\n\n  function handleQueryChange({ target: { value } }) {\n    setSearchParams({ query: value });\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <div>\n        <label htmlFor='query'>Input your query:</label>\n        <input\n          id='query'\n          onChange={handleQueryChange}\n          type='text'\n          value={query}\n        />\n      </div>\n      <pre>{JSON.stringify(searchResults, null, 2)}</pre>\n    </>\n  );\n}\n\nSearch.propTypes = {\n  entity: PropTypes.oneOf(['all', 'movies', 'shows', 'people']),\n};\n\nexport default Search;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.show;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchComments = createAsyncThunk('show/comments/fetch', async function (\n  { limit, slug, sort },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/shows/${slug}/comments/${sort}?page=1&limit=${limit}`,\n    );\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst fetchShow = createAsyncThunk('show/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n      statsResponse,\n      seasonsResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/shows/${slug}`),\n      axios.get(`/trakt/shows/${slug}/comments/highest`),\n      axios.get(`/trakt/shows/${slug}/people`),\n      axios.get(`/trakt/shows/${slug}/ratings`),\n      axios.get(`/trakt/shows/${slug}/related`),\n      axios.get(`/trakt/shows/${slug}/stats`),\n      axios.get(`/trakt/shows/${slug}/seasons?extended=episodes`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      seasons: seasonsResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.comments = action.payload;\n    },\n    [fetchShow.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    seasons: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'show',\n  reducers: {},\n});\n\nexport { fetchComments, fetchShow };\nexport default reducer;\n","import React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport Poster from '../../components/Poster/Poster.component';\nimport Rating from '../../components/Rating/Rating.component';\nimport { selectLoadingFlagsReducedFactory } from '../../redux/loading/loading.selectors';\nimport { selectRating } from '../../redux/modules/profile/ratings/ratings.selectors';\nimport { postRating } from '../../redux/modules/profile/ratings/ratings.slice';\nimport { selectEntity } from '../../redux/modules/show/show.selectors';\nimport { fetchComments, fetchShow } from '../../redux/modules/show/show.slice';\n\nfunction Show() {\n  const selectLoadingFlagReduced = useMemo(\n    selectLoadingFlagsReducedFactory,\n    [],\n  );\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlagReduced(state, ['show/fetch', 'show/comments/fetch']),\n  );\n  const show = useSelector(selectEntity);\n  const rating = useSelector((state) => selectRating(state, 'show', slug));\n\n  useEffect(() => {\n    dispatch(fetchShow(slug));\n  }, [dispatch, slug]);\n\n  function handleFetchAllComments() {\n    dispatch(\n      fetchComments({ limit: show.stats.comments, slug, sort: 'newest' }),\n    );\n  }\n\n  function handleRating(value) {\n    dispatch(postRating({ entity: 'shows', rating: value, slug }));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <button onClick={handleFetchAllComments} type='button'>\n        Fetch all comments\n      </button>\n      <Rating onChange={handleRating} value={rating} />\n      <Poster\n        entity='shows'\n        size='w154'\n        tmdbId={show.summary?.ids.tmdb}\n        type='poster'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <pre>{JSON.stringify(show, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Show;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.shows.entities;\n  },\n  function (shows) {\n    return shows;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.shows.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchShows = createAsyncThunk('shows/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/shows/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ show: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShows.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'shows',\n  reducers: {},\n});\n\nexport { fetchShows };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/shows/shows.selectors';\nimport { fetchShows } from '../../redux/modules/shows/shows.slice';\n\nfunction Shows({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'shows/fetch'),\n  );\n  const shows = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchShows({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <pre>{JSON.stringify(shows, null, 2)}</pre>\n    </>\n  );\n}\n\nShows.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'collected',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Shows;\n","import { createSlice } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  const patterns = ['/pending', '/fulfilled', '/rejected'];\n  return patterns.some((pattern) => action.type.endsWith(pattern));\n}\n\nconst { reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      const parts = action.type.split('/');\n      const asyncState = parts.pop();\n      state[`${parts.join('/')}`] = asyncState === 'pending';\n    });\n  },\n  initialState: {},\n  name: 'loading',\n  reducers: {},\n});\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport comments from './comments/comments.slice';\nimport list from './list/list.slice';\nimport lists from './lists/lists.slice';\nimport ratings from './ratings/ratings.slice';\nimport recommendations from './recommendations/recommendations.slice';\nimport watchlist from './watchlist/watchlist.slice';\n\nexport default combineReducers({\n  comments,\n  list,\n  lists,\n  ratings,\n  recommendations,\n  watchlist,\n});\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport loading from './loading/loading.slice';\nimport movie from './modules/movie/movie.slice';\nimport movies from './modules/movies/movies.slice';\nimport person from './modules/person/person.slice';\nimport profile from './modules/profile';\nimport search from './modules/search/search.slice';\nimport show from './modules/show/show.slice';\nimport shows from './modules/shows/shows.slice';\nimport notifications from './notifications/notifications.slice';\n\nconst store = configureStore({\n  reducer: {\n    loading,\n    movie,\n    movies,\n    notifications,\n    person,\n    profile,\n    search,\n    show,\n    shows,\n  },\n});\n\nexport default store;\n","import { CssBaseline as MuiCssBaseline } from '@material-ui/core';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Navigate,\n  Route,\n  Routes,\n} from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout.component';\nimport NotFound from './components/NotFound/NotFound.component';\nimport Movie from './modules/Movie/Movie.component';\nimport Movies from './modules/Movies/Movies.component';\nimport Person from './modules/Person/Person.component';\nimport Comments from './modules/Profile/Comments/Comments.component';\nimport List from './modules/Profile/List/List.component';\nimport Lists from './modules/Profile/Lists/Lists.component';\nimport Ratings from './modules/Profile/Ratings/Ratings.component';\nimport Recommendations from './modules/Profile/Recommendations/Recommendations.component';\nimport Watchlist from './modules/Profile/Watchlist/Watchlist.component';\nimport Search from './modules/Search/Search.component';\nimport Show from './modules/Show/Show.component';\nimport Shows from './modules/Shows/Shows.component';\nimport store from './redux/store';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/components/Layouts/Layouts/Layouts.utils.js in variable NAV_PATHS\nfunction App() {\n  return (\n    <Routes basename='/app'>\n      <Route element={<Navigate replace to='movies/trending' />} path='/' />\n      <Route element={<Layout />} path='/'>\n        <Route path='movies'>\n          <Route element={<Navigate replace to='trending' />} path='/' />\n          <Route element={<Movies category='trending' />} path='trending' />\n          <Route element={<Movies category='popular' />} path='popular' />\n          <Route\n            element={<Movies category='recommended' />}\n            path='recommended'\n          />\n          <Route element={<Movies category='watched' />} path='watched' />\n          <Route\n            element={<Movies category='anticipated' />}\n            path='anticipated'\n          />\n          <Route element={<Movie />} path=':slug' />\n        </Route>\n        <Route path='shows'>\n          <Route element={<Navigate replace to='trending' />} path='/' />\n          <Route element={<Shows category='trending' />} path='trending' />\n          <Route element={<Shows category='popular' />} path='popular' />\n          <Route\n            element={<Shows category='recommended' />}\n            path='recommended'\n          />\n          <Route element={<Shows category='watched' />} path='watched' />\n          <Route\n            element={<Shows category='anticipated' />}\n            path='anticipated'\n          />\n          <Route element={<Show />} path=':slug' />\n        </Route>\n        <Route element={<Person />} path='people/:slug' />\n        <Route path='search'>\n          <Route element={<Navigate replace to='all' />} path='/' />\n          <Route element={<Search entity='all' />} path='all' />\n          <Route element={<Search entity='movies' />} path='movies' />\n          <Route element={<Search entity='shows' />} path='shows' />\n          <Route element={<Search entity='people' />} path='people' />\n        </Route>\n        <Route path='profile'>\n          <Route element={<Navigate replace to='ratings' />} path='/' />\n          <Route element={<Ratings />} path='ratings' />\n          <Route element={<Recommendations />} path='recommendations' />\n          <Route element={<Watchlist />} path='watchlist' />\n          <Route path='lists'>\n            <Route element={<Lists />} path='/' />\n            <Route element={<List />} path=':id' />\n          </Route>\n          <Route element={<Comments />} path='comments' />\n        </Route>\n      </Route>\n      <Route element={<NotFound />} path='*' />\n    </Routes>\n  );\n}\n\nfunction Providers() {\n  return (\n    <ReduxProvider store={store}>\n      <Router>\n        <MuiCssBaseline />\n        <App />\n      </Router>\n    </ReduxProvider>\n  );\n}\n\nexport default Providers;\n","import './styles.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App.component';\nimport { fetchLists } from './redux/modules/profile/lists/lists.slice';\nimport { fetchRatings } from './redux/modules/profile/ratings/ratings.slice';\nimport { fetchRecommendations } from './redux/modules/profile/recommendations/recommendations.slice';\nimport { fetchWatchlist } from './redux/modules/profile/watchlist/watchlist.slice';\nimport store from './redux/store';\n\nconst { dispatch } = store;\n\n//@TODO: Implement parallel initial calls\n//@TODO: Add default loading state in public/index.html\nasync function init() {\n  await dispatch(fetchLists());\n  await dispatch(fetchRatings());\n  await dispatch(fetchRecommendations());\n  await dispatch(fetchWatchlist());\n}\n\ninit().then(function () {\n  ReactDOM.render(<App />, document.getElementById('root'));\n});\n"],"sourceRoot":""}