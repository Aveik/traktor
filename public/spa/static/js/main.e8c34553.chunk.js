(this["webpackJsonpmovie-tinder-frontend"]=this["webpackJsonpmovie-tinder-frontend"]||[]).push([[0],{136:function(t,e,n){},235:function(t,e,n){"use strict";n.r(e);var r=n(5),c=n.n(r),a=n(13),i=n(1),s=(n(136),n(0)),o=n.n(s),u=n(19),l=n.n(u),j=n(287),p=n(8),b=n(14),d=n(25),f=n(277),h=n(292),m=n(289),O=n(78),v=n(279),g=n(276),x=n(17),y=n(34),w=Object(y.a)((function(t){return t.notifications}),(function(t){return t})),k=n(7);function P(t){return t.type.endsWith("/rejected")}var S=Object(k.c)({extraReducers:function(t){t.addMatcher(P,(function(t,e){t[e.meta.requestId]=e.payload}))},initialState:{},name:"notifications",reducers:{createNotification:{prepare:function(t){return{payload:{id:Object(k.d)(),message:t}}},reducer:function(t,e){t[e.payload.id]=e.payload.message}},removeNotification:function(t,e){delete t[e.payload]}}}),N=S.actions,C=S.reducer,F=(N.createNotification,N.removeNotification),I=C;var W=function(t){var e=t.id,n=t.message,r=Object(p.b)();return Object(i.jsx)("div",{onClick:function(){r(F(e))},children:n})};var R=function(){var t=Object(p.c)(w);return Object.entries(t).map((function(t){var e=Object(x.a)(t,2),n=e[0],r=e[1];return Object(i.jsx)(W,{id:n,message:r},n)}))},L=n(269),V=Object(L.a)({drawerPaper:{width:256}}),E=n(20),z=n(237),M=n(272),J=n(77),T=n(275),q=n(273),A=n(274),B=Object(L.a)((function(t){return{nestedListItemGutters:{paddingLeft:t.spacing(4)}}}));var D=function(t){var e=t.children,n=t.listItemTextProps,r=Object(J.a)(t,["children","listItemTextProps"]),c=B(),a=Object(s.useState)(!1),u=Object(x.a)(a,2),l=u[0],j=u[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(z.a,Object(E.a)(Object(E.a)({},r),{},{onClick:function(t){t.preventDefault(),j(!l)},children:[Object(i.jsx)(M.a,Object(E.a)({},n)),l?Object(i.jsx)(q.a,{}):Object(i.jsx)(A.a,{})]})),Object(i.jsx)(T.a,{in:l,children:Object(i.jsx)(g.a,{disablePadding:!0,children:o.a.Children.map(e,(function(t){return o.a.cloneElement(t,{classes:{gutters:c.nestedListItemGutters}})}))})})]})},_=[{nested:[{path:"movies/trending",title:"Trending"},{path:"movies/popular",title:"Popular"},{path:"movies/recommended",title:"Recommended"},{path:"movies/watched",title:"Watched"},{path:"movies/collected",title:"Collected"},{path:"movies/anticipated",title:"Anticipated"}],title:"Movies"},{nested:[{path:"shows/trending",title:"Trending"},{path:"shows/popular",title:"Popular"},{path:"shows/recommended",title:"Recommended"},{path:"shows/watched",title:"Watched"},{path:"shows/collected",title:"Collected"},{path:"shows/anticipated",title:"Anticipated"}],title:"Shows"},{nested:[{path:"profile/ratings",title:"Ratings"},{path:"profile/recommendations",title:"Recommendations"},{path:"profile/watchlist",title:"Watchlist"},{path:"profile/lists",title:"Lists"},{path:"profile/comments",title:"Comments"}],title:"Profile"},{nested:[{path:"search/all",title:"All"},{path:"search/movies",title:"Movies"},{path:"search/shows",title:"Shows"},{path:"search/people",title:"People"}],title:"Search"}];var G=function(){var t=V();return Object(i.jsxs)(f.a,{children:[Object(i.jsxs)(h.a,{anchor:"left",classes:{paper:t.drawerPaper},color:"",variant:"permanent",children:[Object(i.jsxs)(m.a,{px:2,py:1,children:[Object(i.jsx)(O.a,{variant:"h6",children:"Traktor"}),Object(i.jsx)(O.a,{variant:"caption",children:"v0.1"})]}),Object(i.jsx)(v.a,{}),Object(i.jsx)(g.a,{disablePadding:!0,children:_.map((function(t){var e=t.nested,n=t.path,r=t.title,c={activeClassName:"Mui-selected",button:!0,component:d.c,key:r,to:n};if(!e&&n)return Object(i.jsx)(z.a,Object(E.a)(Object(E.a)({},c),{},{children:Object(i.jsx)(M.a,{primary:r})}));var a=e.map((function(t){var e=t.path,n=t.title;return Object(s.createElement)(z.a,Object(E.a)(Object(E.a)({},c),{},{key:n,to:e}),Object(i.jsx)(M.a,{primary:n}))})),o={button:!0,key:r,listItemTextProps:{primary:r}};return Object(i.jsx)(D,Object(E.a)(Object(E.a)({},o),{},{children:a}))}))})]}),Object(i.jsxs)(m.a,{ml:32,children:[Object(i.jsx)(R,{}),Object(i.jsx)(b.b,{})]})]})};var H=function(){return Object(i.jsx)("h1",{children:"404 not found"})},Y=n(288),K=n(284);function Q(t){return t.loading}function U(t,e){return e}var X=Object(y.a)([Q,U],(function(t,e){return Boolean(t[e])}));function Z(){return Object(y.a)([Q,U],(function(t,e){return Object.keys(t).filter((function(t){return e.includes(t)})).some((function(e){return t[e]}))}))}var $,tt,et=n(11),nt=n(10),rt=n.n(nt),ct=Object(k.b)("movie/comments/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.limit,a=e.slug,i=e.sort,s=n.rejectWithValue,t.prev=2,t.next=5,rt.a.get("/trakt/movies/".concat(a,"/comments/").concat(i,"?page=1&limit=").concat(r));case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),at=Object(k.b)("movie/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o,u,l,j,p,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.get("/trakt/movies/".concat(e,"/stats"));case 4:return a=t.sent,i=a.data.comments,t.next=8,Promise.all([rt.a.get("/trakt/movies/".concat(e)),rt.a.get("/trakt/movies/".concat(e,"/comments/highest?limit=").concat(i)),rt.a.get("/trakt/movies/".concat(e,"/people")),rt.a.get("/trakt/movies/".concat(e,"/ratings")),rt.a.get("/trakt/movies/".concat(e,"/related"))]);case 8:return s=t.sent,o=Object(x.a)(s,5),u=o[0],l=o[1],j=o[2],p=o[3],b=o[4],t.abrupt("return",{comments:l.data,people:j.data,ratings:p.data,related:b.data,stats:a.data,summary:u.data});case 18:return t.prev=18,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 21:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,n){return t.apply(this,arguments)}}()),it=Object(k.c)({extraReducers:($={},Object(et.a)($,ct.fulfilled,(function(t,e){t.comments=e.payload})),Object(et.a)($,at.fulfilled,(function(t,e){return e.payload})),$),initialState:{comments:[],people:null,ratings:null,related:[],stats:null,summary:null},name:"movie",reducers:{}}).reducer,st=40;function ot(){return document.cookie.split("; ").reduce((function(t,e){var n=e.split("="),r=Object(x.a)(n,2),c=r[0],a=r[1];return t[c]=a,t}),{}).userSlug}function ut(t){switch(t){case"movies":return"movie";case"shows":return"show";case"people":return"person";default:return"movie,show,person"}}var lt=Object(k.b)("profile/comments/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.get("/trakt/users/".concat(ot(),"/comments?page=").concat(e,"&limit=").concat(st));case 4:return a=t.sent,t.abrupt("return",{entities:a.data,total:parseInt(a.headers["x-pagination-page-count"])});case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),jt=Object(k.b)("profile/comments/post",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o,u,l,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.comment,a=e.entity,i=e.slug,s=e.spoiler,o=void 0!==s&&s,u=n.rejectWithValue,a=ut(a),t.prev=3,t.next=6,rt.a.post("/trakt/comments",(l={comment:r},Object(et.a)(l,a,{ids:{slug:i}}),Object(et.a)(l,"spoiler",o),l));case 6:return j=t.sent,t.abrupt("return",j.data);case 10:return t.prev=10,t.t0=t.catch(3),t.abrupt("return",u(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}()),pt=Object(k.b)("profile/comments/remove",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.delete("/trakt/comments/".concat(e));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()),bt=Object(k.b)("profile/comments/update",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.comment,a=e.id,i=e.spoiler,s=n.rejectWithValue,t.prev=2,t.next=5,rt.a.put("/trakt/comments/".concat(a),{comment:r,spoiler:i});case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),dt=Object(k.c)({extraReducers:(tt={},Object(et.a)(tt,pt.fulfilled,(function(t,e){var n=e.meta.arg,r=t.entities.findIndex((function(t){return t.id===n}));t.entities.splice(r,1)})),Object(et.a)(tt,lt.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),Object(et.a)(tt,jt.fulfilled,(function(t,e){t.entities.unshift(e.payload)})),Object(et.a)(tt,bt.fulfilled,(function(t,e){var n=t.entities.findIndex((function(t){return t.id===e.payload.id}));t.entities[n]=e.payload})),tt),initialState:{entities:[],pagination:{total:0}},name:"profile/comments",reducers:{}}).reducer;var ft=function(t){var e=t.onSubmit,n=Object(s.useState)(""),r=Object(x.a)(n,2),c=r[0],a=r[1],o=Object(s.useState)(!1),u=Object(x.a)(o,2),l=u[0],j=u[1];function p(){a(""),j(!1)}return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h3",{children:"Post a new comment"}),Object(i.jsx)("label",{htmlFor:"comment",children:"Type your comment"}),Object(i.jsx)("br",{}),Object(i.jsx)("textarea",{id:"comment",onChange:function(t){var e=t.target.value;a(e)},value:c}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{checked:l,id:"spoiler",onChange:function(t){var e=t.target.checked;j(e)},type:"checkbox"}),Object(i.jsx)("label",{htmlFor:"spoiler",children:"Is this spoiler?"}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{onClick:function(){e({comment:c,done:p,spoiler:l})},type:"button",children:"Post comment"})]})},ht=n(280),mt=n(278),Ot=n(294),vt=n(281),gt=n(282),xt=n(283),yt=n(119),wt=n.n(yt),kt=n(120),Pt=n.n(kt),St=Object(L.a)({listItemRoot:{"&:not(:last-child)":{marginBottom:8}}});var Nt=function(t){var e=t.comment,n=t.createdAt,r=t.id,c=t.review,a=t.spoiler,o=t.username,u=t.userRating,l=t.userSlug,j=Object(s.useMemo)(Z,[]),b=St(),d=Object(p.b)(),h=Object(p.c)((function(t){return j(t,["profile/comments/remove","profile/comments/update"])})),m=Object(s.useState)(null),v=Object(x.a)(m,2),g=v[0],y=v[1],w=Object(s.useState)(e),k=Object(x.a)(w,2),P=k[0],S=k[1],N=Object(s.useState)(a),C=Object(x.a)(N,2),F=C[0],I=C[1],W=ot()===l,R="editing"===g,L="removing"===g,V="removed"===g,E=Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("label",{htmlFor:"comment",children:"Edit your comment"}),Object(i.jsx)("br",{}),Object(i.jsx)("textarea",{onChange:function(t){var e=t.target.value;S(e)},value:P}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{checked:F,id:"spoiler",onChange:function(t){var e=t.target.checked;I(e)},type:"checkbox"}),Object(i.jsx)("label",{htmlFor:"spoiler",children:"Is this spoiler?"}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{onClick:function(){y("default"),d(bt({comment:P,id:r,spoiler:F})).then((function(){return y("default")}))},type:"button",children:"Edit comment"})]});return V?null:Object(i.jsxs)(i.Fragment,{children:[h&&R&&Object(i.jsx)(ht.a,{}),h&&L&&Object(i.jsx)(ht.a,{}),Object(i.jsx)(z.a,{classes:{root:b.listItemRoot},component:mt.a,children:Object(i.jsx)(M.a,{primary:Object(i.jsxs)(f.a,{container:!0,justify:"space-between",children:[Object(i.jsxs)(f.a,{item:!0,children:[Object(i.jsxs)(O.a,{display:"inline",variant:"body2",children:[c?"Review":"Shout"," by ",o]}),Object(i.jsxs)(O.a,{display:"inline",variant:"caption",children:[" | ".concat(new Date(n).toLocaleString("da-Dk")," \n                ").concat(u?"| rated ".concat(u," stars"):""),F&&Object(i.jsxs)(i.Fragment,{children:[" | "," ",Object(i.jsx)(Ot.a,{label:"Spoiler",size:"small"})]})]})]}),W&&Object(i.jsxs)(f.a,{item:!0,children:[Object(i.jsx)(vt.a,{onClick:function(){if(R)return y("default"),S(e),void I(a);y("editing")},size:"small",children:Object(i.jsx)(gt.a,{fontSize:"small"})}),Object(i.jsx)(vt.a,{onClick:function(){y("removing"),d(pt(r)).then((function(){return y("removed")}))},size:"small",children:Object(i.jsx)(xt.a,{fontSize:"small"})})]})]}),secondary:R?E:Object(i.jsx)(Pt.a,{allowDangerousHtml:!0,children:wt.a.shortnameToImage(P)}),secondaryTypographyProps:{component:"div"}})})]})};function Ct(t){return t.map((function(t){var e=[t.comment,t.created_at,t.id,t.review,t.spoiler,t.user.username,t.user_rating,t.user.ids.slug],n=e[0],r=e[1],c=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7];return Object(i.jsx)(Nt,{comment:n,createdAt:r,id:c,review:a,spoiler:s,username:o,userRating:u,userSlug:l},c)}))}var Ft,It=function(t){var e=t.entity,n=t.items,r=t.slug,c=t.totalCount,a=Object(p.b)(),o=Object(p.c)((function(t){return X(t,"movie/comments/fetch")})),u=Object(s.useState)(!1),l=Object(x.a)(u,2),j=l[0],b=l[1],d=Object(s.useState)("highest"),f=Object(x.a)(d,2),h=f[0],m=f[1],O=j?n:n.slice(0,10);return Object(i.jsxs)("div",{children:[o&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsxs)("button",{onClick:function(){b(!j)},type:"button",children:["Switch to ",j?"brief":"extended"," view"]}),j&&Object(i.jsx)(ft,{onSubmit:function(t){var n=t.comment,i=t.done,s=t.spoiler;a(jt({comment:n,entity:e,slug:r,spoiler:s})).then((function(){i(),a(ct({limit:c,slug:r,sort:h}))}))}}),Object(i.jsxs)("h3",{children:["Comments (showing ",O.length," of ",c,")"]}),Object(i.jsxs)(Y.a,{fullWidth:!0,label:"Sort comments by",onChange:function(t){var e=t.target.value;m(e),a(ct({limit:c,slug:r,sort:e}))},select:!0,size:"small",value:h,variant:"outlined",children:[Object(i.jsx)(K.a,{value:"newest",children:"Newest"}),Object(i.jsx)(K.a,{value:"highest",children:"Highest"}),Object(i.jsx)(K.a,{value:"likes",children:"Likes"})]}),Object(i.jsx)(g.a,{children:Ct(O)})]})},Wt=n(295),Rt=n(285),Lt=n(286),Vt=n(291),Et=Object(k.b)("profile/lists/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.get("/trakt/users/".concat(ot(),"/lists"));case 4:return a=t.sent,t.next=7,Promise.all(a.data.map((function(t){return rt.a.get("/trakt/users/".concat(ot(),"/lists/").concat(t.ids.slug,"/items"))})));case 7:return i=t.sent,t.abrupt("return",a.data.map((function(t,e){return Object(E.a)(Object(E.a)({},t),{},{items:i[e].data})})));case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()),zt=Object(k.b)("profile/lists/add",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.post("/trakt/users/".concat(ot(),"/lists"),e);case 4:return a=t.sent,t.abrupt("return",a.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),Mt=Object(k.b)("profile/lists/remove",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.delete("/trakt/users/".concat(ot(),"/lists/").concat(e));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()),Jt=Object(k.c)({extraReducers:(Ft={},Object(et.a)(Ft,zt.fulfilled,(function(t,e){t.push(e.payload)})),Object(et.a)(Ft,Et.fulfilled,(function(t,e){return e.payload})),Object(et.a)(Ft,Mt.fulfilled,(function(t,e){var n=e.meta.arg,r=t.findIndex((function(t){return t.ids.slug===n}));t.splice(r,1)})),Ft),initialState:[],name:"profile/lists",reducers:{}}).reducer,Tt=Object(k.b)("profile/list/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([rt.a.get("/trakt/users/".concat(ot(),"/lists/").concat(e)),rt.a.get("/trakt/users/".concat(ot(),"/lists/").concat(e,"/items"))]);case 4:return a=t.sent,i=Object(x.a)(a,2),s=i[0],o=i[1],t.abrupt("return",Object(E.a)(Object(E.a)({},s.data),{},{items:o.data}));case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()),qt=Object(k.b)("profile/list/remove",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.listSlug,i=e.slug,s=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/users/".concat(ot(),"/lists/").concat(a,"/items/remove"),Object(et.a)({},r,[{ids:{slug:i}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),At=Object(k.b)("profile/list/add",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.listSlug,i=e.slug,s=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/users/".concat(ot(),"/lists/").concat(a,"/items"),Object(et.a)({},r,[{ids:{slug:i}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}());function Bt(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(At(t));case 2:return e.next=4,n(Et());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Dt(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(qt(t));case 2:return e.next=4,n(Et());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var _t=Object(k.c)({extraReducers:Object(et.a)({},Tt.fulfilled,(function(t,e){return e.payload})),initialState:{items:[]},name:"list",reducers:{}}).reducer,Gt=Object(y.a)((function(t){return t.profile.lists}),(function(t){return t}));function Ht(){return Object(y.a)((function(t){return t.profile.lists}),(function(t,e){return e}),(function(t,e,n){return n}),(function(t,e,n){return e=ut(e),t.map((function(t){return{listed:t.items.some((function(t){return t.type===e&&t[e].ids.slug===n})),name:t.name,slug:t.ids.slug}}))}))}var Yt=Object(L.a)({listItemActionRoot:{minWidth:32}});var Kt=function(t){var e=t.children,n=t.entity,r=t.slug,c=Yt(),a=Object(p.b)(),o=Object(s.useMemo)(Ht,[]),u=Object(s.useMemo)(Z,[]),l=Object(p.c)((function(t){return u(t,["profile/list/add","profile/list/remove"])})),j=Object(p.c)((function(t){return o(t,n,r)})),b=Object(s.useState)(null),d=Object(x.a)(b,2),f=d[0],h=d[1],m=Object(s.useMemo)((function(){return j.filter((function(t){return t.listed})).length}),[j]),O=Boolean(f),v=Object(s.useState)({}),y=Object(x.a)(v,2),w=y[0],k=y[1];function P(t,e,n){return function(){var c=Bt,i=!0;e&&(c=Dt,i=!1),a(c({entity:t,listSlug:n,slug:r})),k(Object(E.a)(Object(E.a)({},w),{},Object(et.a)({},n,i)))}}return Object(i.jsxs)(i.Fragment,{children:[e((function(t){h(t.currentTarget)}),m),Object(i.jsxs)(Wt.a,{anchorEl:f,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){h(null)},open:O,transformOrigin:{horizontal:"center",vertical:"top"},children:[l&&Object(i.jsx)(ht.a,{}),Object(i.jsx)(g.a,{dense:!0,subheader:Object(i.jsxs)(Rt.a,{children:["Listed on ",m," of ",j.length," lists"]}),children:j.map((function(t){var e=t.listed,r=t.name,a=t.slug;return Object(i.jsxs)(z.a,{button:!0,disabled:l,onClick:P(n,e,a),children:[Object(i.jsx)(Lt.a,{classes:{root:c.listItemActionRoot},children:Object(i.jsx)(Vt.a,{checked:a in w?w[a]:e,disableRipple:!0,edge:"start",size:"small"})}),Object(i.jsx)(M.a,{children:r})]},a)}))})]})]})},Qt=n(9),Ut=n.n(Qt);function Xt(t){var e=t.children,n=t.entity,r=t.season,c=t.size,a=t.tmdbId,i=t.type;if(n=ut(n),!a)return null;var s="/images/".concat(n,"/").concat(a,"/").concat(i,"?");return r&&(s+="season=".concat(r)),c&&(s+="size=".concat(c)),e(s)}Xt.propTypes={children:Ut.a.func.isRequired,entity:Ut.a.oneOf(["movies","people","shows"]).isRequired,season:Ut.a.number,size:Ut.a.string,tmdbId:Ut.a.number,type:Ut.a.oneOf(["backdrop","poster","profile"])};var Zt=Xt,$t=n(293);var te=function(t){var e=t.onChange,n=t.value,r=void 0===n?0:n,c=Object(s.useState)(r),a=Object(x.a)(c,2),o=a[0],u=a[1];return Object(i.jsx)($t.a,{max:10,name:"_",onChange:function(t,n){u(n),e(n)},value:o})},ee=Object(y.a)((function(t){return t.movie}),(function(t){return t})),ne=Object(y.a)((function(t){return t.profile.ratings}),(function(t){return t})),re=Object(y.a)([function(t){return t.profile.ratings},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){var r=t.find((function(t){return t.type===e&&t[e].ids.slug===n}));return r?r.rating:0})),ce=Object(k.b)("profile/ratings/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.get("/trakt/sync/ratings");case 4:return a=t.sent,t.abrupt("return",a.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),ae=Object(k.b)("profile/ratings/rate",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.rating,i=e.slug,s=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/sync/ratings",Object(et.a)({},r,[{ids:{slug:i},rating:a}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),ie=(Object(k.b)("profile/ratings/remove",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/sync/ratings/remove",Object(et.a)({},r,[{ids:{slug:a}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),Object(k.c)({extraReducers:Object(et.a)({},ce.fulfilled,(function(t,e){return e.payload})),initialState:[],name:"profile/ratings",reducers:{}}).reducer),se=Object(y.a)((function(t){return t.profile.recommendations}),(function(t){return t})),oe=Object(y.a)([function(t){return t.profile.recommendations},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){var r=t.find((function(t){return t.type===e&&t[e].ids.slug===n}));return Boolean(r)})),ue=Object(k.b)("profile/recommendations/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.get("/trakt/sync/recommendations");case 4:return a=t.sent,t.abrupt("return",a.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),le=Object(k.b)("profile/recommendation/recommend",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/sync/recommendations",Object(et.a)({},r,[{ids:{slug:a}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),je=Object(k.b)("profile/recommendation/unrecommend",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/sync/recommendations/remove",Object(et.a)({},r,[{ids:{slug:a}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),pe=Object(k.c)({extraReducers:Object(et.a)({},ue.fulfilled,(function(t,e){return e.payload})),initialState:[],name:"profile/recommendations",reducers:{}}).reducer,be=Object(y.a)((function(t){return t.profile.watchlist}),(function(t){return t})),de=Object(y.a)([function(t){return t.profile.watchlist},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){var r=t.find((function(t){return t.type===e&&t[e].ids.slug===n}));return Boolean(r)})),fe=Object(k.b)("profile/watchlist/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,rt.a.get("/trakt/sync/watchlist");case 4:return a=t.sent,t.abrupt("return",a.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),he=Object(k.b)("profile/watchlist/add",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/sync/watchlist",Object(et.a)({},r,[{ids:{slug:a}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),me=Object(k.b)("profile/watchlist/remove",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.post("/trakt/sync/watchlist/remove",Object(et.a)({},r,[{ids:{slug:a}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),Oe=Object(k.c)({extraReducers:Object(et.a)({},fe.fulfilled,(function(t,e){return e.payload})),initialState:[],name:"profile/watchlist",reducers:{}}).reducer;var ve=function(){var t,e,n=Object(p.b)(),r=Object(b.j)().slug,c=Object(p.c)((function(t){return X(t,"movie/fetch")})),a=Object(p.c)(ee),o=Object(p.c)((function(t){return re(t,"movie",r)})),u=Object(p.c)((function(t){return oe(t,"movie",r)})),l=Object(p.c)((function(t){return de(t,"movie",r)}));return Object(s.useEffect)((function(){n(at(r))}),[n,r]),Object(i.jsxs)(i.Fragment,{children:[c&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)(Kt,{entity:"movies",slug:r,children:function(t,e){return Object(i.jsx)("button",{onClick:t,type:"button",children:e?"Listed on ".concat(e," list(s)"):"Add to list"})}}),Object(i.jsx)("button",{onClick:function(){n(l?me({entity:"movies",slug:r}):he({entity:"movies",slug:r}))},type:"button",children:l?"Remove from watchlist":"Add to watchlit"}),Object(i.jsx)("button",{onClick:function(){n(u?je({entity:"movies",slug:r}):le({entity:"movies",slug:r}))},type:"button",children:u?"Remove recommendation":"Recommend"}),Object(i.jsx)(te,{onChange:function(t){n(ae({entity:"movies",rating:t,slug:r}))},value:o}),Object(i.jsx)(Zt,{entity:"movies",size:"w154",tmdbId:null===(t=a.summary)||void 0===t?void 0:t.ids.tmdb,type:"poster",children:function(t){return Object(i.jsx)("img",{alt:"poster",src:t})}}),Object(i.jsx)(It,{entity:"movies",items:a.comments,slug:r,totalCount:(null===(e=a.stats)||void 0===e?void 0:e.comments)||0})]})};var ge=function(t){var e=t.disabled,n=t.hasNextPage,r=t.hasPreviousPage,c=t.onFirstPage,a=t.onLastPage,s=t.onNextPage,o=t.onPreviousPage;return Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{disabled:e,onClick:c,type:"button",children:"First page"}),Object(i.jsx)("button",{disabled:e||!r,onClick:o,type:"button",children:"Previous page"}),Object(i.jsx)("button",{disabled:e||!n,onClick:s,type:"button",children:"Next page"}),Object(i.jsx)("button",{disabled:e,onClick:a,type:"button",children:"Last page"})]})};var xe=function(t){var e=Object(d.d)(),n=Object(x.a)(e,2),r=n[0],c=n[1],a=Object(s.useMemo)((function(){return Object.fromEntries(r)}),[r]),i=a.page,o=void 0===i?"1":i,u=Object(J.a)(a,["page"]),l=Object(p.c)(t);return{hasNextPage:parseInt(o)<l,hasPreviousPage:parseInt(o)>1,page:o,toFirstPage:function(){c(Object(E.a)({page:1},u))},toLastPage:function(){c(Object(E.a)({page:l},u))},toNextPage:function(){c(Object(E.a)({page:parseInt(o)+1},u))},toPreviousPage:function(){c(Object(E.a)({page:parseInt(o)-1},u))}}},ye=Object(y.a)((function(t){return t.movies.entities}),(function(t){return t})),we=Object(y.a)((function(t){return t.movies.pagination.total}),(function(t){return t})),ke=Object(k.b)("movies/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.category,a=e.page,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.get("/trakt/movies/".concat(r,"?page=").concat(a,"&limit=").concat(st));case 5:return s=t.sent,"popular"===r&&(s.data=s.data.map((function(t){return{movie:t}}))),t.abrupt("return",{entities:s.data,total:parseInt(s.headers["x-pagination-page-count"])});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),Pe=Object(k.c)({extraReducers:Object(et.a)({},ke.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"movies",reducers:{}}).reducer,Se=Object(L.a)((function(t){return{footer:{bottom:0,padding:8,position:"absolute"},image:{height:"100%",objectFit:"cover",width:"100%"},root:{borderBottom:"1px solid ".concat(t.palette.divider),borderRight:"1px solid ".concat(t.palette.divider),position:"relative"}}}));var Ne=function(t){var e=t.releaseYear,n=t.title,r=t.tmdbId,c=t.watchers,a=Se();return Object(i.jsxs)("div",{className:a.root,children:[Object(i.jsx)(Zt,{entity:"movies",size:"w500",tmdbId:r,type:"poster",children:function(t){return Object(i.jsx)("img",{alt:"poster",className:a.image,src:t})}}),Object(i.jsxs)("div",{className:a.footer,children:[Object(i.jsx)(Ot.a,{color:"secondary",label:Object(i.jsxs)(O.a,{variant:"caption",children:[c," people watching"]}),size:"small"}),Object(i.jsxs)("div",{children:[Object(i.jsxs)(O.a,{color:"textPrimary",display:"inline",variant:"body1",children:[n," "]}),Object(i.jsx)(O.a,{color:"textSecondary",display:"inline",variant:"caption",children:e})]})]})]})};function Ce(t){var e=t.category,n=t.movies;switch(e){case"trending":return function(t){return t.map((function(t){var e=t.movie,n=t.watchers;return Object(i.jsx)(f.a,{component:d.b,item:!0,md:4,sm:6,to:"/app/movies/".concat(e.ids.slug),xl:3,xs:12,children:Object(i.jsx)(Ne,{releaseYear:e.year,title:e.title,tmdbId:e.ids.tmdb,watchers:n})},e.ids.trakt)}))}(n);case"popular":case"recommended":case"watched":case"collected":case"anticipated":default:return null}}var Fe=function(t){var e=t.category,n=Object(p.b)(),r=xe(we),c=r.hasNextPage,a=r.hasPreviousPage,o=r.page,u=r.toFirstPage,l=r.toLastPage,j=r.toNextPage,b=r.toPreviousPage,d=Object(p.c)((function(t){return X(t,"movies/fetch")})),h=Object(p.c)(ye);return Object(s.useEffect)((function(){n(ke({category:e,page:o}))}),[e,n,o]),Object(i.jsxs)(i.Fragment,{children:[d&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)(ge,{disabled:d,hasNextPage:c,hasPreviousPage:a,onFirstPage:u,onLastPage:l,onNextPage:j,onPreviousPage:b}),Object(i.jsx)(f.a,{container:!0,children:Ce({category:e,movies:h})})]})},Ie=Object(y.a)((function(t){return t.person}),(function(t){return t})),We=Object(k.b)("person/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([rt.a.get("/trakt/people/".concat(e,"?extended=full")),rt.a.get("/trakt/people/".concat(e,"/movies")),rt.a.get("/trakt/people/".concat(e,"/shows"))]);case 4:return a=t.sent,i=Object(x.a)(a,3),s=i[0],o=i[1],u=i[2],t.abrupt("return",{movies:o.data,shows:u.data,summary:s.data});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()),Re=Object(k.c)({extraReducers:Object(et.a)({},We.fulfilled,(function(t,e){return e.payload})),initialState:{movies:[],shows:[],summary:null},name:"person",reducers:{}}).reducer;var Le=function(){var t,e=Object(p.b)(),n=Object(b.j)().slug,r=Object(p.c)((function(t){return X(t,"person/fetch")})),c=Object(p.c)(Ie);return Object(s.useEffect)((function(){e(We(n))}),[e,n]),Object(i.jsxs)(i.Fragment,{children:[r&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)(Zt,{entity:"people",size:"w185",tmdbId:null===(t=c.summary)||void 0===t?void 0:t.ids.tmdb,type:"profile",children:function(t){return Object(i.jsx)("img",{alt:"poster",src:t})}}),Object(i.jsx)("pre",{children:JSON.stringify(c,null,2)})]})},Ve=Object(y.a)((function(t){return t.profile.comments.entities}),(function(t){return t})),Ee=Object(y.a)((function(t){return t.profile.comments.pagination.total}),(function(t){return t}));var ze=function(){var t=Object(p.b)(),e=xe(Ee),n=e.hasNextPage,r=e.hasPreviousPage,c=e.page,a=e.toFirstPage,o=e.toLastPage,u=e.toNextPage,l=e.toPreviousPage,j=Object(p.c)((function(t){return X(t,"profile/comments/fetch")})),b=Object(p.c)(Ve);return Object(s.useEffect)((function(){t(lt(c))}),[t,c]),Object(i.jsxs)(i.Fragment,{children:[j&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)(ge,{disabled:j,hasNextPage:n,hasPreviousPage:r,onFirstPage:a,onLastPage:o,onNextPage:u,onPreviousPage:l}),Object(i.jsx)("pre",{children:JSON.stringify(b,null,2)})]})},Me=Object(y.a)((function(t){return t.profile.list}),(function(t){return t}));var Je=function(){var t=Object(p.b)(),e=Object(b.j)().id,n=Object(p.c)((function(t){return X(t,"list/fetch")})),r=Object(p.c)(Me);return Object(s.useEffect)((function(){t(Tt(e))}),[t,e]),Object(i.jsxs)(i.Fragment,{children:[n&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)("pre",{children:JSON.stringify(r,null,2)})]})};var Te=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return X(t,"profile/lists/fetch")})),n=Object(p.c)(Gt);return Object(s.useEffect)((function(){t(Et())}),[t]),Object(i.jsxs)(i.Fragment,{children:[e&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)("button",{onClick:function(){t(zt({allowComments:!1,description:"This is my list",name:"My list"}))},type:"button",children:"Add list"}),Object(i.jsx)("button",{onClick:function(){t(Mt("my-list"))},type:"button",children:"Remove list"}),Object(i.jsx)("pre",{children:JSON.stringify(n,null,2)})]})};var qe=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return X(t,"profile/ratings/fetch")})),n=Object(p.c)(ne);return Object(s.useEffect)((function(){t(ce())}),[t]),Object(i.jsxs)(i.Fragment,{children:[e&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)("pre",{children:JSON.stringify(n,null,2)})]})};var Ae=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return X(t,"profile/recommendations/fetch")})),n=Object(p.c)(se);return Object(s.useEffect)((function(){t(ue())}),[t]),Object(i.jsxs)(i.Fragment,{children:[e&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)("pre",{children:JSON.stringify(n,null,2)})]})};var Be=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return X(t,"profile/watchlist/fetch")})),n=Object(p.c)(be);return Object(s.useEffect)((function(){t(fe())}),[t]),Object(i.jsxs)(i.Fragment,{children:[e&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)("pre",{children:JSON.stringify(n,null,2)})]})},De=Object(y.a)((function(t){return t.search.entities}),(function(t){return t})),_e=Object(y.a)((function(t){return t.search.pagination.total}),(function(t){return t})),Ge=Object(k.b)("search/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.entity,a=e.page,i=e.query,s=n.rejectWithValue,t.prev=2,r=ut(r),t.next=6,rt.a.get("/trakt/search/".concat(r,"?query=").concat(i,"&page=").concat(a,"&limit=").concat(st));case 6:return o=t.sent,t.abrupt("return",{entities:o.data,total:parseInt(o.headers["x-pagination-page-count"])});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),He=Object(k.c)({extraReducers:Object(et.a)({},Ge.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"search",reducers:{}}).reducer;var Ye,Ke=function(t){var e=t.entity,n=Object(p.b)(),r=xe(_e),c=r.hasNextPage,a=r.hasPreviousPage,o=r.page,u=r.toFirstPage,l=r.toLastPage,j=r.toNextPage,b=r.toPreviousPage,f=Object(d.d)(),h=Object(x.a)(f,2),m=h[0],O=h[1],v=Object(s.useMemo)((function(){return Object.fromEntries(m)}),[m]).query,g=void 0===v?"":v,y=Object(p.c)((function(t){return X(t,"search/fetch")})),w=Object(p.c)(De);return Object(s.useEffect)((function(){n(Ge({entity:e,page:o,query:g}))}),[n,e,o,g]),Object(i.jsxs)(i.Fragment,{children:[y&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)(ge,{disabled:y,hasNextPage:c,hasPreviousPage:a,onFirstPage:u,onLastPage:l,onNextPage:j,onPreviousPage:b}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"query",children:"Input your query:"}),Object(i.jsx)("input",{id:"query",onChange:function(t){var e=t.target.value;O({query:e})},type:"text",value:g})]}),Object(i.jsx)("pre",{children:JSON.stringify(w,null,2)})]})},Qe=Object(y.a)((function(t){return t.show}),(function(t){return t})),Ue=Object(k.b)("show/comments/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.limit,a=e.slug,i=e.sort,s=n.rejectWithValue,t.prev=2,t.next=5,rt.a.get("/trakt/shows/".concat(a,"/comments/").concat(i,"?page=1&limit=").concat(r));case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),Xe=Object(k.b)("show/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s,o,u,l,j,p,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([rt.a.get("/trakt/shows/".concat(e)),rt.a.get("/trakt/shows/".concat(e,"/comments/highest")),rt.a.get("/trakt/shows/".concat(e,"/people")),rt.a.get("/trakt/shows/".concat(e,"/ratings")),rt.a.get("/trakt/shows/".concat(e,"/related")),rt.a.get("/trakt/shows/".concat(e,"/stats")),rt.a.get("/trakt/shows/".concat(e,"/seasons?extended=episodes"))]);case 4:return a=t.sent,i=Object(x.a)(a,7),s=i[0],o=i[1],u=i[2],l=i[3],j=i[4],p=i[5],b=i[6],t.abrupt("return",{comments:o.data,people:u.data,ratings:l.data,related:j.data,seasons:b.data,stats:p.data,summary:s.data});case 16:return t.prev=16,t.t0=t.catch(1),t.abrupt("return",r(t.t0.toString()));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}()),Ze=Object(k.c)({extraReducers:(Ye={},Object(et.a)(Ye,Ue.fulfilled,(function(t,e){t.comments=e.payload})),Object(et.a)(Ye,Xe.fulfilled,(function(t,e){return e.payload})),Ye),initialState:{comments:[],people:null,ratings:null,related:[],seasons:[],stats:null,summary:null},name:"show",reducers:{}}).reducer;var $e=function(){var t,e=Object(s.useMemo)(Z,[]),n=Object(p.b)(),r=Object(b.j)().slug,c=Object(p.c)((function(t){return e(t,["show/fetch","show/comments/fetch"])})),a=Object(p.c)(Qe),o=Object(p.c)((function(t){return re(t,"show",r)}));return Object(s.useEffect)((function(){n(Xe(r))}),[n,r]),Object(i.jsxs)(i.Fragment,{children:[c&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)("button",{onClick:function(){n(Ue({limit:a.stats.comments,slug:r,sort:"newest"}))},type:"button",children:"Fetch all comments"}),Object(i.jsx)(te,{onChange:function(t){n(ae({entity:"shows",rating:t,slug:r}))},value:o}),Object(i.jsx)(Zt,{entity:"shows",size:"w154",tmdbId:null===(t=a.summary)||void 0===t?void 0:t.ids.tmdb,type:"poster",children:function(t){return Object(i.jsx)("img",{alt:"poster",src:t})}}),Object(i.jsx)("pre",{children:JSON.stringify(a,null,2)})]})},tn=Object(y.a)((function(t){return t.shows.entities}),(function(t){return t})),en=Object(y.a)((function(t){return t.shows.pagination.total}),(function(t){return t})),nn=Object(k.b)("shows/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.category,a=e.page,i=n.rejectWithValue,t.prev=2,t.next=5,rt.a.get("/trakt/shows/".concat(r,"?page=").concat(a,"&limit=").concat(st));case 5:return s=t.sent,"popular"===r&&(s.data=s.data.map((function(t){return{movie:t}}))),t.abrupt("return",{entities:s.data,total:parseInt(s.headers["x-pagination-page-count"])});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),rn=Object(k.c)({extraReducers:Object(et.a)({},nn.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"shows",reducers:{}}).reducer;var cn=function(t){var e=t.category,n=Object(p.b)(),r=xe(en),c=r.hasNextPage,a=r.hasPreviousPage,o=r.page,u=r.toFirstPage,l=r.toLastPage,j=r.toNextPage,b=r.toPreviousPage,d=Object(p.c)((function(t){return X(t,"shows/fetch")})),f=Object(p.c)(tn);return Object(s.useEffect)((function(){n(nn({category:e,page:o}))}),[e,n,o]),Object(i.jsxs)(i.Fragment,{children:[d&&Object(i.jsx)("div",{children:"Loading..."}),Object(i.jsx)(ge,{disabled:d,hasNextPage:c,hasPreviousPage:a,onFirstPage:u,onLastPage:l,onNextPage:j,onPreviousPage:b}),Object(i.jsx)("pre",{children:JSON.stringify(f,null,2)})]})};function an(t){return["/pending","/fulfilled","/rejected"].some((function(e){return t.type.endsWith(e)}))}var sn=Object(k.c)({extraReducers:function(t){t.addMatcher(an,(function(t,e){var n=e.type.split("/"),r=n.pop();t["".concat(n.join("/"))]="pending"===r}))},initialState:{},name:"loading",reducers:{}}).reducer,on=n(30),un=Object(on.c)({comments:dt,list:_t,lists:Jt,ratings:ie,recommendations:pe,watchlist:Oe}),ln=Object(k.a)({reducer:{loading:sn,movie:it,movies:Pe,notifications:I,person:Re,profile:un,search:He,show:Ze,shows:rn}});function jn(){return Object(i.jsxs)(b.e,{basename:"/app",children:[Object(i.jsx)(b.c,{element:Object(i.jsx)(b.a,{replace:!0,to:"movies/trending"}),path:"/"}),Object(i.jsxs)(b.c,{element:Object(i.jsx)(G,{}),path:"/",children:[Object(i.jsxs)(b.c,{path:"movies",children:[Object(i.jsx)(b.c,{element:Object(i.jsx)(b.a,{replace:!0,to:"trending"}),path:"/"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Fe,{category:"trending"}),path:"trending"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Fe,{category:"popular"}),path:"popular"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Fe,{category:"recommended"}),path:"recommended"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Fe,{category:"watched"}),path:"watched"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Fe,{category:"collected"}),path:"collected"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Fe,{category:"anticipated"}),path:"anticipated"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(ve,{}),path:":slug"})]}),Object(i.jsxs)(b.c,{path:"shows",children:[Object(i.jsx)(b.c,{element:Object(i.jsx)(b.a,{replace:!0,to:"trending"}),path:"/"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(cn,{category:"trending"}),path:"trending"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(cn,{category:"popular"}),path:"popular"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(cn,{category:"recommended"}),path:"recommended"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(cn,{category:"watched"}),path:"watched"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(cn,{category:"collected"}),path:"collected"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(cn,{category:"anticipated"}),path:"anticipated"}),Object(i.jsx)(b.c,{element:Object(i.jsx)($e,{}),path:":slug"})]}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Le,{}),path:"people/:slug"}),Object(i.jsxs)(b.c,{path:"search",children:[Object(i.jsx)(b.c,{element:Object(i.jsx)(b.a,{replace:!0,to:"all"}),path:"/"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Ke,{entity:"all"}),path:"all"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Ke,{entity:"movies"}),path:"movies"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Ke,{entity:"shows"}),path:"shows"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Ke,{entity:"people"}),path:"people"})]}),Object(i.jsxs)(b.c,{path:"profile",children:[Object(i.jsx)(b.c,{element:Object(i.jsx)(b.a,{replace:!0,to:"ratings"}),path:"/"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(qe,{}),path:"ratings"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Ae,{}),path:"recommendations"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Be,{}),path:"watchlist"}),Object(i.jsxs)(b.c,{path:"lists",children:[Object(i.jsx)(b.c,{element:Object(i.jsx)(Te,{}),path:"/"}),Object(i.jsx)(b.c,{element:Object(i.jsx)(Je,{}),path:":id"})]}),Object(i.jsx)(b.c,{element:Object(i.jsx)(ze,{}),path:"comments"})]})]}),Object(i.jsx)(b.c,{element:Object(i.jsx)(H,{}),path:"*"})]})}var pn=function(){return Object(i.jsx)(p.a,{store:ln,children:Object(i.jsxs)(d.a,{children:[Object(i.jsx)(j.a,{}),Object(i.jsx)(jn,{})]})})},bn=ln.dispatch;function dn(){return(dn=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bn(Et());case 2:return t.next=4,bn(ce());case 4:return t.next=6,bn(ue());case 6:return t.next=8,bn(fe());case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return dn.apply(this,arguments)})().then((function(){l.a.render(Object(i.jsx)(pn,{}),document.getElementById("root"))}))}},[[235,1,2]]]);
//# sourceMappingURL=main.e8c34553.chunk.js.map