(this["webpackJsonpmovie-tinder-frontend"]=this["webpackJsonpmovie-tinder-frontend"]||[]).push([[0],{149:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var r=n(1),a=(n(149),n(0)),c=n.n(a),i=n(21),s=n.n(i),o=n(312),u=n(8),l=n(17),d=n(23),j=n(294),b=n(319),p=n(314),m=n(70),f=n(299),h=n(287),O=n(15),v=n(42),g=Object(v.a)((function(e){return e.notifications}),(function(e){return e})),x=n(6);function y(e){return e.type.endsWith("/rejected")}var w=Object(x.c)({extraReducers:function(e){e.addMatcher(y,(function(e,t){e[t.meta.requestId]=t.payload}))},initialState:{},name:"notifications",reducers:{createNotification:{prepare:function(e){return{payload:{id:Object(x.d)(),message:e}}},reducer:function(e,t){e[t.payload.id]=t.payload.message}},removeNotification:function(e,t){delete e[t.payload]}}}),k=w.actions,P=w.reducer,S=(k.createNotification,k.removeNotification),R=P;var I=function(e){var t=e.id,n=e.message,a=Object(u.b)();return Object(r.jsx)("div",{onClick:function(){a(S(t))},children:n})};var N=function(){var e=Object(u.c)(g);return Object.entries(e).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)(I,{id:n,message:a},n)}))},C=n(278),z=Object(C.a)({drawerPaper:{width:256}}),W=n(13),L=n(251),F=n(290),M=n(14),V=n(318),A=n(280),E=n(317),T=n(284),B=n(285),_=n(286),D=n(288),q=n(289),G=n(316),H=n(282);function J(e){return e.loading}function K(e,t){return t}var U=Object(v.a)([J,K],(function(e,t){return Boolean(e[t])}));function Y(){return Object(v.a)([J,K],(function(e,t){return Object.keys(e).filter((function(e){return t.includes(e)})).some((function(t){return e[t]}))}))}var Q=n(5),X=n.n(Q),Z=n(11),$=n(12),ee=n(10),te=n.n(ee);function ne(e){return!e||e===ct()}var re,ae=Object(x.b)("users/list/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o,u,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.userSlug,c=void 0===a?ct():a,i=n.rejectWithValue,e.prev=2,e.next=5,Promise.all([te.a.get("/trakt/users/".concat(c,"/lists/").concat(r)),te.a.get("/trakt/users/".concat(c,"/lists/").concat(r,"/items?extended=full"))]);case 5:return s=e.sent,o=Object(O.a)(s,2),u=o[0],l=o[1],e.abrupt("return",Object(W.a)(Object(W.a)({},u.data),{},{items:at(l.data)}));case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()),ce=Object(x.c)({extraReducers:Object(Z.a)({},ae.fulfilled,(function(e,t){return ne(t.meta.arg.userSlug)?e:t.payload})),initialState:{items:[]},name:"list",reducers:{}}).reducer,ie=Object(x.b)("users/lists/fetch",Object($.a)(X.a.mark((function e(){var t,n,r,a,c,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:ct(),n=i.length>1?i[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/users/".concat(t,"/lists"));case 5:return a=e.sent,e.next=8,Promise.all(a.data.map((function(e){return te.a.get("/trakt/users/".concat(t,"/lists/").concat(e.ids.slug,"/items"))})));case 8:return c=e.sent,e.abrupt("return",a.data.map((function(e,t){return Object(W.a)(Object(W.a)({},e),{},{items:at(c[t].data)})})));case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))),se=Object(x.c)({extraReducers:Object(Z.a)({},ie.fulfilled,(function(e,t){return ne(t.meta.arg)?e:t.payload})),initialState:[],name:"users/lists",reducers:{}}).reducer,oe=Object(x.b)("users/list/remove",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.listSlug,c=t.slug,i=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/users/".concat(ct(),"/lists/").concat(a,"/items/remove"),Object(Z.a)({},r,[{ids:{slug:c}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),ue=Object(x.b)("users/list/add",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.listSlug,c=t.slug,i=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/users/".concat(ct(),"/lists/").concat(a,"/items"),Object(Z.a)({},r,[{ids:{slug:c}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());function le(e){return function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(ue(e));case 2:return t.next=4,n(ie());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function de(e){return function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(oe(e));case 2:return t.next=4,n(ie());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var je=Object(x.c)({extraReducers:(re={},Object(Z.a)(re,ae.fulfilled,(function(e,t){return ne(t.meta.arg.userSlug)?t.payload:e})),Object(Z.a)(re,oe.fulfilled,(function(e,t){var n,r=t.meta.arg,a=r.entity,c=r.listSlug,i=r.slug;return(null===(n=e.ids)||void 0===n?void 0:n.slug)===c&&(e.items=e.items.filter((function(e){return e.type!==a&&e[ot(a)].ids.slug!==i}))),e})),re),initialState:{items:[]},name:"users/list",reducers:{}}).reducer,be=Object(v.a)((function(e){return e.users.profile.lists}),(function(e){return e}));function pe(){return Object(v.a)((function(e){return e.users.profile.lists}),(function(e,t){return t}),(function(e,t,n){return n}),(function(e,t,n){return t=ot(t),e.map((function(e){return{listed:e.items.some((function(e){return e.type===t&&e[t].ids.slug===n})),name:e.name,slug:e.ids.slug}}))}))}var me=Object(C.a)({listItemActionRoot:{minWidth:32}});var fe=function(e){var t=e.entity,n=e.size,c=void 0===n?"default":n,i=e.slug,s=me(),o=Object(u.b)(),l=Object(a.useMemo)(pe,[]),j=Object(a.useMemo)(Y,[]),b=Object(u.c)((function(e){return j(e,["users/lists/fetch","users/list/add","users/list/remove"])})),p=Object(u.c)((function(e){return l(e,t,i)})),m=Object(a.useState)(null),f=Object(O.a)(m,2),v=f[0],g=f[1],x=Boolean(v),y=Object(a.useMemo)((function(){return p.filter((function(e){var t=e.listed;return Boolean(t)})).length}),[p]);function w(e){g(e.currentTarget)}function k(e,t,n){return function(){var r=le;t&&(r=de),o(r({entity:e,listSlug:n,slug:i}))}}var P=Object(r.jsx)(A.a,{color:"secondary",disabled:b,fullWidth:!0,onClick:w,startIcon:Object(r.jsx)(H.a,{}),variant:y?"contained":"outlined",children:y?"Listed on ".concat(y," lists"):"Add to your lists"});return"small"===c&&(P=Object(r.jsx)(E.a,{title:y?"Listed on ".concat(y," lists"):"Add to your lists",children:Object(r.jsx)(T.a,{color:y?"secondary":"inherit",onClick:w,size:"small",children:Object(r.jsx)(H.a,{fontSize:"small"})})})),Object(r.jsxs)(r.Fragment,{children:[P,Object(r.jsxs)(B.a,{anchorEl:v,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){g(null)},open:x,transformOrigin:{horizontal:"center",vertical:"top"},children:[b&&Object(r.jsx)(_.a,{color:"secondary"}),Object(r.jsxs)(h.a,{dense:!0,subheader:Object(r.jsxs)(D.a,{children:["Listed on ",y," of ",p.length," lists"]}),children:[p.map((function(e){var n=e.listed,a=e.name,c=e.slug;return Object(r.jsxs)(L.a,{button:!0,disabled:b,onClick:k(t,n,c),children:[Object(r.jsx)(q.a,{classes:{root:s.listItemActionRoot},children:Object(r.jsx)(G.a,{checked:n,disableRipple:!0,edge:"start",size:"small"})}),Object(r.jsx)(F.a,{children:a})]},c)})),Object(r.jsxs)(L.a,{button:!0,component:d.b,to:"?addList",children:[Object(r.jsx)(q.a,{classes:{root:s.listItemActionRoot}}),Object(r.jsx)(F.a,{children:"Add list"})]})]})]})]})},he=n(291),Oe=n(292),ve=Object(v.a)((function(e){return e.users.profile.recommendations}),(function(e){return e}));function ge(){return Object(v.a)([function(e){return e.users.profile.recommendations},function(e,t){return ot(t)},function(e,t,n){return n}],(function(e,t,n){var r=e.find((function(e){return e.type===t&&e[t].ids.slug===n}));return Boolean(r)}))}var xe=Object(x.b)("users/recommendations/fetch",Object($.a)(X.a.mark((function e(){var t,n,r,a,c=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:ct(),n=c.length>1?c[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/users/".concat(t,"/recommendations?extended=full"));case 5:return a=e.sent,e.abrupt("return",a.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),ye=Object(x.c)({extraReducers:Object(Z.a)({},xe.fulfilled,(function(e,t){return ne(t.meta.arg)?e:t.payload})),initialState:[],name:"users/recommendations",reducers:{}}).reducer,we=Object(x.b)("users/recommendations/recommend",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/sync/recommendations",Object(Z.a)({},r,[{ids:{slug:a}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),ke=Object(x.b)("users/recommendations/unrecommend",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/sync/recommendations/remove",Object(Z.a)({},r,[{ids:{slug:a}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());var Pe=Object(x.c)({extraReducers:Object(Z.a)({},xe.fulfilled,(function(e,t){return ne(t.meta.arg)?t.payload:e})),initialState:[],name:"users/recommendations",reducers:{}}).reducer;var Se=function(e){var t=e.entity,n=e.size,c=void 0===n?"default":n,i=e.slug,s=Object(u.b)(),o=Object(a.useMemo)(ge,[]),l=Object(a.useMemo)(Y,[]),d=Object(u.c)((function(e){return o(e,t,i)})),j=Object(u.c)((function(e){return l(e,["users/recommendations/fetch","users/recommendations/recommend","users/recommendations/unrecommend"])}));function b(){var e;d?s((e={entity:t,slug:i},function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(ke(e));case 2:return t.next=4,n(xe());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):s(function(e){return function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(we(e));case 2:return t.next=4,n(xe());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({entity:t,slug:i}))}return"small"===c?Object(r.jsx)(E.a,{title:d?"Remove from recommendations":"Recommend",children:Object(r.jsx)("span",{children:Object(r.jsx)(T.a,{color:d?"secondary":"inherit",disabled:j,onClick:b,size:"small",children:j?Object(r.jsx)(he.a,{color:"secondary",size:20}):Object(r.jsx)(Oe.a,{fontSize:"small"})})})}):Object(r.jsx)(A.a,{color:"secondary",disabled:j,fullWidth:!0,onClick:b,startIcon:Object(r.jsx)(Oe.a,{}),variant:d?"contained":"outlined",children:d?"Remove from recommendations":"Recommend"})},Re=n(293),Ie=Object(v.a)((function(e){return e.users.profile.watchlist}),(function(e){return e}));function Ne(){return Object(v.a)([function(e){return e.users.profile.watchlist},function(e,t){return ot(t)},function(e,t,n){return n}],(function(e,t,n){var r=e.find((function(e){return e.type===t&&e[t].ids.slug===n}));return Boolean(r)}))}var Ce=Object(x.b)("users/watchlist/fetch",Object($.a)(X.a.mark((function e(){var t,n,r,a,c=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:ct(),n=c.length>1?c[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/users/".concat(t,"/watchlist?extended=full"));case 5:return a=e.sent,e.abrupt("return",at(a.data));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),ze=Object(x.c)({extraReducers:Object(Z.a)({},Ce.fulfilled,(function(e,t){return ne(t.meta.arg)?e:t.payload})),initialState:[],name:"users/watchlist",reducers:{}}).reducer,We=Object(x.b)("users/watchlist/add",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/sync/watchlist",Object(Z.a)({},r,[{ids:{slug:a}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),Le=Object(x.b)("users/watchlist/remove",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/sync/watchlist/remove",Object(Z.a)({},r,[{ids:{slug:a}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());var Fe=Object(x.c)({extraReducers:Object(Z.a)({},Ce.fulfilled,(function(e,t){return ne(t.meta.arg)?t.payload:e})),initialState:[],name:"users/watchlist",reducers:{}}).reducer;var Me=function(e){var t=e.entity,n=e.size,c=void 0===n?"default":n,i=e.slug,s=Object(u.b)(),o=Object(a.useMemo)(Ne,[]),l=Object(a.useMemo)(Y,[]),d=Object(u.c)((function(e){return o(e,t,i)})),j=Object(u.c)((function(e){return l(e,["users/watchlist/fetch","users/watchlist/add","users/watchlist/remove"])}));function b(){var e;d?s((e={entity:t,slug:i},function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Le(e));case 2:return t.next=4,n(Ce());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):s(function(e){return function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(We(e));case 2:return t.next=4,n(Ce());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({entity:t,slug:i}))}return"small"===c?Object(r.jsx)(E.a,{title:d?"Remove from watchlist":"Add to watchlist",children:Object(r.jsx)("span",{children:Object(r.jsx)(T.a,{color:d?"secondary":"inherit",disabled:j,onClick:b,size:"small",children:j?Object(r.jsx)(he.a,{color:"secondary",size:20}):Object(r.jsx)(Re.a,{fontSize:"small"})})})}):Object(r.jsx)(A.a,{color:"secondary",disabled:j,fullWidth:!0,onClick:b,startIcon:Object(r.jsx)(Re.a,{}),variant:d?"contained":"outlined",children:d?"Remove from watchlist":"Add to watchlist"})};var Ve=function(e){var t=e.entity,n=e.season,r=e.size,a=e.tmdbId,c=e.type;if(t=ot(t),!a)return"/images/placeholder.png";var i="/images/".concat(t,"/").concat(a,"/").concat(c,"?");return void 0!==n&&(i+="season=".concat(n)),r&&(i+="size=".concat(r)),i},Ae=Object(C.a)((function(e){return{children:{textAlign:"center"},content:{bottom:e.spacing(1),left:e.spacing(1),position:"absolute"},footer:{"& > *:not(:last-child)":{marginRight:e.spacing(1)},backgroundColor:e.palette.grey[900]},link:function(t){var n=t.backgroundImage,r=t.isPerson;return{background:"url(".concat(n,") no-repeat ").concat(r?"top center":"center"),color:e.palette.primary.contrastText,display:"block",paddingTop:"148%",position:"relative",width:"100%"}},root:{}}}));var Ee=function(e){var t=e.children,n=e.content,a=e.entity,c=e.season,i=e.size,s=void 0===i?"default":i,o=e.slug,u=e.tmdbId,l="people"===a,j="small"===s,b=Ve({entity:a,season:c,size:l?j?"w185":"h632":j?"w185":"w342",tmdbId:u,type:l?"profile":"poster"}),p=Ae({backgroundImage:b,isPerson:l});return Object(r.jsxs)("div",{className:p.root,children:[Object(r.jsx)(d.b,{className:p.link,style:{backgroundSize:"cover"},to:"/app/".concat(a,"/").concat(o),children:n&&Object(r.jsx)("div",{className:p.content,children:n})}),Object(r.jsx)("div",{className:p.children,children:t})]})},Te=Object(C.a)((function(e){return{chips:{"& > *":{margin:"0 ".concat(e.spacing(.5),"px ").concat(e.spacing(.5),"px 0")}},footer:{backgroundColor:e.palette.grey[900],color:e.palette.common.white,padding:8}}}));var Be=function(e){var t=e.actions,n=e.children,a=e.chips,c=void 0===a?[]:a,i=e.entity,s=e.primary,o=e.season,u=e.secondary,l=e.size,d=e.slug,b=e.tmdbId,p=Te(),f="people"===i,h=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:p.chips,children:c.map((function(e){return Object(r.jsx)(V.a,{color:"secondary",label:e,size:"small"},e)}))}),Object(r.jsx)(m.a,{display:"inline",variant:"subtitle2",children:s}),u&&Object(r.jsxs)(m.a,{display:"inline",variant:"caption",children:[" ",u]})]});return Object(r.jsxs)(Ee,{content:h,entity:i,season:o,size:l,slug:d,tmdbId:b,children:[Object(r.jsx)("div",{className:p.footer,children:Object(r.jsxs)(j.a,{container:!0,justify:"space-between",children:[Object(r.jsxs)(j.a,{container:!0,item:!0,spacing:1,xs:6,children:[Object(r.jsx)(fe,{entity:i,size:"small",slug:d}),!f&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{entity:i,size:"small",slug:d}),Object(r.jsx)(Se,{entity:i,size:"small",slug:d})]})]}),Object(r.jsx)(j.a,{container:!0,item:!0,justify:"flex-end",spacing:1,xs:6,children:t})]})}),n]})},_e=n(295),De=n(321),qe=Object(v.a)((function(e){return e.users.profile.ratings}),(function(e){return e}));function Ge(){return Object(v.a)([function(e){return e.users.profile.ratings},function(e,t){return ot(t)},function(e,t,n){return n}],(function(e,t,n){var r=e.find((function(e){return e.type===t&&e[t].ids.slug===n}));return r?r.rating:0}))}var He=Object(x.b)("users/ratings/fetch",Object($.a)(X.a.mark((function e(){var t,n,r,a,c=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:ct(),n=c.length>1?c[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/users/".concat(t,"/ratings?page=1&limit=10"));case 5:return a=e.sent,e.abrupt("return",at(a.data));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),Je=Object(x.c)({extraReducers:Object(Z.a)({},He.fulfilled,(function(e,t){return ne(t.meta.arg)?e:t.payload})),initialState:[],name:"users/ratings",reducers:{}}).reducer,Ke=Object(x.b)("users/ratings/rate",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.rating,c=t.slug,i=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/sync/ratings",Object(Z.a)({},r,[{ids:{slug:c},rating:a}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),Ue=Object(x.b)("users/ratings/remove",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/trakt/sync/ratings/remove",Object(Z.a)({},r,[{ids:{slug:a}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());var Ye=Object(x.c)({extraReducers:Object(Z.a)({},He.fulfilled,(function(e,t){return ne(t.meta.arg)?t.payload:e})),initialState:[],name:"users/ratings",reducers:{}}).reducer,Qe=Object(C.a)((function(e){return{buttonRoot:{minWidth:154},popoverPaper:{padding:e.spacing(1),paddingBottom:e.spacing(.25)},ratingRoot:{color:e.palette.secondary.main}}}));function Xe(e){switch(e){case-1:return"Unrate";case 1:return"1 - Weak sauce";case 2:return"2 - Terrible";case 3:return"3 - Bad";case 4:return"4 - Poor";case 5:return"5 - Meh";case 6:return"6 - Fair";case 7:return"7 - Good";case 8:return"8 - Great";case 9:return"9 - Superb";case 10:return"10 - Excellent!";default:return"Rate"}}var Ze=function(e){var t=e.entity,n=e.overallRating,c=e.size,i=e.slug,s=Qe(),o=Object(u.b)(),l=Object(a.useMemo)(Ge,[]),d=Object(a.useMemo)(Y,[]),j=Object(u.c)((function(e){return l(e,t,i)})),b=Object(u.c)((function(e){return d(e,["users/ratings/fetch","users/ratings/rate","users/ratings/remove"])})),f=Object(a.useState)(null),h=Object(O.a)(f,2),v=h[0],g=h[1],x=Boolean(v),y=Object(a.useState)(null),w=Object(O.a)(y,2),k=w[0],P=w[1],S=null!==k;function R(e){g(e.currentTarget)}var I,N=Object(r.jsx)(A.a,{classes:{root:s.buttonRoot},color:"secondary",fullWidth:!0,onClick:R,startIcon:Object(r.jsx)(_e.a,{}),variant:j?"contained":"outlined",children:Xe(S?k:j)});return"small"===c&&(N=Object(r.jsx)(E.a,{title:"Rate",children:Object(r.jsxs)("span",{children:[Object(r.jsx)(m.a,{color:n||!j?"inherit":"secondary",variant:"caption",children:n||(I=S?k:j,-1===I?0:I)}),Object(r.jsx)(T.a,{color:j?"secondary":"inherit",onClick:R,size:"small",children:Object(r.jsx)(_e.a,{fontSize:"small"})})]})})),Object(r.jsxs)(r.Fragment,{children:[N,Object(r.jsxs)(B.a,{anchorEl:v,anchorOrigin:{horizontal:"center",vertical:"bottom"},classes:{paper:s.popoverPaper},onClose:function(){P(null),g(null)},open:x,transformOrigin:{horizontal:"center",vertical:"top"},children:["small"===c&&Object(r.jsx)(p.a,{textAlign:"center",children:Xe(S?k:j)}),Object(r.jsx)(De.a,{classes:{root:s.ratingRoot},disabled:b,icon:Object(r.jsx)(_e.a,{fontSize:"inherit"}),max:10,name:"_",onChange:function(e,n){var r;o(n?function(e){return function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Ke(e));case 2:return t.next=4,n(He());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({entity:t,rating:n,slug:i}):(r={entity:t,slug:i},function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Ue(r));case 2:return e.next=4,t(He());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onChangeActive:function(e,t){P(t!==j?-1!==t?t:null:-1)},value:j})]})]})};var $e=function(e){var t=e.entity,n=e.overallRating,a=e.slug;return Object(r.jsx)(Be,Object(W.a)({actions:Object(r.jsx)(Ze,{entity:t,overallRating:n,size:"small",slug:a})},e))},et=["movie","person","show"],tt=20,nt=36;function rt(e){if(!e)return[];var t=e.ratings,n=e.stats,a=e.summary;return[["Rating",dt(null===t||void 0===t?void 0:t.rating)],["Votes",lt(null===t||void 0===t?void 0:t.votes)],["Released",new Date(null===a||void 0===a?void 0:a.released).toLocaleDateString("da-Dk")],["Genres",null===a||void 0===a?void 0:a.genres.map(M.a).join(", ")],["Certification",null===a||void 0===a?void 0:a.certification],["Watchers",lt(null===n||void 0===n?void 0:n.watchers)],["Plays",lt(null===n||void 0===n?void 0:n.plays)],["Lists",lt(null===n||void 0===n?void 0:n.lists)],["Comments",lt(null===n||void 0===n?void 0:n.comments)],["Trailer",Object(r.jsx)("a",{href:null===a||void 0===a?void 0:a.trailer,children:"Watch trailer"})]]}function at(e){return e.filter((function(e){var t=e.type;return et.includes(t)}))}function ct(){return document.cookie.split("; ").reduce((function(e,t){var n=t.split("="),r=Object(O.a)(n,2),a=r[0],c=r[1];return e[a]=c,e}),{}).userSlug}function it(e,t,n){var a,c=e.type;e=e[c];var i={chips:[Object(M.a)(c)],entity:ut(c),slug:e.ids.slug,tmdbId:e.ids.tmdb};return"person"===c?(a=Be,i.primary=e.name):(a=$e,i.primary=e.title,i.secondary=e.year,i.overallRating=dt(e.rating,0)),t?Object(r.jsx)(t,Object(W.a)(Object(W.a)({},n),{},{children:Object(r.jsx)(a,Object(W.a)({},i))}),e.ids.slug):Object(r.jsx)(a,Object(W.a)({},i),e.ids.slug)}function st(e,t,n){var a=e.type;e=e[a];var c={entity:ut(a),slug:e.ids.slug,tmdbId:e.ids.tmdb};return t?Object(r.jsx)(t,Object(W.a)(Object(W.a)({},n),{},{children:Object(r.jsx)(Ee,Object(W.a)({},c))}),e.ids.slug):Object(r.jsx)(Ee,Object(W.a)({},c),e.ids.slug)}function ot(e){switch(e){case"movies":return"movie";case"shows":return"show";case"people":return"person";default:return"movie,show,person"}}function ut(e){switch(e){case"movie":return"movies";case"show":return"shows";case"person":return"people";default:return""}}function lt(e){return e?Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e):""}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?"".concat((10*e).toFixed(t),"%"):""}var jt=n(38),bt=n(298),pt=n(296),mt=n(297),ft=Object(C.a)((function(e){return{nestedListItemGutters:{paddingLeft:e.spacing(4)}}}));var ht=function(e){var t=e.children,n=e.listItemTextProps,i=Object(jt.a)(e,["children","listItemTextProps"]),s=ft(),o=Object(a.useState)(!1),u=Object(O.a)(o,2),l=u[0],d=u[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(L.a,Object(W.a)(Object(W.a)({},i),{},{onClick:function(e){e.preventDefault(),d(!l)},children:[Object(r.jsx)(F.a,Object(W.a)({},n)),l?Object(r.jsx)(pt.a,{}):Object(r.jsx)(mt.a,{})]})),Object(r.jsx)(bt.a,{in:l,children:Object(r.jsx)(h.a,{disablePadding:!0,children:c.a.Children.map(t,(function(e){return c.a.cloneElement(e,{classes:{gutters:s.nestedListItemGutters}})}))})})]})},Ot=[{nested:[{path:"movies/trending",title:"Trending"},{path:"movies/popular",title:"Popular"},{path:"movies/recommended",title:"Recommended"},{path:"movies/watched",title:"Watched"},{path:"movies/anticipated",title:"Anticipated"}],title:"Movies"},{nested:[{path:"shows/trending",title:"Trending"},{path:"shows/popular",title:"Popular"},{path:"shows/recommended",title:"Recommended"},{path:"shows/watched",title:"Watched"},{path:"shows/anticipated",title:"Anticipated"}],title:"Shows"},{nested:[{path:"users/".concat(ct(),"/ratings"),title:"Ratings"},{path:"users/".concat(ct(),"/recommendations"),title:"Recommendations"},{path:"users/".concat(ct(),"/watchlist"),title:"Watchlist"},{path:"users/".concat(ct(),"/lists"),title:"Lists"},{path:"users/".concat(ct(),"/comments"),title:"Comments"}],title:"Profile"},{nested:[{path:"search/all",title:"All"},{path:"search/movies",title:"Movies"},{path:"search/shows",title:"Shows"},{path:"search/people",title:"People"}],title:"Search"}];var vt,gt=function(){var e=z();return Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(b.a,{anchor:"left",classes:{paper:e.drawerPaper},color:"",variant:"permanent",children:[Object(r.jsxs)(p.a,{px:2,py:1,children:[Object(r.jsx)(m.a,{variant:"h6",children:"Traktor"}),Object(r.jsx)(m.a,{variant:"caption",children:"v0.1"})]}),Object(r.jsx)(f.a,{}),Object(r.jsx)(h.a,{disablePadding:!0,children:Ot.map((function(e){var t=e.nested,n=e.path,c=e.title,i={activeClassName:"Mui-selected",button:!0,component:d.c,key:c,to:n};if(!t&&n)return Object(r.jsx)(L.a,Object(W.a)(Object(W.a)({},i),{},{children:Object(r.jsx)(F.a,{primary:c})}));var s=t.map((function(e){var t=e.path,n=e.title;return Object(a.createElement)(L.a,Object(W.a)(Object(W.a)({},i),{},{key:n,to:t}),Object(r.jsx)(F.a,{primary:n}))})),o={button:!0,key:c,listItemTextProps:{primary:c}};return Object(r.jsx)(ht,Object(W.a)(Object(W.a)({},o),{},{children:s}))}))})]}),Object(r.jsxs)(p.a,{ml:32,children:[Object(r.jsx)(N,{}),Object(r.jsx)(l.b,{})]})]})},xt=n(301),yt=n(302),wt=n(303),kt=Object(x.b)("users/lists/add",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,te.a.post("/trakt/users/".concat(ct(),"/lists"),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Pt=Object(x.b)("users/lists/remove",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,te.a.delete("/trakt/users/".concat(ct(),"/lists/").concat(t));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",r(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),St=Object(x.b)("users/lists/update",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.description,a=t.name,c=t.privacy,i=t.slug,s=n.rejectWithValue,e.prev=2,e.next=5,te.a.put("/trakt/users/".concat(ct(),"/lists/").concat(i),{description:r,name:a,privacy:c,slug:i});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",s(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Rt=Object(x.c)({extraReducers:(vt={},Object(Z.a)(vt,kt.fulfilled,(function(e,t){e.push(Object(W.a)(Object(W.a)({},t.payload),{},{items:[]}))})),Object(Z.a)(vt,ie.fulfilled,(function(e,t){return ne(t.meta.arg)?t.payload:e})),Object(Z.a)(vt,Pt.fulfilled,(function(e,t){var n=t.meta.arg,r=e.findIndex((function(e){return e.ids.slug===n}));e.splice(r,1)})),Object(Z.a)(vt,St.fulfilled,(function(e,t){var n=t.meta.arg.slug,r=e.findIndex((function(e){return e.ids.slug===n}));e[r]=Object(W.a)(Object(W.a)({},e[r]),t.payload)})),vt),initialState:[],name:"users/lists",reducers:{}}).reducer,It=n(313),Nt=n(300);var Ct=function(e){var t=e.description,n=void 0===t?"":t,c=e.disabled,i=void 0!==c&&c,s=e.isPrivate,o=void 0!==s&&s,u=e.name,l=void 0===u?"":u,d=e.onSubmit,j=Object(a.useState)({description:n||"",isPrivate:o||!1,name:l||""}),b=Object(O.a)(j,2),m=b[0],f=b[1];function h(){f({description:n,isPrivate:o,name:l})}return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(p.a,{mb:2,children:Object(r.jsx)(It.a,{disabled:i,fullWidth:!0,label:"Name",onChange:function(e){var t=e.target.value;f(Object(W.a)(Object(W.a)({},m),{},{name:t}))},size:"small",value:m.name,variant:"outlined"})}),Object(r.jsx)(p.a,{mb:0,children:Object(r.jsx)(It.a,{disabled:i,fullWidth:!0,helperText:"Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]",label:"Description",multiline:!0,onChange:function(e){var t=e.target.value;f(Object(W.a)(Object(W.a)({},m),{},{description:t}))},size:"small",value:m.description,variant:"outlined"})}),Object(r.jsxs)("div",{style:{textAlign:"right"},children:[Object(r.jsx)(Nt.a,{color:"primary",disabled:i,onChange:function(){f(Object(W.a)(Object(W.a)({},m),{},{isPrivate:!m.isPrivate}))},selected:m.isPrivate,size:"small",value:m.isPrivate,children:m.isPrivate?"Private":"Public"})," ",Object(r.jsx)(A.a,{color:"secondary",disabled:i,onClick:function(){d({description:m.description,name:m.name,privacy:m.isPrivate?"private":"public",reset:h})},variant:"outlined",children:"Submit"})]})]})};var zt=function(){var e=Object(u.b)(),t=Object(d.d)(),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(u.c)((function(e){return U(e,"users/lists/add")})),o=Object(a.useMemo)((function(){return Object.fromEntries(c)}),[c]),l=o.addList,j=Object(jt.a)(o,["addList"]),b=void 0!==l;function m(){i(Object(W.a)({},j))}return Object(r.jsxs)(xt.a,{onClose:m,open:b,children:[Object(r.jsx)(yt.a,{children:"Add list"}),Object(r.jsx)(wt.a,{children:Object(r.jsx)(p.a,{mb:1,children:Object(r.jsx)(Ct,{disabled:s,onSubmit:function(t){var n=t.reset,r=Object(jt.a)(t,["reset"]);e(kt(r)).then((function(){n(),m()}))}})})})]})},Wt=Object(C.a)((function(e){return{root:{alignItems:"center",backgroundColor:e.palette.text.primary,display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:0,width:"100%",zIndex:e.zIndex.tooltip+1}}}));var Lt=function(e){var t=e.fullscreen,n=void 0===t||t,c=Wt();return Object(a.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.style.overflow="initial"}}),[]),n?s.a.createPortal(Object(r.jsx)("div",{className:c.root,children:Object(r.jsx)(he.a,{color:"secondary",size:64})}),document.getElementById("loadingOverlayRoot")):Object(r.jsx)("h1",{children:"hi"})};var Ft=function(){return Object(r.jsx)("h1",{children:"404 not found"})};var Mt,Vt=function(){var e=Object(l.h)();Object(a.useEffect)((function(){window.scrollTo({top:0})}),[e])},At=n(131),Et=n(304),Tt=n(305),Bt=n(83),_t=n.n(Bt),Dt=n(84),qt=n.n(Dt),Gt=Object(x.b)("users/comments/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.page,a=t.userSlug,c=void 0===a?ct():a,i=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/users/".concat(c,"/comments?page=").concat(r,"&limit=").concat(nt));case 5:return s=e.sent,e.abrupt("return",{entities:at(s.data),total:parseInt(s.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Ht=Object(x.c)({extraReducers:Object(Z.a)({},Gt.fulfilled,(function(e,t){if(ne(t.meta.arg.userSlug))return e;e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/comments",reducers:{}}).reducer,Jt=Object(x.b)("users/comments/post",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o,u,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.comment,a=t.entity,c=t.slug,i=t.spoiler,s=void 0!==i&&i,o=n.rejectWithValue,a=ot(a),e.prev=3,e.next=6,te.a.post("/trakt/comments",(u={comment:r},Object(Z.a)(u,a,{ids:{slug:c}}),Object(Z.a)(u,"spoiler",s),u));case 6:return l=e.sent,e.abrupt("return",l.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",o(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Kt=Object(x.b)("users/comments/remove",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,te.a.delete("/trakt/comments/".concat(t));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",r(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),Ut=Object(x.b)("users/comments/update",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.comment,a=t.id,c=t.spoiler,i=n.rejectWithValue,e.prev=2,e.next=5,te.a.put("/trakt/comments/".concat(a),{comment:r,spoiler:c});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Yt=Object(x.c)({extraReducers:(Mt={},Object(Z.a)(Mt,Gt.fulfilled,(function(e,t){return ne(t.meta.arg.userSlug)&&(e.entities=t.payload.entities,e.pagination.total=t.payload.total),e})),Object(Z.a)(Mt,Kt.fulfilled,(function(e,t){var n=t.meta.arg,r=e.entities.findIndex((function(e){return e.comment.id===n}));-1!==r&&e.entities.splice(r,1)})),Object(Z.a)(Mt,Ut.fulfilled,(function(e,t){var n=e.entities.findIndex((function(e){return e.comment.id===t.payload.id}));-1!==n&&(e.entities[n].comment=t.payload)})),Mt),initialState:{entities:[],pagination:{total:0}},name:"users/comments",reducers:{}}).reducer;var Qt=function(e){var t=e.comment,n=void 0===t?"":t,c=e.disabled,i=void 0!==c&&c,s=e.onSubmit,o=e.spoiler,u=void 0!==o&&o,l=Object(a.useState)({comment:n||"",spoiler:u||!1}),d=Object(O.a)(l,2),j=d[0],b=d[1];function p(){b({comment:n,spoiler:u})}return Object(r.jsxs)("div",{children:[Object(r.jsx)(It.a,{disabled:i,fullWidth:!0,helperText:"Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]",label:"Your comment",multiline:!0,onChange:function(e){var t=e.target.value;b(Object(W.a)(Object(W.a)({},j),{},{comment:t}))},value:j.comment,variant:"outlined"}),Object(r.jsxs)("div",{style:{textAlign:"right"},children:[Object(r.jsx)(Nt.a,{color:"primary",disabled:i,onChange:function(){b(Object(W.a)(Object(W.a)({},j),{},{spoiler:!j.spoiler}))},selected:j.spoiler,size:"small",value:j.spoiler,children:j.spoiler?"Marked as spoiler":"Mark as spoiler"})," ",Object(r.jsx)(A.a,{color:"secondary",disabled:i,onClick:function(){s({comment:j.comment,reset:p,spoiler:j.spoiler})},variant:"outlined",children:"Submit"})]})]})};var Xt=function(e){var t=e.comment,n=e.createdAt,c=e.id,i=e.review,s=e.spoiler,o=e.username,l=e.userRating,b=e.userSlug,f=Object(a.useMemo)(Y,[]),h=Object(u.b)(),v=Object(u.c)((function(e){return f(e,["users/comments/remove","users/comments/update"])})),g=Object(a.useState)(null),x=Object(O.a)(g,2),y=x[0],w=x[1],k=ct()===b,P="editing"===y,S="removing"===y,R=[Object(r.jsxs)(m.a,{display:"inline",variant:"body2",children:[i?"Review":"Shout"," by"," ",Object(r.jsx)(d.b,{to:"/app/users/".concat(b),children:o})]},"".concat(o,"-comment-").concat(c,"-label-0")),Object(r.jsx)("span",{children:" | "},"".concat(o,"-comment-").concat(c,"-label-1")),Object(r.jsx)(m.a,{display:"inline",variant:"caption",children:new Date(n).toLocaleString("da-DK")},"".concat(o,"-comment-").concat(c,"-label-2")),l&&Object(r.jsxs)(a.Fragment,{children:[" | ",Object(r.jsxs)(m.a,{display:"inline",variant:"caption",children:["rated ",l]})]},"".concat(o,"-comment-").concat(c,"-label-3")),s&&Object(r.jsxs)(r.Fragment,{children:[" | "," ",Object(r.jsx)(V.a,{label:"Spoiler",size:"small"})]})];return Object(r.jsxs)(r.Fragment,{children:[(P||S)&&v&&Object(r.jsx)(_.a,{color:"secondary"}),Object(r.jsxs)(p.a,{component:At.a,p:2,children:[Object(r.jsxs)(j.a,{alignItems:"center",container:!0,justify:"space-between",children:[Object(r.jsx)(j.a,{item:!0,children:R.map((function(e){return e}))}),k&&Object(r.jsxs)(j.a,{item:!0,children:[Object(r.jsx)(T.a,{onClick:function(){w(P?"default":"editing")},size:"small",children:Object(r.jsx)(Et.a,{fontSize:"small"})}),Object(r.jsx)(T.a,{onClick:function(){w("removing"),h(Kt(c))},size:"small",children:Object(r.jsx)(Tt.a,{fontSize:"small"})})]})]}),P?Object(r.jsx)(p.a,{mt:2,children:Object(r.jsx)(Qt,{comment:t,disabled:v,onSubmit:function(e){e.reset;var t=Object(jt.a)(e,["reset"]);h(Ut(Object(W.a)(Object(W.a)({},t),{},{id:c}))).then((function(){return w("default")}))},spoiler:s})}):Object(r.jsx)(qt.a,{allowDangerousHtml:!0,children:_t.a.shortnameToImage(t)})]})]})};function Zt(e){var t={comment:e.comment,createdAt:e.created_at,id:e.id,review:e.review,spoiler:e.spoiler,username:e.user.username,userRating:e.user_rating,userSlug:e.user.ids.slug},n=t.id;return Object(r.jsx)(Xt,Object(W.a)({},t),n)}var $t=[["highest","Highest"],["newest","Newest"],["likes","Likes"]],en=n(306),tn=Object(C.a)((function(e){return{textFieldRoot:{minWidth:133}}}));var nn=function(e){var t=e.onChange,n=e.value,a=tn();return Object(r.jsx)(It.a,{classes:{root:a.textFieldRoot},label:"Sort comments by",onChange:function(e){var n=e.target.value;t(n)},select:!0,size:"small",value:n,variant:"outlined",children:$t.map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)(en.a,{value:n,children:a},n)}))})},rn=n(307),an=n(308),cn=n(309),sn=n(310),on=Object(C.a)((function(e){return{root:function(t){var n=t.isWrapped;return{"& > *:not(:last-child)":{marginRight:e.spacing(1)},display:n?"block":"inline-block",margin:n?"".concat(e.spacing(1),"px 0"):"initial",textAlign:n?"right":"inherit"}}}}));var un=function(e){var t=e.disabled,n=void 0!==t&&t,a=e.hasNextPage,c=e.hasPreviousPage,i=e.onFirstPage,s=e.onLastPage,o=e.onNextPage,u=e.onPreviousPage,l=e.page,d=e.pagesTotal,j=e.variant,b=on({isWrapped:"wrapped"===(void 0===j?"wrapped":j)}),p=n||1===l,f=n||!c,h=n||!a,O=n||l===d;return Object(r.jsxs)("div",{className:b.root,children:[Object(r.jsx)(E.a,{title:"Go to first page",children:Object(r.jsx)("span",{children:Object(r.jsx)(T.a,{disabled:p,onClick:i,size:"small",children:Object(r.jsx)(rn.a,{})})})}),Object(r.jsx)(E.a,{title:"Go to previous page",children:Object(r.jsx)("span",{children:Object(r.jsx)(T.a,{disabled:f,onClick:u,size:"small",children:Object(r.jsx)(an.a,{})})})}),Object(r.jsxs)(m.a,{variant:"caption",children:["Page ",l," of ",d]}),Object(r.jsx)(E.a,{title:"Go to next page",children:Object(r.jsx)("span",{children:Object(r.jsx)(T.a,{disabled:h,onClick:o,size:"small",children:Object(r.jsx)(cn.a,{})})})}),Object(r.jsx)(E.a,{title:"Go to last page",children:Object(r.jsx)("span",{children:Object(r.jsx)(T.a,{disabled:O,onClick:s,size:"small",children:Object(r.jsx)(sn.a,{})})})})]})};var ln,dn,jn,bn=function(e){var t=Object(d.d)(),n=Object(O.a)(t,2),r=n[0],c=n[1],i=Object(a.useMemo)((function(){return Object.fromEntries(r)}),[r]),s=i.page,o=void 0===s?"1":s,l=Object(jt.a)(i,["page"]),j=Object(u.c)(e);return{hasNextPage:parseInt(o)<j,hasPreviousPage:parseInt(o)>1,page:parseInt(o),pagesTotal:j,toFirstPage:function(){c(Object(W.a)({page:1},l))},toLastPage:function(){c(Object(W.a)({page:j},l))},toNextPage:function(){c(Object(W.a)({page:parseInt(o)+1},l))},toPage:function(e){c(Object(W.a)({page:parseInt(e)},l))},toPreviousPage:function(){c(Object(W.a)({page:parseInt(o)-1},l))}}},pn=Object(v.a)((function(e){return e.comments.entities}),(function(e){return e})),mn=Object(v.a)((function(e){return e.comments.pagination.total}),(function(e){return e})),fn=Object(x.b)("movie/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o,u,l,d;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([te.a.get("/trakt/movies/".concat(t,"/stats")),te.a.get("/trakt/movies/".concat(t,"?extended=full")),te.a.get("/trakt/movies/".concat(t,"/comments/highest")),te.a.get("/trakt/movies/".concat(t,"/people")),te.a.get("/trakt/movies/".concat(t,"/ratings")),te.a.get("/trakt/movies/".concat(t,"/related?extended=full"))]);case 4:return a=e.sent,c=Object(O.a)(a,6),i=c[0],s=c[1],o=c[2],u=c[3],l=c[4],d=c[5],e.abrupt("return",{comments:o.data,people:u.data,ratings:l.data,related:d.data,stats:i.data,summary:s.data});case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",r(e.t0.toString()));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),hn=Object(x.c)({extraReducers:(ln={},Object(Z.a)(ln,Kt.fulfilled,(function(e,t){var n=t.meta.arg,r=e.comments.findIndex((function(e){return e.id===n}));-1!==r&&e.comments.splice(r,1)})),Object(Z.a)(ln,fn.fulfilled,(function(e,t){return t.payload})),Object(Z.a)(ln,Ut.fulfilled,(function(e,t){var n=e.comments.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.comments[n]=t.payload)})),ln),initialState:{comments:[],people:null,ratings:null,related:[],stats:null,summary:null},name:"movie",reducers:{}}).reducer,On=Object(x.b)("show/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o,u,l,d,j;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([te.a.get("/trakt/shows/".concat(t,"?extended=full")),te.a.get("/trakt/shows/".concat(t,"/comments/highest")),te.a.get("/trakt/shows/".concat(t,"/people")),te.a.get("/trakt/shows/".concat(t,"/ratings")),te.a.get("/trakt/shows/".concat(t,"/related?extended=full")),te.a.get("/trakt/shows/".concat(t,"/stats")),te.a.get("/trakt/shows/".concat(t,"/seasons?extended=episodes"))]);case 4:return a=e.sent,c=Object(O.a)(a,7),i=c[0],s=c[1],o=c[2],u=c[3],l=c[4],d=c[5],j=c[6],e.abrupt("return",{comments:s.data,people:o.data,ratings:u.data,related:l.data,seasons:j.data.reverse(),stats:d.data,summary:i.data});case 16:return e.prev=16,e.t0=e.catch(1),e.abrupt("return",r(e.t0.toString()));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,n){return e.apply(this,arguments)}}()),vn=Object(x.c)({extraReducers:(dn={},Object(Z.a)(dn,On.fulfilled,(function(e,t){return t.payload})),Object(Z.a)(dn,Kt.fulfilled,(function(e,t){var n=t.meta.arg,r=e.comments.findIndex((function(e){return e.id===n}));-1!==r&&e.comments.splice(r,1)})),Object(Z.a)(dn,Ut.fulfilled,(function(e,t){var n=e.comments.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.comments[n]=t.payload)})),dn),initialState:{comments:[],people:null,ratings:null,related:[],seasons:[],stats:null,summary:null},name:"show",reducers:{}}).reducer,gn=Object(x.b)("comments/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.page,c=t.slug,i=t.sort,s=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/".concat(r,"/").concat(c,"/comments/").concat(i,"?page=").concat(a,"&limit=").concat(tt));case 5:return o=e.sent,e.abrupt("return",{entities:o.data,total:parseInt(o.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",s(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}());var xn=Object(x.c)({extraReducers:(jn={},Object(Z.a)(jn,gn.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),Object(Z.a)(jn,Jt.fulfilled,(function(e,t){e.entities.unshift(t.payload)})),Object(Z.a)(jn,Kt.fulfilled,(function(e,t){var n=t.meta.arg,r=e.entities.findIndex((function(e){return e.id===n}));-1!==r&&e.entities.splice(r,1)})),Object(Z.a)(jn,Ut.fulfilled,(function(e,t){var n=e.entities.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.entities[n]=t.payload)})),jn),initialState:{entities:[],pagination:{total:0}},name:"comments",reducers:{}}).reducer,yn=Object(v.a)((function(e){return e.movie}),(function(e){return e})),wn=Object(v.a)((function(e){return e.show}),(function(e){return e})),kn=Object(C.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},commentsRoot:{"& > *:not(:last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},overview:{marginBottom:e.spacing(3)},root:{padding:e.spacing(2),position:"relative"}}})),Pn=[["Comments","#comments"]];var Sn=function(e){var t,n,c,i=e.entity,s=kn(),o=Object(a.useMemo)(Y,[]),d=Object(a.useRef)(!0),b=Object(l.j)().slug,p=Object(u.b)(),v=bn(mn),g=v.hasNextPage,x=v.hasPreviousPage,y=v.page,w=v.pagesTotal,k=v.toFirstPage,P=v.toLastPage,S=v.toNextPage,R=v.toPreviousPage,I=Object(u.c)("movies"===i?yn:wn),N=Object(u.c)(pn),C=Object(u.c)((function(e){return o(e,["comments/fetch","movie/fetch","show/fetch"])})),z=Object(u.c)((function(e){return U(e,"users/comments/post")})),M=Object(a.useState)("highest"),V=Object(O.a)(M,2),A=V[0],E=V[1];return Object(a.useEffect)((function(){if(d.current)return d.current=!1,void p(function(e){var t=e.entity,n=e.slug,r="movies"===t?fn:On;return function(){var t=Object($.a)(X.a.mark((function t(a){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([a(r(n)),a(gn(e))]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({entity:i,page:y,slug:b,sort:"highest"}));p(gn({entity:i,page:y,slug:b,sort:A}))}),[p,i,y,b,A]),Object(r.jsxs)("div",{className:s.root,children:[Object(r.jsxs)("div",{className:s.fixedColumn,children:[Object(r.jsx)(Ee,{entity:i,slug:b,tmdbId:null===(t=I.summary)||void 0===t?void 0:t.ids.tmdb}),Object(r.jsx)(h.a,{children:Pn.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(L.a,{button:!0,component:"a",href:c,children:Object(r.jsx)(F.a,{children:n})}),Object(r.jsx)(f.a,{})]},c)}))}),Object(r.jsxs)("div",{className:s.buttons,children:[Object(r.jsx)(fe,{entity:i,slug:b}),Object(r.jsx)(Me,{entity:i,slug:b}),Object(r.jsx)(Se,{entity:i,slug:b}),Object(r.jsx)(Ze,{entity:i,slug:b})]})]}),Object(r.jsxs)("div",{className:s.content,children:[Object(r.jsxs)("div",{className:s.overview,id:"overview",children:[Object(r.jsx)(m.a,{display:"block",variant:"overline",children:"All comments about:"}),Object(r.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(n=I.summary)||void 0===n?void 0:n.title," "]}),Object(r.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(c=I.summary)||void 0===c?void 0:c.year})]}),Object(r.jsx)(m.a,{id:"actors",variant:"h5",children:"Add comment"}),Object(r.jsx)(Qt,{disabled:z,onSubmit:function(e){var t=e.reset,n=Object(jt.a)(e,["reset"]);p(Jt(Object(W.a)(Object(W.a)({},n),{},{entity:i,slug:b}))).then(t)}}),Object(r.jsxs)(j.a,{alignItems:"flex-end",classes:{root:s.commentsRoot},container:!0,justify:"space-between",children:[Object(r.jsx)(j.a,{item:!0,children:Object(r.jsx)(nn,{onChange:E,value:A})}),Object(r.jsx)(j.a,{item:!0,children:Object(r.jsx)(un,{disabled:C,hasNextPage:g,hasPreviousPage:x,onFirstPage:k,onLastPage:P,onNextPage:S,onPreviousPage:R,page:y,pagesTotal:w,variant:"inlined"})}),N.map((function(e){return Object(r.jsx)(j.a,{item:!0,xs:12,children:Zt(e)},e.id)})),Object(r.jsx)("div",{children:"\u1cbc"}),Object(r.jsx)(j.a,{item:!0,children:Object(r.jsx)(un,{disabled:C,hasNextPage:g,hasPreviousPage:x,onFirstPage:k,onLastPage:P,onNextPage:S,onPreviousPage:R,page:y,pagesTotal:w,variant:"inlined"})})]})]})]})},Rn=Object(C.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:e.spacing(2),position:"relative"}}})),In=[["Overview","#overview"],["Actors","#actors"],["Comments","#comments"],["Related","#related"]];var Nn=function(){var e,t,n,c,i,s,o,b=Rn(),p=Object(u.b)(),v=Object(l.j)().slug,g=Object(u.c)(yn);return Object(a.useEffect)((function(){p(fn(v))}),[p,v]),Object(r.jsxs)("div",{className:b.root,children:[Object(r.jsxs)("div",{className:b.fixedColumn,children:[Object(r.jsx)(Ee,{entity:"movies",slug:v,tmdbId:null===(e=g.summary)||void 0===e?void 0:e.ids.tmdb}),Object(r.jsx)(h.a,{children:In.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(L.a,{button:!0,component:"a",href:c,children:Object(r.jsx)(F.a,{children:n})}),Object(r.jsx)(f.a,{})]},c)}))}),Object(r.jsxs)("div",{className:b.buttons,children:[Object(r.jsx)(fe,{entity:"movies",slug:v}),Object(r.jsx)(Me,{entity:"movies",slug:v}),Object(r.jsx)(Se,{entity:"movies",slug:v}),Object(r.jsx)(Ze,{entity:"movies",slug:v})]})]}),Object(r.jsxs)("div",{className:b.content,children:[Object(r.jsxs)("div",{id:"overview",children:[Object(r.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(t=g.summary)||void 0===t?void 0:t.title," "]}),Object(r.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(n=g.summary)||void 0===n?void 0:n.year})]}),Object(r.jsx)("div",{className:b.facts,children:rt(g).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.jsxs)("span",{className:b.factsItem,children:[Object(r.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(r.jsx)(m.a,{display:"inline",variant:"body2",children:a})]},n)}))}),Object(r.jsxs)(m.a,{variant:"body2",children:[Object(r.jsxs)("i",{children:[null===(c=g.summary)||void 0===c?void 0:c.tagline," "]}),null===(i=g.summary)||void 0===i?void 0:i.overview]}),Object(r.jsx)(m.a,{id:"actors",variant:"h5",children:"Actors"}),Object(r.jsx)(j.a,{container:!0,spacing:1,style:{overflow:"auto"},wrap:"nowrap",children:null===(s=g.people)||void 0===s?void 0:s.cast.map((function(e){var t=e.character,n=e.person;return Object(r.jsx)(j.a,{item:!0,style:{flex:"0 0 128px"},children:Object(r.jsxs)(Ee,{entity:"people",size:"small",slug:n.ids.slug,tmdbId:n.ids.tmdb,children:[Object(r.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[n.name," "]}),Object(r.jsx)(m.a,{variant:"caption",children:t})]})},n.name)}))}),Object(r.jsxs)(j.a,{container:!0,direction:"column",spacing:1,children:[Object(r.jsxs)(j.a,{alignItems:"center",container:!0,item:!0,justify:"space-between",xs:12,children:[Object(r.jsx)(m.a,{id:"comments",variant:"h5",children:"Comments"}),Object(r.jsxs)(A.a,{color:"secondary",component:d.b,size:"small",to:"comments",variant:"outlined",children:["All ",null===(o=g.stats)||void 0===o?void 0:o.comments," comments"]})]}),g.comments.map((function(e){return Object(r.jsx)(j.a,{item:!0,xs:12,children:Zt(e)},e.id)}))]}),Object(r.jsx)(m.a,{id:"related",variant:"h5",children:"Related"}),Object(r.jsx)(j.a,{container:!0,spacing:1,children:g.related.map((function(e){return Object(r.jsx)(j.a,{item:!0,xs:2,children:Object(r.jsx)($e,{entity:"movies",overallRating:dt(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.slug)}))})]})]})},Cn=Object(v.a)((function(e){return e.movies.entities}),(function(e){return e})),zn=Object(v.a)((function(e){return e.movies.pagination.total}),(function(e){return e})),Wn=Object(x.b)("movies/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.category,a=t.page,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/movies/".concat(r,"?page=").concat(a,"&limit=").concat(nt,"&extended=full"));case 5:return i=e.sent,"popular"===r&&(i.data=i.data.map((function(e){return{movie:e}}))),e.abrupt("return",{entities:i.data,total:parseInt(i.headers["x-pagination-page-count"])});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Ln=Object(x.c)({extraReducers:Object(Z.a)({},Wn.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"movies",reducers:{}}).reducer;function Fn(e){var t=e.category,n=e.movies;switch(t){case"trending":return function(e){return e.map((function(e){var t=e.movie,n=e.watchers,a=void 0===n?0:n,c=[];return a&&c.push("".concat(a," people watching")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:c,entity:"movies",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"popular":return function(e){return e.map((function(e){var t=e.movie;return Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{entity:"movies",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"recommended":return function(e){return e.map((function(e){var t=e.movie,n=e.user_count,a=void 0===n?0:n,c=[];return a&&c.push("".concat(a," people")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:c,entity:"movies",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"watched":return function(e){return e.map((function(e){var t=e.movie,n=e.play_count,a=void 0===n?0:n,c=e.watcher_count,i=void 0===c?0:c,s=[];return a&&s.push("".concat(a," plays")),i&&s.push("".concat(i," watches")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:s,entity:"movies",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"anticipated":return function(e){return e.map((function(e){var t=e.list_count,n=void 0===t?0:t,a=e.movie,c=[];return n&&c.push("In ".concat(n," lists")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:c,entity:"movies",overallRating:dt(a.rating,0),primary:a.title,secondary:a.year,slug:a.ids.slug,tmdbId:a.ids.tmdb})},a.ids.trakt)}))}(n);default:return null}}var Mn=function(e){var t=e.category,n=Object(u.b)(),c=bn(zn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,d=c.toFirstPage,b=c.toLastPage,p=c.toNextPage,m=c.toPreviousPage,f=Object(u.c)(Cn);return Object(a.useEffect)((function(){n(Wn({category:t,page:o}))}),[t,n,o]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.a,{container:!0,children:Fn({category:t,movies:f})}),Object(r.jsx)(un,{hasNextPage:i,hasPreviousPage:s,onFirstPage:d,onLastPage:b,onNextPage:p,onPreviousPage:m,page:o,pagesTotal:l})]})},Vn=Object(v.a)((function(e){return e.person}),(function(e){return e})),An=Object(x.b)("person/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s,o;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([te.a.get("/trakt/people/".concat(t,"?extended=full")),te.a.get("/trakt/people/".concat(t,"/movies?extended=full")),te.a.get("/trakt/people/".concat(t,"/shows?extended=full"))]);case 4:return a=e.sent,c=Object(O.a)(a,3),i=c[0],s=c[1],o=c[2],e.abrupt("return",{movies:s.data,shows:o.data,summary:i.data});case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",r(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),En=Object(x.c)({extraReducers:Object(Z.a)({},An.fulfilled,(function(e,t){return t.payload})),initialState:{movies:[],shows:[],summary:null},name:"person",reducers:{}}).reducer,Tn=Object(C.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:e.spacing(2),position:"relative"}}})),Bn=[["Overview","#overview"],["Movies","#movies"],["Shows","#shows"]];function _n(e){if(!e)return[];var t=e.summary;return[["Birthplace",null===t||void 0===t?void 0:t.birthplace],["Birthday",new Date(null===t||void 0===t?void 0:t.birthday).toLocaleDateString("da-Dk")]]}var Dn=function(){var e,t,n,c,i,s,o,d=Tn(),b=Object(u.b)(),p=Object(l.j)().slug,v=Object(u.c)(Vn);return Object(a.useEffect)((function(){b(An(p))}),[b,p]),Object(r.jsxs)("div",{className:d.root,children:[Object(r.jsxs)("div",{className:d.fixedColumn,children:[Object(r.jsx)(Ee,{entity:"people",slug:p,tmdbId:null===(e=v.summary)||void 0===e?void 0:e.ids.tmdb}),Object(r.jsx)(h.a,{children:Bn.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(L.a,{button:!0,component:"a",href:c,children:Object(r.jsx)(F.a,{children:n})}),Object(r.jsx)(f.a,{})]},c)}))}),Object(r.jsx)("div",{className:d.buttons,children:Object(r.jsx)(fe,{entity:"people",slug:p})})]}),Object(r.jsxs)("div",{className:d.content,children:[Object(r.jsx)("div",{id:"overview",children:Object(r.jsx)(m.a,{display:"inline",variant:"h4",children:null===(t=v.summary)||void 0===t?void 0:t.name})}),Object(r.jsx)("div",{className:d.facts,children:_n(v).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.jsxs)("span",{className:d.factsItem,children:[Object(r.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(r.jsx)(m.a,{display:"inline",variant:"body2",children:a})]},n)}))}),Object(r.jsx)(m.a,{variant:"body2",children:null===(n=v.summary)||void 0===n?void 0:n.biography}),Object(r.jsx)(m.a,{id:"movies",variant:"h5",children:"Movies"}),Object(r.jsx)(j.a,{container:!0,spacing:1,children:null===(c=v.movies)||void 0===c||null===(i=c.cast)||void 0===i?void 0:i.map((function(e){var t=e.character,n=e.movie;return Object(r.jsx)(j.a,{item:!0,xs:2,children:Object(r.jsx)($e,{entity:"movies",overallRating:dt(n.rating,0),primary:n.title,secondary:n.year,slug:n.ids.slug,tmdbId:n.ids.tmdb,children:Object(r.jsx)(m.a,{variant:"caption",children:t})})},n.ids.slug)}))}),Object(r.jsx)(m.a,{id:"shows",variant:"h5",children:"Shows"}),Object(r.jsx)(j.a,{container:!0,spacing:1,children:null===(s=v.shows)||void 0===s||null===(o=s.cast)||void 0===o?void 0:o.map((function(e){var t=e.character,n=e.show;return Object(r.jsx)(j.a,{item:!0,xs:2,children:Object(r.jsx)($e,{entity:"shows",overallRating:dt(n.rating,0),primary:n.title,secondary:n.year,slug:n.ids.slug,tmdbId:n.ids.tmdb,children:Object(r.jsx)(m.a,{variant:"caption",children:t})})},n.ids.slug)}))})]})]})},qn=Object(v.a)((function(e){return e.search.entities}),(function(e){return e})),Gn=Object(v.a)((function(e){return e.search.pagination.total}),(function(e){return e})),Hn=Object(x.b)("search/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.entity,a=t.page,c=t.query,i=n.rejectWithValue,e.prev=2,r=ot(r),e.next=6,te.a.get("/trakt/search/".concat(r,"?query=").concat(c,"&page=").concat(a,"&limit=").concat(nt,"?extended=full"));case 6:return s=e.sent,e.abrupt("return",{entities:s.data,total:parseInt(s.headers["x-pagination-page-count"])});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Jn=Object(x.c)({extraReducers:Object(Z.a)({},Hn.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"search",reducers:{}}).reducer;var Kn=function(e){var t=e.entity,n=Object(u.b)(),c=bn(Gn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,b=c.toFirstPage,m=c.toLastPage,f=c.toNextPage,h=c.toPreviousPage,v=Object(d.d)(),g=Object(O.a)(v,2),x=g[0],y=g[1],w=Object(a.useMemo)((function(){return Object.fromEntries(x)}),[x]).query,k=void 0===w?"":w,P=Object(u.c)((function(e){return U(e,"search/fetch")})),S=Object(u.c)(qn);return Object(a.useEffect)((function(){n(Hn({entity:t,page:o,query:k}))}),[n,t,o,k]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(p.a,{m:2,children:Object(r.jsx)(It.a,{color:"secondary",defaultValue:k,label:"What are you looking for?",onKeyDown:function(e){13===e.keyCode&&y({query:e.target.value})},size:"small",variant:"outlined"})}),Object(r.jsx)(j.a,{container:!0,children:S.map((function(e){return it(e,j.a,{item:!0,lg:2,md:3,sm:6,xs:12})}))}),Object(r.jsx)(un,{disabled:P,hasNextPage:i,hasPreviousPage:s,onFirstPage:b,onLastPage:m,onNextPage:f,onPreviousPage:h,page:o,pagesTotal:l})]})},Un=Object(C.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:e.spacing(2),position:"relative"}}})),Yn=[["Overview","#overview"],["Actors","#actors"],["Seasons","#seasons"],["Comments","#comments"],["Related","#related"]];var Qn=function(){var e,t,n,c,i,s,o,b=Un(),p=Object(u.b)(),v=Object(l.j)().slug,g=Object(u.c)(wn);return Object(a.useEffect)((function(){p(On(v))}),[p,v]),Object(r.jsxs)("div",{className:b.root,children:[Object(r.jsxs)("div",{className:b.fixedColumn,children:[Object(r.jsx)(Ee,{entity:"shows",slug:v,tmdbId:null===(e=g.summary)||void 0===e?void 0:e.ids.tmdb}),Object(r.jsx)(h.a,{children:Yn.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(L.a,{button:!0,component:"a",href:c,children:Object(r.jsx)(F.a,{children:n})}),Object(r.jsx)(f.a,{})]},c)}))}),Object(r.jsxs)("div",{className:b.buttons,children:[Object(r.jsx)(fe,{entity:"shows",slug:v}),Object(r.jsx)(Me,{entity:"shows",slug:v}),Object(r.jsx)(Se,{entity:"shows",slug:v}),Object(r.jsx)(Ze,{entity:"shows",slug:v})]})]}),Object(r.jsxs)("div",{className:b.content,children:[Object(r.jsxs)("div",{id:"overview",children:[Object(r.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(t=g.summary)||void 0===t?void 0:t.title," "]}),Object(r.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(n=g.summary)||void 0===n?void 0:n.year})]}),Object(r.jsx)("div",{className:b.facts,children:rt(g).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.jsxs)("span",{className:b.factsItem,children:[Object(r.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(r.jsx)(m.a,{display:"inline",variant:"body2",children:a})]},n)}))}),Object(r.jsxs)(m.a,{variant:"body2",children:[Object(r.jsxs)("i",{children:[null===(c=g.summary)||void 0===c?void 0:c.tagline," "]}),null===(i=g.summary)||void 0===i?void 0:i.overview]}),Object(r.jsx)(m.a,{id:"actors",variant:"h5",children:"Actors"}),Object(r.jsx)(j.a,{container:!0,spacing:1,style:{overflow:"auto"},wrap:"nowrap",children:null===(s=g.people)||void 0===s?void 0:s.cast.map((function(e){var t=e.character,n=e.person;return Object(r.jsx)(j.a,{item:!0,style:{flex:"0 0 128px"},children:Object(r.jsxs)(Ee,{entity:"people",size:"small",slug:n.ids.slug,tmdbId:n.ids.tmdb,children:[Object(r.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[n.name," "]}),Object(r.jsx)(m.a,{variant:"caption",children:t})]})},n.name)}))}),Object(r.jsx)(m.a,{id:"seasons",variant:"h5",children:"Seasons"}),Object(r.jsx)(j.a,{container:!0,spacing:1,children:g.seasons.map((function(e){var t,n,a;return Object(r.jsx)(j.a,{item:!0,xs:2,children:Object(r.jsxs)(Ee,{entity:"shows",season:e.number,slug:null===(t=g.summary)||void 0===t?void 0:t.ids.slug,tmdbId:null===(n=g.summary)||void 0===n?void 0:n.ids.tmdb,children:[Object(r.jsxs)(m.a,{variant:"body2",children:[0===e.number?"Specials":"Season ".concat(e.number)," "]}),Object(r.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[(null===(a=e.episodes)||void 0===a?void 0:a.length)||0," episodes"]})]})},e.number)}))}),Object(r.jsxs)(j.a,{container:!0,spacing:1,children:[Object(r.jsxs)(j.a,{alignItems:"center",container:!0,item:!0,justify:"space-between",xs:12,children:[Object(r.jsx)(m.a,{id:"comments",variant:"h5",children:"Comments"}),Object(r.jsxs)(A.a,{color:"secondary",component:d.b,size:"small",to:"comments",variant:"outlined",children:["All ",null===(o=g.stats)||void 0===o?void 0:o.comments," comments"]})]}),g.comments.map((function(e){return Object(r.jsx)(j.a,{item:!0,xs:12,children:Zt(e)},e.id)}))]}),Object(r.jsx)(m.a,{id:"related",variant:"h5",children:"Related"}),Object(r.jsx)(j.a,{container:!0,spacing:1,children:g.related.map((function(e){return Object(r.jsx)(j.a,{item:!0,xs:2,children:Object(r.jsx)($e,{entity:"shows",overallRating:dt(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.slug)}))})]})]})},Xn=Object(v.a)((function(e){return e.shows.entities}),(function(e){return e})),Zn=Object(v.a)((function(e){return e.shows.pagination.total}),(function(e){return e})),$n=Object(x.b)("shows/fetch",function(){var e=Object($.a)(X.a.mark((function e(t,n){var r,a,c,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.category,a=t.page,c=n.rejectWithValue,e.prev=2,e.next=5,te.a.get("/trakt/shows/".concat(r,"?page=").concat(a,"&limit=").concat(nt,"&extended=full"));case 5:return i=e.sent,"popular"===r&&(i.data=i.data.map((function(e){return{show:e}}))),e.abrupt("return",{entities:i.data,total:parseInt(i.headers["x-pagination-page-count"])});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),er=Object(x.c)({extraReducers:Object(Z.a)({},$n.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"shows",reducers:{}}).reducer;function tr(e){var t=e.category,n=e.shows;switch(t){case"trending":return function(e){return e.map((function(e){var t=e.show,n=e.watchers,a=void 0===n?0:n,c=[];return a&&c.push("".concat(a," people watching")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:c,entity:"shows",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"popular":return function(e){return e.map((function(e){var t=e.show;return Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{entity:"shows",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"recommended":return function(e){return e.map((function(e){var t=e.show,n=e.user_count,a=void 0===n?0:n,c=[];return a&&c.push("".concat(a," people")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:c,entity:"shows",overallRating:dt(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"watched":return function(e){return e.map((function(e){var t=e.play_count,n=void 0===t?0:t,a=e.show,c=e.watcher_count,i=void 0===c?0:c,s=[];return n&&s.push("".concat(n," plays")),i&&s.push("".concat(i," watches")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:s,entity:"shows",overallRating:dt(a.rating,0),primary:a.title,secondary:a.year,slug:a.ids.slug,tmdbId:a.ids.tmdb})},a.ids.trakt)}))}(n);case"anticipated":return function(e){return e.map((function(e){var t=e.list_count,n=void 0===t?0:t,a=e.show,c=[];return n&&c.push("In ".concat(n," lists")),Object(r.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(r.jsx)($e,{chips:c,entity:"shows",overallRating:dt(a.rating,0),primary:a.title,secondary:a.year,slug:a.ids.slug,tmdbId:a.ids.tmdb})},a.ids.trakt)}))}(n);default:return null}}var nr=function(e){var t=e.category,n=Object(u.b)(),c=bn(Zn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,d=c.toFirstPage,b=c.toLastPage,p=c.toNextPage,m=c.toPreviousPage,f=Object(u.c)(Xn);return Object(a.useEffect)((function(){n($n({category:t,page:o}))}),[t,n,o]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.a,{container:!0,children:tr({category:t,shows:f})}),Object(r.jsx)(un,{hasNextPage:i,hasPreviousPage:s,onFirstPage:d,onLastPage:b,onNextPage:p,onPreviousPage:m,page:o,pagesTotal:l})]})},rr=Object(v.a)((function(e){return e.users.profile.comments.entities}),(function(e){return e})),ar=(Object(v.a)((function(e){return e.users.profile.comments.pagination.total}),(function(e){return e})),Object(v.a)((function(e){return e.users.user.comments.entities}),(function(e){return e}))),cr=Object(v.a)((function(e){return e.users.user.comments.pagination.total}),(function(e){return e}));var ir=function(){var e=Object(u.b)(),t=Object(l.j)().userSlug,n=t===ct()?rr:ar,c=Object(u.c)(n),i=bn(cr),s=i.hasNextPage,o=i.hasPreviousPage,d=i.page,b=i.pagesTotal,m=i.toFirstPage,f=i.toLastPage,h=i.toNextPage,O=i.toPreviousPage;return Object(a.useEffect)((function(){e(Gt({page:d,userSlug:t}))}),[e,d,t]),c.length?Object(r.jsxs)(p.a,{p:2,children:[Object(r.jsx)(un,{hasNextPage:s,hasPreviousPage:o,onFirstPage:m,onLastPage:f,onNextPage:h,onPreviousPage:O,page:d,pagesTotal:b}),Object(r.jsx)(j.a,{container:!0,direction:"column",spacing:2,children:c.map((function(e){return Object(r.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(r.jsx)(j.a,{item:!0,style:{width:220},children:it(e)}),Object(r.jsx)(j.a,{item:!0,xs:!0,children:Zt(e.comment)})]},e.comment.id)}))})]}):"No comments found"},sr=Object(v.a)((function(e){return e.users.profile.list}),(function(e){return e})),or=Object(v.a)((function(e){return e.users.user.list}),(function(e){return e}));var ur=function(){var e=Object(l.j)(),t=e.id,n=e.userSlug,c=Object(u.b)(),i=Object(u.c)(n===ct()?sr:or);return Object(a.useEffect)((function(){c(ae({id:t,userSlug:n}))}),[c,t,n]),Object(r.jsx)(p.a,{p:2,children:Object(r.jsx)(j.a,{container:!0,spacing:1,children:i.items.map((function(e){return it(e,j.a,{item:!0,xs:2})}))})})};var lr=function(e){var t=e.description,n=e.itemCount,c=e.listSlug,i=e.name,s=e.privacy,o=e.username,l=e.userSlug,b=Object(a.useMemo)(Y,[]),f=Object(u.b)(),h=Object(u.c)((function(e){return b(e,["users/lists/remove","users/lists/update","users/lists"])})),v=Object(a.useState)(null),g=Object(O.a)(v,2),x=g[0],y=g[1],w=ct()===l,k="editing"===x,P="removing"===x,S=[Object(r.jsx)(m.a,{display:"inline",variant:"subtitle1",children:Object(r.jsx)(d.b,{to:"/app/users/".concat(l,"/lists/").concat(c),children:i})},"".concat(o,"-").concat(c,"-label-0")),Object(r.jsxs)(m.a,{display:"inline",variant:"body2",children:[" ","by ",Object(r.jsx)(d.b,{to:"/app/users/".concat(l),children:o})]},"".concat(o,"-").concat(c,"-label-1"))," | ",Object(r.jsxs)(m.a,{display:"inline",variant:"body2",children:[n," items"]},"".concat(o,"-").concat(c,"-label-2"))];return Object(r.jsxs)(r.Fragment,{children:[(k||P)&&h&&Object(r.jsx)(_.a,{color:"secondary"}),Object(r.jsxs)(p.a,{component:At.a,p:2,children:[Object(r.jsxs)(j.a,{alignItems:"center",container:!0,justify:"space-between",children:[Object(r.jsx)(j.a,{item:!0,children:S.map((function(e){return e}))}),w&&Object(r.jsxs)(j.a,{item:!0,children:[Object(r.jsx)(T.a,{onClick:function(){y(k?"default":"editing")},size:"small",children:Object(r.jsx)(Et.a,{fontSize:"small"})}),Object(r.jsx)(T.a,{onClick:function(){y("removing"),f(Pt(c))},size:"small",children:Object(r.jsx)(Tt.a,{fontSize:"small"})})]})]}),k?Object(r.jsx)(p.a,{mt:2,children:Object(r.jsx)(Ct,{description:t,disabled:h,isPrivate:"private"===s,name:i,onSubmit:function(e){e.reset;var t=Object(jt.a)(e,["reset"]);f(St(Object(W.a)(Object(W.a)({},t),{},{slug:c}))).then((function(){return y("default")}))}})}):Object(r.jsx)(qt.a,{allowDangerousHtml:!0,children:_t.a.shortnameToImage(t)})]})]})},dr=Object(C.a)((function(e){return{item:{transition:"0.25s"},root:{}}}));var jr=function(e){var t=e.items,n=dr(),c=Object(a.useRef)(),i=Object(a.useState)(0),s=Object(O.a)(i,2),o=s[0],u=s[1],l=Object(a.useState)(t.length-1),d=Object(O.a)(l,2),b=d[0],m=d[1];function f(){u(c.current.clientWidth)}function h(e){return function(){m(e)}}return Object(a.useEffect)((function(){return c.current&&(u(c.current.clientWidth),window.addEventListener("resize",f)),function(){return window.removeEventListener("resize",f)}}),[c]),Object(r.jsx)(j.a,{container:!0,direction:"row-reverse",onMouseLeave:function(){m(t.length-1)},ref:c,title:o,children:t.map((function(e,t){return Object(r.jsx)(p.a,{className:n.item,display:"inline-block",onMouseOver:h(t),overflow:"hidden",width:t===b?"52%":"12%",children:st(e,p.a,{width:.52*o+"px"})},t)}))})},br=Object(v.a)((function(e){return e.users.user.lists}),(function(e){return e}));var pr=function(){var e=Object(l.j)().userSlug,t=Object(u.b)(),n=Object(u.c)(e===ct()?be:br);return Object(a.useEffect)((function(){t(ie(e))}),[t,e]),n.length?Object(r.jsxs)(p.a,{p:2,children:[e===ct()&&Object(r.jsx)(p.a,{mb:2,textAlign:"right",children:Object(r.jsx)(A.a,{color:"secondary",component:d.b,to:"?addList",variant:"outlined",children:"Add list"})}),n.map((function(e){return Object(r.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(r.jsx)(j.a,{item:!0,children:Object(r.jsx)(p.a,{width:368,children:Object(r.jsx)(jr,{items:e.items.slice(0,5)})})}),Object(r.jsx)(j.a,{item:!0,xs:!0,children:Object(r.jsx)(lr,{description:e.description,itemCount:e.items.length,listSlug:e.ids.slug,name:e.name,privacy:e.privacy,username:e.user.username,userSlug:e.user.ids.slug})})]},e.ids.slug)}))]}):"No lists found"},mr=Object(v.a)((function(e){return e.users.user.ratings}),(function(e){return e}));var fr=function(){var e=Object(u.b)(),t=Object(l.j)().userSlug,n=Object(u.c)(t===ct()?qe:mr);return Object(a.useEffect)((function(){e(He(t))}),[e,t]),n.length?Object(r.jsx)(p.a,{p:2,children:Object(r.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e){return it(e,j.a,{item:!0,xs:2})}))})}):"No ratings found"},hr=Object(v.a)((function(e){return e.users.user.recommendations}),(function(e){return e}));var Or=function(){var e=Object(l.j)().userSlug,t=Object(u.b)(),n=Object(u.c)(e===ct()?ve:hr);return Object(a.useEffect)((function(){t(xe(e))}),[t,e]),n.length?Object(r.jsx)(p.a,{p:2,children:Object(r.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e){return it(e,j.a,{item:!0,xs:2})}))})}):"No ratings found"},vr=n(315),gr=n(311);Object(v.a)((function(e){return e.users.profile.comments.entities}),(function(e){return e}));function xr(){return Object(v.a)((function(e){return e.users.profile.followers.following}),(function(e,t){return t}),(function(e,t){var n=e.find((function(e){return e.slug===t}));return Boolean(n)}))}var yr=Object(x.b)("users/followers/fetch",Object($.a)(X.a.mark((function e(){var t,n,r,a,c,i,s,o=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:ct(),n=o.length>1?o[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,Promise.all([te.a.get("/api/users/".concat(t,"/followers")),te.a.get("/api/users/".concat(t,"/following"))]);case 5:return a=e.sent,c=Object(O.a)(a,2),i=c[0],s=c[1],e.abrupt("return",{followers:i.data,following:s.data});case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))),wr=Object(x.c)({extraReducers:Object(Z.a)({},yr.fulfilled,(function(e,t){return ne(t.meta.arg)?e:t.payload})),initialState:{followers:[],following:[]},name:"users/followers",reducers:{}}).reducer,kr=Object(x.b)("users/followers/follow",Object($.a)(X.a.mark((function e(){var t,n,r,a=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:ct(),n=a.length>1?a[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,te.a.post("/api/users/".concat(t,"/follow"));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))),Pr=Object(x.b)("users/followers/unfollow",Object($.a)(X.a.mark((function e(){var t,n,r,a=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:ct(),n=a.length>1?a[1]:void 0,r=n.rejectWithValue,e.prev=2,e.next=5,te.a.delete("/api/users/".concat(t,"/unfollow"));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",r(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))));var Sr=Object(x.c)({extraReducers:Object(Z.a)({},yr.fulfilled,(function(e,t){return ne(t.meta.arg)?t.payload:e})),initialState:{followers:[],following:[]},name:"users/followers",reducers:{}}).reducer,Rr=[["Ratings","ratings"],["Recommendations","recommendations"],["Watchlist","watchlist"],["Lists","lists"],["Comments","comments"]];function Ir(){return(Ir=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/api/users/".concat(t));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var Nr=function(){var e=Object(a.useMemo)(xr,[]),t=Object(l.j)().userSlug,n=Object(u.b)(),c=Object(a.useState)(!1),i=Object(O.a)(c,2),s=i[0],o=i[1],j=Object(u.c)((function(n){return e(n,t)}));return console.log(j),Object(a.useEffect)((function(){(function(e){return Ir.apply(this,arguments)})(t).then(o)}),[n,t]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(At.a,{square:!0,children:Object(r.jsx)(vr.a,{centered:!0,indicatorColor:"secondary",textColor:"secondary",value:!1,children:Rr.map((function(e){var n=Object(O.a)(e,2),a=n[0],c=n[1];return Object(r.jsx)(gr.a,{activeClassName:"Mui-selected",component:d.c,label:a,to:"/app/users/".concat(t,"/").concat(c)},c)}))})}),t!==ct()&&Object(r.jsx)(p.a,{p:2,textAlign:"right",children:Object(r.jsx)(E.a,{title:s?"Follow or unfollow":"This user is not traktor user",children:Object(r.jsx)("span",{children:Object(r.jsx)(A.a,{color:"secondary",disabled:!s,onClick:function(){var e;n(j?(e=t,function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Pr(e));case 2:return t.next=4,Promise.all([n(yr(e)),n(yr())]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):function(e){return function(){var t=Object($.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(kr(e));case 2:return t.next=4,Promise.all([n(yr(e)),n(yr())]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},variant:"outlined",children:j?"Unfollow":"Follow"})})})}),Object(r.jsx)(l.b,{})]})},Cr=Object(v.a)((function(e){return e.users.user.watchlist}),(function(e){return e}));var zr=function(){var e=Object(l.j)().userSlug,t=Object(u.b)(),n=Object(u.c)(e===ct()?Ie:Cr);return Object(a.useEffect)((function(){t(Ce(e))}),[t,e]),n.length?Object(r.jsx)(p.a,{p:2,children:Object(r.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e){return it(e,j.a,{item:!0,xs:2})}))})}):"No items"};function Wr(e){return["/pending","/fulfilled","/rejected"].some((function(t){return e.type.endsWith(t)}))}var Lr=Object(x.c)({extraReducers:function(e){e.addMatcher(Wr,(function(e,t){var n=t.type.split("/"),r=n.pop();e["".concat(n.join("/"))]="pending"===r}))},initialState:{},name:"loading",reducers:{}}).reducer,Fr=n(28),Mr=Object(Fr.c)({comments:Yt,followers:Sr,list:je,lists:Rt,ratings:Ye,recommendations:Pe,watchlist:Fe}),Vr=Object(Fr.c)({comments:Ht,followers:wr,list:ce,lists:se,ratings:Je,recommendations:ye,watchlist:ze}),Ar=Object(Fr.c)({profile:Mr,user:Vr}),Er=Object(x.a)({reducer:{comments:xn,loading:Lr,movie:hn,movies:Ln,notifications:R,person:En,search:Jn,show:vn,shows:er,users:Ar}});function Tr(){Vt();var e=Object(a.useMemo)(Y,[]),t=Object(u.c)((function(t){return e(t,["comments/fetch","movie/fetch","movies/fetch","person/fetch","search/fetch","show/fetch","shows/fetch","users/comments/fetch","users/list/fetch","users/lists/fetch","users/ratings/fetch","users/recommendations/fetch","users/watchlist/fetch"])}));return Object(r.jsxs)(r.Fragment,{children:[t&&Object(r.jsx)(Lt,{}),Object(r.jsx)(zt,{}),Object(r.jsxs)(l.e,{basename:"/app",children:[Object(r.jsx)(l.c,{element:Object(r.jsx)(l.a,{replace:!0,to:"movies/trending"}),path:"/"}),Object(r.jsxs)(l.c,{element:Object(r.jsx)(gt,{}),path:"/",children:[Object(r.jsxs)(l.c,{path:"movies",children:[Object(r.jsx)(l.c,{element:Object(r.jsx)(l.a,{replace:!0,to:"trending"}),path:"/"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Mn,{category:"trending"}),path:"trending"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Mn,{category:"popular"}),path:"popular"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Mn,{category:"recommended"}),path:"recommended"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Mn,{category:"watched"}),path:"watched"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Mn,{category:"anticipated"}),path:"anticipated"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Nn,{}),path:":slug"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Sn,{entity:"movies"}),path:":slug/comments"})]}),Object(r.jsxs)(l.c,{path:"shows",children:[Object(r.jsx)(l.c,{element:Object(r.jsx)(l.a,{replace:!0,to:"trending"}),path:"/"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(nr,{category:"trending"}),path:"trending"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(nr,{category:"popular"}),path:"popular"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(nr,{category:"recommended"}),path:"recommended"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(nr,{category:"watched"}),path:"watched"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(nr,{category:"anticipated"}),path:"anticipated"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Qn,{}),path:":slug"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Sn,{entity:"shows"}),path:":slug/comments"})]}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Dn,{}),path:"people/:slug"}),Object(r.jsxs)(l.c,{path:"search",children:[Object(r.jsx)(l.c,{element:Object(r.jsx)(l.a,{replace:!0,to:"all"}),path:"/"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Kn,{entity:"all"}),path:"all"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Kn,{entity:"movies"}),path:"movies"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Kn,{entity:"shows"}),path:"shows"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Kn,{entity:"people"}),path:"people"})]}),Object(r.jsxs)(l.c,{element:Object(r.jsx)(Nr,{}),path:"users/:userSlug",children:[Object(r.jsx)(l.c,{element:Object(r.jsx)(l.a,{replace:!0,to:"ratings"}),path:"/"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(fr,{}),path:"ratings"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Or,{}),path:"recommendations"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(zr,{}),path:"watchlist"}),Object(r.jsxs)(l.c,{path:"lists",children:[Object(r.jsx)(l.c,{element:Object(r.jsx)(pr,{}),path:"/"}),Object(r.jsx)(l.c,{element:Object(r.jsx)(ur,{}),path:":id"})]}),Object(r.jsx)(l.c,{element:Object(r.jsx)(ir,{}),path:"comments"})]})]}),Object(r.jsx)(l.c,{element:Object(r.jsx)(Ft,{}),path:"*"})]})]})}var Br=function(){return Object(r.jsx)(u.a,{store:Er,children:Object(r.jsxs)(d.a,{children:[Object(r.jsx)(o.a,{}),Object(r.jsx)(Tr,{})]})})};var _r=function(){return function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t(yr()),t(ie()),t(He()),t(xe()),t(Ce())]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};(0,Er.dispatch)(_r()).then((function(){s.a.render(Object(r.jsx)(Br,{}),document.getElementById("root"))}))}},[[248,1,2]]]);
//# sourceMappingURL=main.dda71e52.chunk.js.map