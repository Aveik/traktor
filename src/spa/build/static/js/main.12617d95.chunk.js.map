{"version":3,"sources":["redux/notifications/notifications.selectors.js","redux/notifications/notifications.slice.js","components/Notifications/Notification/Notification.component.jsx","components/Notifications/Notifications.component.jsx","components/Layout/Layout.styles.js","utils.js","components/Layout/CollapsingListItem/CollapsingListItem.styles.js","components/Layout/CollapsingListItem/CollapsingListItem.component.jsx","components/Layout/Layout.utils.js","components/Layout/Layout.component.jsx","components/NotFound/NotFound.component.jsx","redux/loading/loading.selectors.js","redux/modules/users/comments/comments.slice.js","components/Comments/Editor/Editor.component.jsx","components/Comments/Comment/Comment.styles.js","components/Comments/Comment/Comment.component.jsx","components/Comments/Comments.utils.js","components/Comments/Sort/Sort.component.jsx","components/Pagination/Pagination.component.jsx","hooks/usePagination.js","redux/modules/comments/comments.selectors.js","redux/modules/movie/movie.slice.js","redux/modules/show/show.slice.js","redux/modules/comments/comments.slice.js","redux/modules/movie/movie.selectors.js","redux/modules/show/show.selectors.js","modules/Comments/Comments.component.jsx","redux/modules/users/lists/lists.slice.js","redux/modules/users/list/list.slice.js","redux/modules/users/lists/lists.selectors.js","components/ListItemManager/ListItemManager.styles.js","components/ListItemManager/ListItemManager.component.jsx","components/Poster/Poster.component.jsx","components/Rating/Rating.component.jsx","redux/modules/users/ratings/ratings.selectors.js","redux/modules/users/ratings/ratings.slice.js","redux/modules/users/recommendations/recommendations.selectors.js","redux/modules/users/recommendations/recommendations.slice.js","redux/modules/users/watchlist/watchlist.selectors.js","redux/modules/users/watchlist/watchlist.slice.js","modules/Movie/Movie.component.jsx","redux/modules/movies/movies.selectors.js","redux/modules/movies/movies.slice.js","components/Tile/Tile.styles.js","components/Tile/Tile.component.jsx","modules/Movies/Movies.utils.js","modules/Movies/Movies.component.jsx","redux/modules/person/person.selectors.js","redux/modules/person/person.slice.js","modules/Person/Person.component.jsx","redux/modules/search/search.selectors.js","redux/modules/search/search.slice.js","modules/Search/Search.component.jsx","modules/Show/Show.component.jsx","redux/modules/shows/shows.selectors.js","redux/modules/shows/shows.slice.js","modules/Shows/Shows.component.jsx","redux/modules/users/comments/comments.selectors.js","modules/Users/Comments/Comments.component.jsx","redux/modules/users/list/list.selectors.js","modules/Users/List/List.component.jsx","modules/Users/Lists/Lists.component.jsx","modules/Users/Ratings/Ratings.component.jsx","modules/Users/Recommendations/Recommendations.component.jsx","modules/Users/Watchlist/Watchlist.component.jsx","redux/loading/loading.slice.js","redux/modules/users/index.js","redux/store.js","App.component.jsx","index.js"],"names":["selectNotifications","createSelector","state","notifications","matches","action","type","endsWith","createSlice","extraReducers","builder","addMatcher","meta","requestId","payload","initialState","name","reducers","createNotification","prepare","message","id","nanoid","reducer","removeNotification","actions","Notification","dispatch","useDispatch","onClick","Notifications","useSelector","Object","entries","map","makeStyles","drawerPaper","width","DEFAULTS","getUserSlug","document","cookie","split","reduce","acc","key","value","userSlug","transformEntityToSingular","entity","theme","nestedListItemGutters","paddingLeft","spacing","CollapsingListItem","children","listItemTextProps","props","classes","useStyles","useState","open","setOpen","e","preventDefault","ExpandLess","ExpandMore","in","disablePadding","React","Children","child","cloneElement","gutters","NAV_PATHS","nested","path","title","Layout","anchor","paper","color","variant","px","py","regularListItemProps","activeClassName","button","component","NavLink","to","primary","collapsingListItemProps","ml","NotFound","stateSelector","loading","selector","_","actionTypes","selectLoadingFlag","actionType","Boolean","selectLoadingFlagsReducedFactory","keys","filter","includes","some","fetchComments","createAsyncThunk","a","page","rejectWithValue","axios","get","response","entities","data","total","parseInt","headers","toString","postComment","comment","slug","spoiler","post","ids","removeComment","delete","updateComment","put","fulfilled","pagination","arg","index","findIndex","splice","Editor","onSubmit","setState","reset","htmlFor","onChange","target","checked","listItemRoot","marginBottom","Comment","createdAt","review","username","userRating","useMemo","fetching","canEdit","isEditing","isRemoving","root","MuiPaper","container","justify","item","display","Date","toLocaleString","label","size","Edit","fontSize","Delete","secondary","then","allowDangerousHtml","emoji","shortnameToImage","secondaryTypographyProps","renderComment","created_at","user","user_rating","SORT_OPTIONS","Sort","fullWidth","select","Pagination","disabled","hasNextPage","hasPreviousPage","onFirstPage","onLastPage","onNextPage","onPreviousPage","usePagination","pagesTotalSelector","useSearchParams","searchParams","setSearchParams","fromEntries","otherSearchProps","pagesTotal","toFirstPage","toLastPage","toNextPage","toPreviousPage","selectEntities","comments","selectPagesTotal","fetchMovie","Promise","all","statsResponse","summaryResponse","commentsResponse","peopleResponse","ratingsResponse","relatedResponse","people","ratings","related","stats","summary","fetchShow","seasonsResponse","seasons","sort","unshift","selectEntity","movie","show","Comments","fetchingSelector","isFirstRender","useRef","useParams","selectMovie","selectShow","setSort","useEffect","current","params","fn","fetchEntityAndComments","JSON","stringify","fetchLists","list","listItems","items","addList","removeList","push","fetchList","listResponse","itemsResponse","removeFromList","listSlug","addToList","addToListAndRefetch","removeFromListAndRefetch","users","lists","selectListsForManagerFactory","__","listed","listItemActionRoot","minWidth","ListItemManager","listsSelector","loadingSelector","anchorEl","setAnchorEl","listedOnCount","length","mirror","setMirror","handleClick","currentTarget","anchorOrigin","horizontal","vertical","onClose","transformOrigin","dense","subheader","disableRipple","edge","Poster","season","tmdbId","url","propTypes","PropTypes","func","isRequired","oneOf","number","string","Rating","initialValue","setValue","max","selectRating","result","find","rating","fetchRatings","postRating","recommendations","selectIsRecommended","recommendation","fetchRecommendations","postRecommendation","removeRecommendation","postRecommendationAndRefetch","removeRecommendationAndRefetch","watchlist","selectIsWatchlisted","fetchWatchlist","addToWatchlist","removeFromWatchlist","addToWatchlistAndRefetch","removeFromWatchlistAndRefetch","Movie","isRecommended","isWatchlisted","tmdb","alt","src","movies","fetchMovies","category","footer","bottom","padding","position","image","height","objectFit","borderBottom","palette","divider","borderRight","Tile","releaseYear","watchers","className","renderTiles","Link","md","sm","xl","xs","year","trakt","renderTrending","Movies","person","fetchPerson","moviesResponse","showsResponse","shows","Person","search","fetchSearchResults","query","Search","searchResults","Show","selectLoadingFlagReduced","fetchShows","Shows","List","Lists","canManage","allowComments","description","Ratings","Watchlist","pattern","parts","asyncState","pop","join","combineReducers","store","configureStore","App","basename","element","replace","Providers","init","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.12617d95.chunk.js","sourcesContent":["import { createSelector } from '@reduxjs/toolkit';\n\nconst selectNotifications = createSelector(\n  function (state) {\n    return state.notifications;\n  },\n  function (notifications) {\n    return notifications;\n  },\n);\n\nexport { selectNotifications };\n","import { createSlice, nanoid } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  return action.type.endsWith('/rejected');\n}\n\nconst { actions, reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      state[action.meta.requestId] = action.payload;\n    });\n  },\n  initialState: {},\n  name: 'notifications',\n  reducers: {\n    createNotification: {\n      prepare(message) {\n        return {\n          payload: {\n            id: nanoid(),\n            message,\n          },\n        };\n      },\n      reducer(state, action) {\n        state[action.payload.id] = action.payload.message;\n      },\n    },\n    removeNotification(state, action) {\n      delete state[action.payload];\n    },\n  },\n});\n\nconst { createNotification, removeNotification } = actions;\n\nexport { createNotification, removeNotification };\nexport default reducer;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { removeNotification } from '../../../redux/notifications/notifications.slice';\n\nfunction Notification({ id, message }) {\n  const dispatch = useDispatch();\n\n  function handleClick() {\n    dispatch(removeNotification(id));\n  }\n\n  return <div onClick={handleClick}>{message}</div>;\n}\n\nexport default Notification;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectNotifications } from '../../redux/notifications/notifications.selectors';\nimport Notification from './Notification/Notification.component';\n\nfunction Notifications() {\n  const notifications = useSelector(selectNotifications);\n  return Object.entries(notifications).map(([id, message]) => (\n    <Notification id={id} key={id} message={message} />\n  ));\n}\n\nexport default Notifications;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  drawerPaper: {\n    width: 256,\n  },\n});\n","const DEFAULTS = {\n  COMMENT_PAGE_SIZE: 20,\n  PAGE_SIZE: 40,\n};\n\nfunction parseCookie() {\n  return document.cookie.split('; ').reduce((acc, cookie) => {\n    const [key, value] = cookie.split('=');\n    acc[key] = value;\n    return acc;\n  }, {});\n}\n\nfunction getUserSlug() {\n  return process.env.NODE_ENV === 'development'\n    ? process.env.REACT_APP_MOCKED_USER_SLUG\n    : parseCookie().userSlug;\n}\n\nfunction transformEntityToSingular(entity) {\n  switch (entity) {\n    case 'movies':\n      return 'movie';\n    case 'shows':\n      return 'show';\n    case 'people':\n      return 'person';\n    // in case of search\n    default:\n      return 'movie,show,person';\n  }\n}\n\nexport { DEFAULTS, getUserSlug, transformEntityToSingular };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles(function (theme) {\n  return {\n    nestedListItemGutters: {\n      paddingLeft: theme.spacing(4),\n    },\n  };\n});\n","import {\n  Collapse as MuiCollapse,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport {\n  ExpandLess as ExpandLessIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nimport useStyles from './CollapsingListItem.styles';\n\nfunction CollapsingListItem({ children, listItemTextProps, ...props }) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  function handleClick(e) {\n    e.preventDefault();\n    setOpen(!open);\n  }\n\n  function renderChildren() {\n    return React.Children.map(children, function (child) {\n      return React.cloneElement(child, {\n        classes: { gutters: classes.nestedListItemGutters },\n      });\n    });\n  }\n\n  return (\n    <>\n      <MuiListItem {...props} onClick={handleClick}>\n        <MuiListItemText {...listItemTextProps} />\n        {open ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n      </MuiListItem>\n      <MuiCollapse in={open}>\n        <MuiList disablePadding>{renderChildren()}</MuiList>\n      </MuiCollapse>\n    </>\n  );\n}\n\nCollapsingListItem.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default CollapsingListItem;\n","import {\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { getUserSlug } from '../../utils';\nimport CollapsingListItem from './CollapsingListItem/CollapsingListItem.component';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/App.component.jsx in respective <Route> components.\nconst NAV_PATHS = [\n  {\n    nested: [\n      {\n        path: 'movies/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'movies/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'movies/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'movies/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'movies/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Movies',\n  },\n  {\n    nested: [\n      {\n        path: 'shows/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'shows/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'shows/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'shows/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'shows/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Shows',\n  },\n  {\n    nested: [\n      {\n        path: `users/${getUserSlug()}/ratings`,\n        title: 'Ratings',\n      },\n      {\n        path: `users/${getUserSlug()}/recommendations`,\n        title: 'Recommendations',\n      },\n      {\n        path: `users/${getUserSlug()}/watchlist`,\n        title: 'Watchlist',\n      },\n      {\n        path: `users/${getUserSlug()}/lists`,\n        title: 'Lists',\n      },\n      {\n        path: `users/${getUserSlug()}/comments`,\n        title: 'Comments',\n      },\n    ],\n    title: 'Profile',\n  },\n  {\n    nested: [\n      {\n        path: 'search/all',\n        title: 'All',\n      },\n      {\n        path: 'search/movies',\n        title: 'Movies',\n      },\n      {\n        path: 'search/shows',\n        title: 'Shows',\n      },\n      {\n        path: 'search/people',\n        title: 'People',\n      },\n    ],\n    title: 'Search',\n  },\n];\n\nfunction renderListItems() {\n  return NAV_PATHS.map(function ({ nested, path, title }) {\n    const regularListItemProps = {\n      activeClassName: 'Mui-selected',\n      button: true,\n      component: NavLink,\n      key: title,\n      to: path,\n    };\n\n    // Regular ListItem. No need for custom CollapsingListItem.\n    if (!nested && path) {\n      return (\n        <MuiListItem {...regularListItemProps}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    }\n\n    const children = nested.map(function ({ path, title }) {\n      return (\n        // Overwrite key and path props as we are iterating over nested items.\n        <MuiListItem {...regularListItemProps} key={title} to={path}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    });\n\n    const collapsingListItemProps = {\n      button: true,\n      key: title,\n      listItemTextProps: {\n        primary: title,\n      },\n    };\n\n    return (\n      <CollapsingListItem {...collapsingListItemProps}>\n        {children}\n      </CollapsingListItem>\n    );\n  });\n}\n\nexport { NAV_PATHS, renderListItems };\n","import {\n  Box as MuiBox,\n  Divider as MuiDivider,\n  Drawer as MuiDrawer,\n  Grid as MuiGrid,\n  List as MuiList,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { Outlet } from 'react-router-dom';\n\nimport Notifications from '../Notifications/Notifications.component';\nimport useStyles from './Layout.styles';\nimport { renderListItems } from './Layout.utils';\n\nfunction Layout() {\n  const classes = useStyles();\n\n  return (\n    <MuiGrid>\n      <MuiDrawer\n        anchor='left'\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        color=''\n        variant='permanent'\n      >\n        <MuiBox px={2} py={1}>\n          <MuiTypography variant='h6'>Traktor</MuiTypography>\n          <MuiTypography variant='caption'>v0.1</MuiTypography>\n        </MuiBox>\n        <MuiDivider />\n        <MuiList disablePadding>{renderListItems()}</MuiList>\n      </MuiDrawer>\n      <MuiBox ml={32}>\n        <Notifications />\n        <Outlet />\n      </MuiBox>\n    </MuiGrid>\n  );\n}\n\nexport default Layout;\n","import React from 'react';\n\nfunction NotFound() {\n  return <h1>404 not found</h1>;\n}\n\nexport default NotFound;\n","import { createSelector } from '@reduxjs/toolkit';\n\nfunction stateSelector(state) {\n  return state.loading;\n}\n\n// Action types can be a string or array of strings\nfunction selector(_, actionTypes) {\n  return actionTypes;\n}\n\nconst selectLoadingFlag = createSelector([stateSelector, selector], function (\n  loading,\n  actionType,\n) {\n  return Boolean(loading[actionType]);\n});\n\nfunction selectLoadingFlagsFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state.loading)\n      .filter((action) => actionTypes.includes(action))\n      .map((action) => state.loading[action]);\n  });\n}\n\nfunction selectLoadingFlagsReducedFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state)\n      .filter((action) => actionTypes.includes(action))\n      .some((action) => state[action]);\n  });\n}\n\nexport {\n  selectLoadingFlag,\n  selectLoadingFlagsFactory,\n  selectLoadingFlagsReducedFactory,\n};\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  DEFAULTS,\n  getUserSlug,\n  transformEntityToSingular,\n} from '../../../../utils';\n\nconst fetchComments = createAsyncThunk('users/comments/fetch', async function (\n  { page, userSlug = getUserSlug() },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/users/${userSlug}/comments?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst postComment = createAsyncThunk('users/comments/post', async function (\n  { comment, entity, slug, spoiler = false },\n  { rejectWithValue },\n) {\n  entity = transformEntityToSingular(entity);\n  try {\n    const response = await axios.post('/trakt/comments', {\n      comment,\n      [entity]: { ids: { slug } },\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeComment = createAsyncThunk('users/comments/remove', async function (\n  id,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/comments/${id}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst updateComment = createAsyncThunk('users/comments/update', async function (\n  { comment, id, spoiler },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.put(`/trakt/comments/${id}`, {\n      comment,\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex(\n        ({ comment }) => comment.id === id,\n      );\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        ({ comment }) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.entities[index].comment = action.payload;\n      }\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'users/comments',\n  reducers: {},\n});\n\nexport { fetchComments, postComment, removeComment, updateComment };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nfunction Editor({ comment = '', onSubmit, spoiler = false }) {\n  const [state, setState] = useState({\n    comment,\n    spoiler,\n  });\n\n  function handleCommentChange({ target: { value } }) {\n    setState({\n      ...state,\n      comment: value,\n    });\n  }\n\n  function handleSpoilerChange({ target: { checked } }) {\n    setState({\n      ...state,\n      spoiler: checked,\n    });\n  }\n\n  function reset() {\n    setState({\n      comment,\n      spoiler,\n    });\n  }\n\n  function handleSubmit() {\n    onSubmit({ comment: state.comment, reset, spoiler: state.spoiler });\n  }\n\n  return (\n    <>\n      <label htmlFor='comment'>Type your comment</label>\n      <br />\n      <textarea\n        id='comment'\n        onChange={handleCommentChange}\n        value={state.comment}\n      />\n      <br />\n      <input\n        checked={state.spoiler}\n        id='spoiler'\n        onChange={handleSpoilerChange}\n        type='checkbox'\n      />\n      <label htmlFor='spoiler'>Is this spoiler?</label>\n      <br />\n      <button onClick={handleSubmit} type='button'>\n        Submit\n      </button>\n    </>\n  );\n}\n\nEditor.propTypes = {\n  comment: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired,\n  spoiler: PropTypes.bool,\n};\n\nexport default Editor;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemRoot: {\n    '&:not(:last-child)': {\n      marginBottom: 8,\n    },\n  },\n});\n","import {\n  Chip as MuiChip,\n  Grid as MuiGrid,\n  IconButton as MuiIconButton,\n  LinearProgress as MuiLinearProgress,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Paper as MuiPaper,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport { Delete as DeleteIcon, Edit as EditIcon } from '@material-ui/icons';\nimport emoji from 'emoji-toolkit';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport {\n  removeComment,\n  updateComment,\n} from '../../../redux/modules/users/comments/comments.slice';\nimport { getUserSlug } from '../../../utils';\nimport Editor from '../Editor/Editor.component';\nimport useStyles from './Comment.styles';\n\nfunction Comment({\n  comment,\n  createdAt,\n  id,\n  review,\n  spoiler,\n  username,\n  userRating,\n  userSlug,\n}) {\n  const selector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selector(state, ['users/comments/remove', 'users/comments/update']),\n  );\n  const [state, setState] = useState(null);\n  const canEdit = getUserSlug() === userSlug;\n  const [isEditing, isRemoving] = [state === 'editing', state === 'removing'];\n\n  function toggleEditMode() {\n    if (isEditing) {\n      setState('default');\n      return;\n    }\n    setState('editing');\n  }\n\n  //@TODO: unwrap promise and add .catch() as removing can fail\n  function handleRemove() {\n    setState('removing');\n    dispatch(removeComment(id));\n  }\n\n  //@TODO: unwrap promise and add .catch() as editing can fail\n  function handleSubmit({ reset, ...comment }) {\n    dispatch(\n      updateComment({\n        ...comment,\n        id,\n      }),\n    ).then(() => setState('default'));\n  }\n\n  return (\n    <>\n      {fetching && (isEditing || isRemoving) && <MuiLinearProgress />}\n      <MuiListItem\n        classes={{\n          root: classes.listItemRoot,\n        }}\n        component={MuiPaper}\n      >\n        <MuiListItemText\n          primary={\n            <MuiGrid container justify='space-between'>\n              <MuiGrid item>\n                <MuiTypography display='inline' variant='body2'>\n                  {review ? 'Review' : 'Shout'} by {username}\n                </MuiTypography>\n                <MuiTypography display='inline' variant='caption'>\n                  {` | ${new Date(createdAt).toLocaleString('da-Dk')} \n                ${userRating ? `| rated ${userRating} stars` : ''}`}\n                  {spoiler && (\n                    <>\n                      {' | '} <MuiChip label='Spoiler' size='small' />\n                    </>\n                  )}\n                </MuiTypography>\n              </MuiGrid>\n              {canEdit && (\n                <MuiGrid item>\n                  <MuiIconButton onClick={toggleEditMode} size='small'>\n                    <EditIcon fontSize='small' />\n                  </MuiIconButton>\n                  <MuiIconButton onClick={handleRemove} size='small'>\n                    <DeleteIcon fontSize='small' />\n                  </MuiIconButton>\n                </MuiGrid>\n              )}\n            </MuiGrid>\n          }\n          secondary={\n            isEditing ? (\n              <Editor\n                comment={comment}\n                onSubmit={handleSubmit}\n                spoiler={spoiler}\n              />\n            ) : (\n              <ReactMarkdown allowDangerousHtml>\n                {emoji.shortnameToImage(comment)}\n              </ReactMarkdown>\n            )\n          }\n          secondaryTypographyProps={{\n            component: 'div',\n          }}\n        />\n      </MuiListItem>\n    </>\n  );\n}\nComment.propTypes = {\n  comment: PropTypes.string.isRequired,\n  createdAt: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  review: PropTypes.bool.isRequired,\n  spoiler: PropTypes.bool.isRequired,\n  username: PropTypes.string.isRequired,\n  userRating: PropTypes.number,\n  userSlug: PropTypes.string.isRequired,\n};\nexport default Comment;\n","import React from 'react';\n\nimport Comment from './Comment/Comment.component';\n\nfunction renderComment(item) {\n  const props = {\n    comment: item.comment,\n    createdAt: item.created_at,\n    id: item.id,\n    review: item.review,\n    spoiler: item.spoiler,\n    username: item.user.username,\n    userRating: item.user_rating,\n    userSlug: item.user.ids.slug,\n  };\n  const { id } = props;\n  return <Comment key={id} {...props} />;\n}\n\nconst DEFAULT_SORT_OPTION = 'highest';\n\nconst SORT_OPTIONS = [\n  ['highest', 'Highest'],\n  ['newest', 'Newest'],\n  ['likes', 'Likes'],\n];\n\nexport { DEFAULT_SORT_OPTION, renderComment, SORT_OPTIONS };\n","import {\n  MenuItem as MuiMenuItem,\n  TextField as MuiTextField,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { SORT_OPTIONS } from '../Comments.utils';\n\nfunction Sort({ onChange, value }) {\n  function handleChange({ target: { value } }) {\n    onChange(value);\n  }\n\n  return (\n    <MuiTextField\n      fullWidth\n      label='Sort comments by'\n      onChange={handleChange}\n      select\n      size='small'\n      value={value}\n      variant='outlined'\n    >\n      {SORT_OPTIONS.map(([value, label]) => (\n        <MuiMenuItem key={value} value={value}>\n          {label}\n        </MuiMenuItem>\n      ))}\n    </MuiTextField>\n  );\n}\n\nSort.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.oneOf(['highest', 'newest', 'likes']).isRequired,\n};\n\nexport default Sort;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction Pagination({\n  disabled,\n  hasNextPage,\n  hasPreviousPage,\n  onFirstPage,\n  onLastPage,\n  onNextPage,\n  onPreviousPage,\n}) {\n  return (\n    <div>\n      <button disabled={disabled} onClick={onFirstPage} type='button'>\n        First page\n      </button>\n      <button\n        disabled={disabled || !hasPreviousPage}\n        onClick={onPreviousPage}\n        type='button'\n      >\n        Previous page\n      </button>\n      <button\n        disabled={disabled || !hasNextPage}\n        onClick={onNextPage}\n        type='button'\n      >\n        Next page\n      </button>\n      <button disabled={disabled} onClick={onLastPage} type='button'>\n        Last page\n      </button>\n    </div>\n  );\n}\n\nPagination.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  hasNextPage: PropTypes.bool.isRequired,\n  hasPreviousPage: PropTypes.bool.isRequired,\n  onFirstPage: PropTypes.func.isRequired,\n  onLastPage: PropTypes.func.isRequired,\n  onNextPage: PropTypes.func.isRequired,\n  onPreviousPage: PropTypes.func.isRequired,\n};\n\nexport default Pagination;\n","import { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nfunction usePagination(pagesTotalSelector) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { page = '1', ...otherSearchProps } = useMemo(\n    () => Object.fromEntries(searchParams),\n    [searchParams],\n  );\n  const pagesTotal = useSelector(pagesTotalSelector);\n\n  function toFirstPage() {\n    setSearchParams({\n      page: 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toLastPage() {\n    setSearchParams({\n      page: pagesTotal,\n      ...otherSearchProps,\n    });\n  }\n\n  function toNextPage() {\n    setSearchParams({\n      page: parseInt(page) + 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toPreviousPage() {\n    setSearchParams({\n      page: parseInt(page) - 1,\n      ...otherSearchProps,\n    });\n  }\n\n  return {\n    hasNextPage: parseInt(page) < pagesTotal,\n    hasPreviousPage: parseInt(page) > 1,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  };\n}\n\nexport default usePagination;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.comments.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { removeComment, updateComment } from '../users/comments/comments.slice';\n\nconst fetchMovie = createAsyncThunk('movie/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      statsResponse,\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/movies/${slug}/stats`),\n      axios.get(`/trakt/movies/${slug}`),\n      axios.get(`/trakt/movies/${slug}/comments/highest`),\n      axios.get(`/trakt/movies/${slug}/people`),\n      axios.get(`/trakt/movies/${slug}/ratings`),\n      axios.get(`/trakt/movies/${slug}/related`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.comments.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.comments.splice(index, 1);\n      }\n    },\n    [fetchMovie.fulfilled](state, action) {\n      return action.payload;\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.comments.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.comments[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'movie',\n  reducers: {},\n});\n\nexport { fetchMovie };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { removeComment, updateComment } from '../users/comments/comments.slice';\n\nconst fetchShow = createAsyncThunk('show/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n      statsResponse,\n      seasonsResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/shows/${slug}`),\n      axios.get(`/trakt/shows/${slug}/comments/highest`),\n      axios.get(`/trakt/shows/${slug}/people`),\n      axios.get(`/trakt/shows/${slug}/ratings`),\n      axios.get(`/trakt/shows/${slug}/related`),\n      axios.get(`/trakt/shows/${slug}/stats`),\n      axios.get(`/trakt/shows/${slug}/seasons?extended=episodes`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      seasons: seasonsResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShow.fulfilled](state, action) {\n      return action.payload;\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.comments.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.comments.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.comments.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.comments[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    seasons: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'show',\n  reducers: {},\n});\n\nexport { fetchShow };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\nimport { fetchMovie } from '../movie/movie.slice';\nimport { fetchShow } from '../show/show.slice';\nimport {\n  postComment,\n  removeComment,\n  updateComment,\n} from '../users/comments/comments.slice';\n\nconst fetchComments = createAsyncThunk('comments/fetch', async function (\n  { entity, page, slug, sort },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/${entity}/${slug}/comments/${sort}?page=${page}&limit=${DEFAULTS.COMMENT_PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction fetchEntityAndComments(params) {\n  const { entity, slug } = params;\n  const fn = entity === 'movies' ? fetchMovie : fetchShow;\n  return async function (dispatch) {\n    await Promise.all([dispatch(fn(slug)), dispatch(fetchComments(params))]);\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n    [postComment.fulfilled](state, action) {\n      state.entities.unshift(action.payload);\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.entities[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'comments',\n  reducers: {},\n});\n\nexport { fetchComments, fetchEntityAndComments };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.movie;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.show;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport {\n  DEFAULT_SORT_OPTION,\n  renderComment,\n} from '../../components/Comments/Comments.utils';\nimport Editor from '../../components/Comments/Editor/Editor.component';\nimport Sort from '../../components/Comments/Sort/Sort.component';\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlagsReducedFactory } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/comments/comments.selectors';\nimport {\n  fetchComments,\n  fetchEntityAndComments,\n} from '../../redux/modules/comments/comments.slice';\nimport { selectEntity as selectMovie } from '../../redux/modules/movie/movie.selectors';\nimport { selectEntity as selectShow } from '../../redux/modules/show/show.selectors';\nimport { postComment } from '../../redux/modules/users/comments/comments.slice';\n\n//@TODO: Add redux module for this component\nfunction Comments({ entity }) {\n  const fetchingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isFirstRender = useRef(true);\n  const { slug } = useParams();\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const { stats, summary } = useSelector(\n    entity === 'movies' ? selectMovie : selectShow,\n  );\n  const comments = useSelector(selectEntities);\n  const fetching = useSelector((state) =>\n    fetchingSelector(state, ['comments/fetch', 'movie/fetch', 'show/fetch']),\n  );\n  const [sort, setSort] = useState(DEFAULT_SORT_OPTION);\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      dispatch(fetchEntityAndComments({ entity, page, slug, sort: 'highest' }));\n      return;\n    }\n    dispatch(fetchComments({ entity, page, slug, sort }));\n  }, [dispatch, entity, page, slug, sort]);\n\n  function handleSubmit({ reset, ...comment }) {\n    dispatch(\n      postComment({\n        ...comment,\n        entity,\n        slug,\n      }),\n    ).then(reset);\n  }\n\n  return (\n    <>\n      <h1>Summary</h1>\n      <pre>{JSON.stringify(summary, null, 2)}</pre>\n      <h1>Stats</h1>\n      <pre>{JSON.stringify(stats, null, 2)}</pre>\n      <h1>Comments</h1>\n      {fetching && <div>Loading...</div>}\n      <Sort onChange={setSort} value={sort} />\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <Editor onSubmit={handleSubmit} />\n      {comments.map((comment) => renderComment(comment))}\n    </>\n  );\n}\n\nComments.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'shows']),\n};\n\nexport default Comments;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchLists = createAsyncThunk('users/lists/fetch', async function (\n  userSlug = getUserSlug(),\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(`/trakt/users/${userSlug}/lists`);\n    const listItems = await Promise.all(\n      response.data.map((list) =>\n        axios.get(`/trakt/users/${userSlug}/lists/${list.ids.slug}/items`),\n      ),\n    );\n    return response.data.map((list, index) => ({\n      ...list,\n      items: listItems[index].data,\n    }));\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addList = createAsyncThunk('users/lists/add', async function (\n  list,\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.post(\n      `/trakt/users/${getUserSlug()}/lists`,\n      list,\n    );\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeList = createAsyncThunk('users/lists/remove', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/users/${getUserSlug()}/lists/${slug}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [addList.fulfilled](state, action) {\n      state.push(action.payload);\n    },\n    [fetchLists.fulfilled](state, action) {\n      return action.payload;\n    },\n    [removeList.fulfilled](state, action) {\n      const { arg: slug } = action.meta;\n      const index = state.findIndex((list) => list.ids.slug === slug);\n      state.splice(index, 1);\n    },\n  },\n  initialState: [],\n  name: 'users/lists',\n  reducers: {},\n});\n\nexport { addList, fetchLists, removeList };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\nimport { fetchLists } from '../lists/lists.slice';\n\nconst fetchList = createAsyncThunk('users/list/fetch', async function (\n  { id, userSlug = getUserSlug() },\n  { rejectWithValue },\n) {\n  try {\n    const [listResponse, itemsResponse] = await Promise.all([\n      axios.get(`/trakt/users/${userSlug}/lists/${id}`),\n      axios.get(`/trakt/users/${userSlug}/lists/${id}/items`),\n    ]);\n    return {\n      ...listResponse.data,\n      items: itemsResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeFromList = createAsyncThunk('users/list/remove', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(\n      `/trakt/users/${getUserSlug()}/lists/${listSlug}/items/remove`,\n      {\n        [entity]: [{ ids: { slug } }],\n      },\n    );\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addToList = createAsyncThunk('users/list/add', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(`/trakt/users/${getUserSlug()}/lists/${listSlug}/items`, {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction addToListAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(addToList(params));\n    await dispatch(fetchLists());\n  };\n}\n\nfunction removeFromListAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeFromList(params));\n    await dispatch(fetchLists());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchList.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    items: [],\n  },\n  name: 'list',\n  reducers: {},\n});\n\nexport { addToListAndRefetch, fetchList, removeFromListAndRefetch };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.lists;\n  },\n  function (lists) {\n    return lists;\n  },\n);\n\nfunction selectListsForManagerFactory() {\n  return createSelector(\n    function (state) {\n      return state.users.lists;\n    },\n    function (_, entity) {\n      return entity;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n    function (lists, entity, slug) {\n      entity = transformEntityToSingular(entity);\n      return lists.map((list) => {\n        const listed = list.items.some(\n          (item) => item.type === entity && item[entity].ids.slug === slug,\n        );\n        return {\n          listed,\n          name: list.name,\n          slug: list.ids.slug,\n        };\n      });\n    },\n  );\n}\n\nexport { selectEntities, selectListsForManagerFactory };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemActionRoot: {\n    minWidth: 32,\n  },\n});\n","import {\n  Checkbox as MuiCheckbox,\n  LinearProgress as MuiLinearProgress,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemIcon as MuiListItemAction,\n  ListItemText as MuiListItemText,\n  ListSubheader as MuiListSubheader,\n  Popover as MuiPopover,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../redux/loading/loading.selectors';\nimport {\n  addToListAndRefetch,\n  removeFromListAndRefetch,\n} from '../../redux/modules/users/list/list.slice';\nimport { selectListsForManagerFactory } from '../../redux/modules/users/lists/lists.selectors';\nimport useStyles from './ListItemManager.styles';\n\nfunction ListItemManager({ children, entity, slug }) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const listsSelector = useMemo(selectListsForManagerFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const loading = useSelector((state) =>\n    loadingSelector(state, ['users/list/add', 'users/list/remove']),\n  );\n  const lists = useSelector((state) => listsSelector(state, entity, slug));\n  const [anchorEl, setAnchorEl] = useState(null);\n  const listedOnCount = useMemo(\n    () => lists.filter(({ listed }) => listed).length,\n    [lists],\n  );\n  const open = Boolean(anchorEl);\n  const [mirror, setMirror] = useState({});\n\n  function handleOpen(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  function handleClick(entity, listed, listSlug) {\n    return function () {\n      let fn = addToListAndRefetch;\n      let value = true;\n      if (listed) {\n        fn = removeFromListAndRefetch;\n        value = false;\n      }\n      dispatch(fn({ entity, listSlug, slug }));\n      setMirror({ ...mirror, [listSlug]: value });\n    };\n  }\n\n  return (\n    <>\n      {children(handleOpen, listedOnCount)}\n      <MuiPopover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'center',\n          vertical: 'bottom',\n        }}\n        onClose={handleClose}\n        open={open}\n        transformOrigin={{\n          horizontal: 'center',\n          vertical: 'top',\n        }}\n      >\n        {loading && <MuiLinearProgress />}\n        <MuiList\n          dense\n          subheader={\n            <MuiListSubheader>\n              Listed on {listedOnCount} of {lists.length} lists\n            </MuiListSubheader>\n          }\n        >\n          {lists.map(({ listed, name, slug }) => (\n            <MuiListItem\n              button\n              disabled={loading}\n              key={slug}\n              onClick={handleClick(entity, listed, slug)}\n            >\n              <MuiListItemAction\n                classes={{\n                  root: classes.listItemActionRoot,\n                }}\n              >\n                <MuiCheckbox\n                  checked={slug in mirror ? mirror[slug] : listed}\n                  disableRipple\n                  edge='start'\n                  size='small'\n                />\n              </MuiListItemAction>\n              <MuiListItemText>{name}</MuiListItemText>\n            </MuiListItem>\n          ))}\n        </MuiList>\n      </MuiPopover>\n    </>\n  );\n}\n\nListItemManager.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  slug: PropTypes.string.isRequired,\n};\n\nexport default ListItemManager;\n","import PropTypes from 'prop-types';\n\nimport { transformEntityToSingular } from '../../utils';\n\nfunction Poster({ children, entity, season, size, tmdbId, type }) {\n  entity = transformEntityToSingular(entity);\n  if (!tmdbId) {\n    return null;\n  }\n\n  let url = `/images/${entity}/${tmdbId}/${type}?`;\n  if (season) {\n    url += `season=${season}`;\n  }\n  if (size) {\n    url += `size=${size}`;\n  }\n  return children(url);\n}\n\nPoster.propTypes = {\n  children: PropTypes.func.isRequired,\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  season: PropTypes.number,\n  size: PropTypes.string,\n  tmdbId: PropTypes.number,\n  type: PropTypes.oneOf(['backdrop', 'poster', 'profile']),\n};\n\nexport default Poster;\n","import { Rating as MuiRating } from '@material-ui/lab';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nfunction Rating({ onChange, value: initialValue = 0 }) {\n  const [value, setValue] = useState(initialValue);\n\n  function handleChange(_, value) {\n    setValue(value);\n    onChange(value);\n  }\n\n  return <MuiRating max={10} name='_' onChange={handleChange} value={value} />;\n}\n\nRating.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nexport default Rating;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.ratings;\n  },\n  function (ratings) {\n    return ratings;\n  },\n);\n\nconst selectRating = createSelector(\n  [\n    function (state) {\n      return state.users.ratings;\n    },\n    function (_, entity) {\n      return transformEntityToSingular(entity);\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n  ],\n  function (ratings, entity, slug) {\n    const result = ratings.find(\n      (rating) => rating.type === entity && rating[entity].ids.slug === slug,\n    );\n    return result ? result.rating : 0;\n  },\n);\n\nexport { selectEntities, selectRating };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchRatings = createAsyncThunk('users/ratings/fetch', async function (\n  userSlug = getUserSlug(),\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(`/trakt/users/${userSlug}/ratings`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst postRating = createAsyncThunk('users/ratings/rate', async function (\n  { entity, rating, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings', {\n      [entity]: [\n        {\n          ids: { slug },\n          rating,\n        },\n      ],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeRating = createAsyncThunk('users/ratings/remove', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings/remove', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRatings.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/ratings',\n  reducers: {},\n});\n\nexport { fetchRatings, postRating, removeRating };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.recommendations;\n  },\n  function (recommendations) {\n    return recommendations;\n  },\n);\n\nconst selectIsRecommended = createSelector(\n  [\n    function (state) {\n      return state.users.recommendations;\n    },\n    function (_, entity) {\n      return transformEntityToSingular(entity);\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n  ],\n  function (recommendations, entity, slug) {\n    const result = recommendations.find(\n      (recommendation) =>\n        recommendation.type === entity &&\n        recommendation[entity].ids.slug === slug,\n    );\n    return Boolean(result);\n  },\n);\n\nexport { selectEntities, selectIsRecommended };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchRecommendations = createAsyncThunk(\n  'users/recommendations/fetch',\n  async function (userSlug = getUserSlug(), { rejectWithValue }) {\n    try {\n      const response = await axios.get(\n        `/trakt/users/${userSlug}/recommendations`,\n      );\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst postRecommendation = createAsyncThunk(\n  'users/recommendation/recommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst removeRecommendation = createAsyncThunk(\n  'users/recommendation/unrecommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction postRecommendationAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(postRecommendation(params));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nfunction removeRecommendationAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeRecommendation(params));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRecommendations.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/recommendations',\n  reducers: {},\n});\n\nexport {\n  fetchRecommendations,\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n};\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.watchlist;\n  },\n  function (watchlist) {\n    return watchlist;\n  },\n);\n\nconst selectIsWatchlisted = createSelector(\n  [\n    function (state) {\n      return state.users.watchlist;\n    },\n    function (_, entity) {\n      return transformEntityToSingular(entity);\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n  ],\n  function (watchlist, entity, slug) {\n    const result = watchlist.find(\n      (item) => item.type === entity && item[entity].ids.slug === slug,\n    );\n    return Boolean(result);\n  },\n);\n\nexport { selectEntities, selectIsWatchlisted };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchWatchlist = createAsyncThunk(\n  'users/watchlist/fetch',\n  async function (userSlug = getUserSlug(), { rejectWithValue }) {\n    try {\n      const response = await axios.get(`/trakt/users/${userSlug}/watchlist`);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst addToWatchlist = createAsyncThunk('users/watchlist/add', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/watchlist', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeFromWatchlist = createAsyncThunk(\n  'users/watchlist/remove',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/watchlist/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction addToWatchlistAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(addToWatchlist(params));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nfunction removeFromWatchlistAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeFromWatchlist(params));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchWatchlist.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/watchlist',\n  reducers: {},\n});\n\nexport {\n  addToWatchlistAndRefetch,\n  fetchWatchlist,\n  removeFromWatchlistAndRefetch,\n};\nexport default reducer;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\n\nimport { renderComment } from '../../components/Comments/Comments.utils';\nimport ListItemManager from '../../components/ListItemManager/ListItemManager.component';\nimport Poster from '../../components/Poster/Poster.component';\nimport Rating from '../../components/Rating/Rating.component';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../redux/modules/movie/movie.selectors';\nimport { fetchMovie } from '../../redux/modules/movie/movie.slice';\nimport { selectRating } from '../../redux/modules/users/ratings/ratings.selectors';\nimport { postRating } from '../../redux/modules/users/ratings/ratings.slice';\nimport { selectIsRecommended } from '../../redux/modules/users/recommendations/recommendations.selectors';\nimport {\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n} from '../../redux/modules/users/recommendations/recommendations.slice';\nimport { selectIsWatchlisted } from '../../redux/modules/users/watchlist/watchlist.selectors';\nimport {\n  addToWatchlistAndRefetch,\n  removeFromWatchlistAndRefetch,\n} from '../../redux/modules/users/watchlist/watchlist.slice';\n\nfunction Movie() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'movie/fetch'),\n  );\n  const movie = useSelector(selectEntity);\n  const rating = useSelector((state) => selectRating(state, 'movies', slug));\n  const isRecommended = useSelector((state) =>\n    selectIsRecommended(state, 'movies', slug),\n  );\n  const isWatchlisted = useSelector((state) =>\n    selectIsWatchlisted(state, 'movies', slug),\n  );\n\n  useEffect(() => {\n    dispatch(fetchMovie(slug));\n  }, [dispatch, slug]);\n\n  function handleRating(value) {\n    dispatch(postRating({ entity: 'movies', rating: value, slug }));\n  }\n\n  function handleRecommend() {\n    if (isRecommended) {\n      dispatch(removeRecommendationAndRefetch({ entity: 'movies', slug }));\n      return;\n    }\n    dispatch(postRecommendationAndRefetch({ entity: 'movies', slug }));\n  }\n\n  function handleWatchlist() {\n    if (isWatchlisted) {\n      dispatch(removeFromWatchlistAndRefetch({ entity: 'movies', slug }));\n      return;\n    }\n    dispatch(addToWatchlistAndRefetch({ entity: 'movies', slug }));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <ListItemManager entity='movies' slug={slug}>\n        {(onClick, listedOnCount) => (\n          <button onClick={onClick} type='button'>\n            {listedOnCount\n              ? `Listed on ${listedOnCount} list(s)`\n              : 'Add to list'}\n          </button>\n        )}\n      </ListItemManager>\n      <button onClick={handleWatchlist} type='button'>\n        {isWatchlisted ? 'Remove from watchlist' : 'Add to watchlit'}\n      </button>\n      <button onClick={handleRecommend} type='button'>\n        {isRecommended ? 'Remove recommendation' : 'Recommend'}\n      </button>\n      <Rating onChange={handleRating} value={rating} />\n      <Poster\n        entity='movies'\n        size='w154'\n        tmdbId={movie.summary?.ids.tmdb}\n        type='poster'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <br />\n      <Link to='comments'>\n        Showing highest rated comments - Show more comments\n      </Link>\n      {movie.comments.map(renderComment)}\n    </>\n  );\n}\n\nexport default Movie;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.movies.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.movies.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchMovies = createAsyncThunk('movies/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/movies/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ movie: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchMovies.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'movies',\n  reducers: {},\n});\n\nexport { fetchMovies };\nexport default reducer;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  footer: {\n    bottom: 0,\n    padding: 8,\n    position: 'absolute',\n  },\n  image: {\n    height: '100%',\n    objectFit: 'cover',\n    width: '100%',\n  },\n  root: {\n    borderBottom: `1px solid ${theme.palette.divider}`,\n    borderRight: `1px solid ${theme.palette.divider}`,\n    position: 'relative',\n  },\n}));\n","import {\n  Chip as MuiChip,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Poster from '../../components/Poster/Poster.component';\nimport useStyles from './Tile.styles';\n\nfunction Tile({ releaseYear, title, tmdbId, watchers }) {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Poster entity='movies' size='w500' tmdbId={tmdbId} type='poster'>\n        {(url) => <img alt='poster' className={classes.image} src={url} />}\n      </Poster>\n      <div className={classes.footer}>\n        <MuiChip\n          color='secondary'\n          label={\n            <MuiTypography variant='caption'>\n              {watchers} people watching\n            </MuiTypography>\n          }\n          size='small'\n        />\n        <div>\n          <MuiTypography color='textPrimary' display='inline' variant='body1'>\n            {title}{' '}\n          </MuiTypography>\n          <MuiTypography\n            color='textSecondary'\n            display='inline'\n            variant='caption'\n          >\n            {releaseYear}\n          </MuiTypography>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nTile.propTypes = {\n  releaseYear: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  tmdbId: PropTypes.number.isRequired,\n  watchers: PropTypes.number.isRequired,\n};\n\nexport default Tile;\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Tile from '../../components/Tile/Tile.component';\n\nfunction renderTrending(movies) {\n  return movies.map(({ movie, watchers }) => (\n    <MuiGrid\n      component={Link}\n      item\n      key={movie.ids.trakt}\n      md={4}\n      sm={6}\n      to={`/app/movies/${movie.ids.slug}`}\n      xl={3}\n      xs={12}\n    >\n      <Tile\n        releaseYear={movie.year}\n        title={movie.title}\n        tmdbId={movie.ids.tmdb}\n        watchers={watchers}\n      />\n    </MuiGrid>\n  ));\n}\n\nfunction renderTiles({ category, movies }) {\n  switch (category) {\n    case 'trending':\n      return renderTrending(movies);\n    case 'popular':\n      return null;\n    case 'recommended':\n      return null;\n    case 'watched':\n      return null;\n    case 'collected':\n      return null;\n    case 'anticipated':\n      return null;\n    default:\n      return null;\n  }\n}\n\nexport { renderTiles };\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/movies/movies.selectors';\nimport { fetchMovies } from '../../redux/modules/movies/movies.slice';\nimport { renderTiles } from './Movies.utils';\n\nfunction Movies({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'movies/fetch'),\n  );\n  const movies = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchMovies({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <MuiGrid container>{renderTiles({ category, movies })}</MuiGrid>\n    </>\n  );\n}\n\nMovies.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'collected',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Movies;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.person;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchPerson = createAsyncThunk('person/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [summaryResponse, moviesResponse, showsResponse] = await Promise.all([\n      axios.get(`/trakt/people/${slug}?extended=full`),\n      axios.get(`/trakt/people/${slug}/movies`),\n      axios.get(`/trakt/people/${slug}/shows`),\n    ]);\n    return {\n      movies: moviesResponse.data,\n      shows: showsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchPerson.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    movies: [],\n    shows: [],\n    summary: null,\n  },\n  name: 'person',\n  reducers: {},\n});\n\nexport { fetchPerson };\nexport default reducer;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport ListItemManager from '../../components/ListItemManager/ListItemManager.component';\nimport Poster from '../../components/Poster/Poster.component';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../redux/modules/person/person.selectors';\nimport { fetchPerson } from '../../redux/modules/person/person.slice';\n\nfunction Person() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'person/fetch'),\n  );\n  const person = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchPerson(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <ListItemManager entity='people' slug={slug}>\n        {(onClick, listedOnCount) => (\n          <button onClick={onClick} type='button'>\n            {listedOnCount\n              ? `Listed on ${listedOnCount} list(s)`\n              : 'Add to list'}\n          </button>\n        )}\n      </ListItemManager>\n      <Poster\n        entity='people'\n        size='w185'\n        tmdbId={person.summary?.ids.tmdb}\n        type='profile'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <pre>{JSON.stringify(person, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Person;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.search.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.search.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS, transformEntityToSingular } from '../../../utils';\n\nconst fetchSearchResults = createAsyncThunk('search/fetch', async function (\n  { entity, page, query },\n  { rejectWithValue },\n) {\n  try {\n    entity = transformEntityToSingular(entity);\n    const response = await axios.get(\n      `/trakt/search/${entity}?query=${query}&page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchSearchResults.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'search',\n  reducers: {},\n});\n\nexport { fetchSearchResults };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/search/search.selectors';\nimport { fetchSearchResults } from '../../redux/modules/search/search.slice';\n\nfunction Search({ entity }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { query = '' } = useMemo(() => Object.fromEntries(searchParams), [\n    searchParams,\n  ]);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'search/fetch'),\n  );\n  const searchResults = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchSearchResults({ entity, page, query }));\n  }, [dispatch, entity, page, query]);\n\n  function handleQueryChange({ target: { value } }) {\n    setSearchParams({ query: value });\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <div>\n        <label htmlFor='query'>Input your query:</label>\n        <input\n          id='query'\n          onChange={handleQueryChange}\n          type='text'\n          value={query}\n        />\n      </div>\n      <pre>{JSON.stringify(searchResults, null, 2)}</pre>\n    </>\n  );\n}\n\nSearch.propTypes = {\n  entity: PropTypes.oneOf(['all', 'movies', 'shows', 'people']),\n};\n\nexport default Search;\n","import React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\n\nimport { renderComment } from '../../components/Comments/Comments.utils';\nimport ListItemManager from '../../components/ListItemManager/ListItemManager.component';\nimport Poster from '../../components/Poster/Poster.component';\nimport Rating from '../../components/Rating/Rating.component';\nimport { selectLoadingFlagsReducedFactory } from '../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../redux/modules/show/show.selectors';\nimport { fetchShow } from '../../redux/modules/show/show.slice';\nimport { selectRating } from '../../redux/modules/users/ratings/ratings.selectors';\nimport { postRating } from '../../redux/modules/users/ratings/ratings.slice';\nimport { selectIsRecommended } from '../../redux/modules/users/recommendations/recommendations.selectors';\nimport {\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n} from '../../redux/modules/users/recommendations/recommendations.slice';\nimport { selectIsWatchlisted } from '../../redux/modules/users/watchlist/watchlist.selectors';\nimport {\n  addToWatchlistAndRefetch,\n  removeFromWatchlistAndRefetch,\n} from '../../redux/modules/users/watchlist/watchlist.slice';\n\nfunction Show() {\n  const selectLoadingFlagReduced = useMemo(\n    selectLoadingFlagsReducedFactory,\n    [],\n  );\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlagReduced(state, ['show/fetch', 'show/comments/fetch']),\n  );\n  const show = useSelector(selectEntity);\n  const rating = useSelector((state) => selectRating(state, 'shows', slug));\n  const isRecommended = useSelector((state) =>\n    selectIsRecommended(state, 'shows', slug),\n  );\n  const isWatchlisted = useSelector((state) =>\n    selectIsWatchlisted(state, 'shows', slug),\n  );\n\n  useEffect(() => {\n    dispatch(fetchShow(slug));\n  }, [dispatch, slug]);\n\n  function handleRating(value) {\n    dispatch(postRating({ entity: 'shows', rating: value, slug }));\n  }\n\n  function handleRecommend() {\n    if (isRecommended) {\n      dispatch(removeRecommendationAndRefetch({ entity: 'shows', slug }));\n      return;\n    }\n    dispatch(postRecommendationAndRefetch({ entity: 'shows', slug }));\n  }\n\n  function handleWatchlist() {\n    if (isWatchlisted) {\n      dispatch(removeFromWatchlistAndRefetch({ entity: 'shows', slug }));\n      return;\n    }\n    dispatch(addToWatchlistAndRefetch({ entity: 'shows', slug }));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <ListItemManager entity='shows' slug={slug}>\n        {(onClick, listedOnCount) => (\n          <button onClick={onClick} type='button'>\n            {listedOnCount\n              ? `Listed on ${listedOnCount} list(s)`\n              : 'Add to list'}\n          </button>\n        )}\n      </ListItemManager>\n      <button onClick={handleWatchlist} type='button'>\n        {isWatchlisted ? 'Remove from watchlist' : 'Add to watchlit'}\n      </button>\n      <button onClick={handleRecommend} type='button'>\n        {isRecommended ? 'Remove recommendation' : 'Recommend'}\n      </button>\n      <Rating onChange={handleRating} value={rating} />\n      <Poster\n        entity='shows'\n        size='w154'\n        tmdbId={show.summary?.ids.tmdb}\n        type='poster'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <br />\n      <Link to='comments'>\n        Showing highest rated comments - Show more comments\n      </Link>\n      {show.comments.map(renderComment)}\n    </>\n  );\n}\n\nexport default Show;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.shows.entities;\n  },\n  function (shows) {\n    return shows;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.shows.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchShows = createAsyncThunk('shows/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/shows/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ show: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShows.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'shows',\n  reducers: {},\n});\n\nexport { fetchShows };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/shows/shows.selectors';\nimport { fetchShows } from '../../redux/modules/shows/shows.slice';\n\nfunction Shows({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'shows/fetch'),\n  );\n  const shows = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchShows({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <pre>{JSON.stringify(shows, null, 2)}</pre>\n    </>\n  );\n}\n\nShows.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'collected',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Shows;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.comments.entities;\n  },\n  function (comments) {\n    return comments;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.users.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { renderComment } from '../../../components/Comments/Comments.utils';\nimport Pagination from '../../../components/Pagination/Pagination.component';\nimport usePagination from '../../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../../redux/modules/users/comments/comments.selectors';\nimport { fetchComments } from '../../../redux/modules/users/comments/comments.slice';\n\nfunction Comments() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/comments/fetch'),\n  );\n  const comments = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchComments({ page, userSlug }));\n  }, [dispatch, page, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      {comments.map(({ comment, type }) => renderComment(comment))}\n    </>\n  );\n}\n\nexport default Comments;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.users.list;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../../redux/modules/users/list/list.selectors';\nimport { fetchList } from '../../../redux/modules/users/list/list.slice';\n\nfunction List() {\n  const { id, userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'list/fetch'),\n  );\n  const list = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchList({ id, userSlug }));\n  }, [dispatch, id, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(list, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default List;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/lists/lists.selectors';\nimport {\n  addList,\n  fetchLists,\n  removeList,\n} from '../../../redux/modules/users/lists/lists.slice';\nimport { getUserSlug } from '../../../utils';\n\nfunction Lists() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/lists/fetch'),\n  );\n  const lists = useSelector(selectEntities);\n  const canManage = userSlug === getUserSlug();\n\n  useEffect(() => {\n    dispatch(fetchLists(userSlug));\n  }, [dispatch, userSlug]);\n\n  function handleAdd() {\n    dispatch(\n      addList({\n        allowComments: false,\n        description: 'This is my list',\n        name: 'My list',\n      }),\n    );\n  }\n\n  function handleRemove() {\n    dispatch(removeList('my-list'));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      {canManage && (\n        <>\n          <button onClick={handleAdd} type='button'>\n            Add list\n          </button>\n          <button onClick={handleRemove} type='button'>\n            Remove list\n          </button>\n        </>\n      )}\n      <pre>{JSON.stringify(lists, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Lists;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/ratings/ratings.selectors';\nimport { fetchRatings } from '../../../redux/modules/users/ratings/ratings.slice';\n\nfunction Ratings() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/ratings/fetch'),\n  );\n  const ratings = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchRatings(userSlug));\n  }, [dispatch, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(ratings, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Ratings;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/recommendations/recommendations.selectors';\nimport { fetchRecommendations } from '../../../redux/modules/users/recommendations/recommendations.slice';\n\nfunction Ratings() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/recommendations/fetch'),\n  );\n  const recommendations = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchRecommendations(userSlug));\n  }, [dispatch, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(recommendations, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Ratings;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/watchlist/watchlist.selectors';\nimport { fetchWatchlist } from '../../../redux/modules/users/watchlist/watchlist.slice';\n\nfunction Watchlist() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/watchlist/fetch'),\n  );\n  const watchlist = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchWatchlist(userSlug));\n  }, [dispatch, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(watchlist, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Watchlist;\n","import { createSlice } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  const patterns = ['/pending', '/fulfilled', '/rejected'];\n  return patterns.some((pattern) => action.type.endsWith(pattern));\n}\n\nconst { reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      const parts = action.type.split('/');\n      const asyncState = parts.pop();\n      state[`${parts.join('/')}`] = asyncState === 'pending';\n    });\n  },\n  initialState: {},\n  name: 'loading',\n  reducers: {},\n});\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport comments from './comments/comments.slice';\nimport list from './list/list.slice';\nimport lists from './lists/lists.slice';\nimport ratings from './ratings/ratings.slice';\nimport recommendations from './recommendations/recommendations.slice';\nimport watchlist from './watchlist/watchlist.slice';\n\nexport default combineReducers({\n  comments,\n  list,\n  lists,\n  ratings,\n  recommendations,\n  watchlist,\n});\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport loading from './loading/loading.slice';\nimport comments from './modules/comments/comments.slice';\nimport movie from './modules/movie/movie.slice';\nimport movies from './modules/movies/movies.slice';\nimport person from './modules/person/person.slice';\nimport search from './modules/search/search.slice';\nimport show from './modules/show/show.slice';\nimport shows from './modules/shows/shows.slice';\nimport users from './modules/users';\nimport notifications from './notifications/notifications.slice';\n\nconst store = configureStore({\n  reducer: {\n    comments,\n    loading,\n    movie,\n    movies,\n    notifications,\n    person,\n    search,\n    show,\n    shows,\n    users,\n  },\n});\n\nexport default store;\n","import { CssBaseline as MuiCssBaseline } from '@material-ui/core';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Navigate,\n  Route,\n  Routes,\n} from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout.component';\nimport NotFound from './components/NotFound/NotFound.component';\nimport {\n  default as MovieComments,\n  default as ShowComments,\n} from './modules/Comments/Comments.component';\nimport Movie from './modules/Movie/Movie.component';\nimport Movies from './modules/Movies/Movies.component';\nimport Person from './modules/Person/Person.component';\nimport Search from './modules/Search/Search.component';\nimport Show from './modules/Show/Show.component';\nimport Shows from './modules/Shows/Shows.component';\nimport Comments from './modules/Users/Comments/Comments.component';\nimport List from './modules/Users/List/List.component';\nimport Lists from './modules/Users/Lists/Lists.component';\nimport Ratings from './modules/Users/Ratings/Ratings.component';\nimport Recommendations from './modules/Users/Recommendations/Recommendations.component';\nimport Watchlist from './modules/Users/Watchlist/Watchlist.component';\nimport store from './redux/store';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/components/Layouts/Layouts/Layouts.utils.js in variable NAV_PATHS\nfunction App() {\n  return (\n    <Routes basename='/app'>\n      <Route element={<Navigate replace to='movies/trending' />} path='/' />\n      <Route element={<Layout />} path='/'>\n        <Route path='movies'>\n          <Route element={<Navigate replace to='trending' />} path='/' />\n          <Route element={<Movies category='trending' />} path='trending' />\n          <Route element={<Movies category='popular' />} path='popular' />\n          <Route\n            element={<Movies category='recommended' />}\n            path='recommended'\n          />\n          <Route element={<Movies category='watched' />} path='watched' />\n          <Route\n            element={<Movies category='anticipated' />}\n            path='anticipated'\n          />\n          <Route element={<Movie />} path=':slug' />\n          <Route\n            element={<MovieComments entity='movies' />}\n            path=':slug/comments'\n          />\n        </Route>\n        <Route path='shows'>\n          <Route element={<Navigate replace to='trending' />} path='/' />\n          <Route element={<Shows category='trending' />} path='trending' />\n          <Route element={<Shows category='popular' />} path='popular' />\n          <Route\n            element={<Shows category='recommended' />}\n            path='recommended'\n          />\n          <Route element={<Shows category='watched' />} path='watched' />\n          <Route\n            element={<Shows category='anticipated' />}\n            path='anticipated'\n          />\n          <Route element={<Show />} path=':slug' />\n          <Route\n            element={<ShowComments entity='shows' />}\n            path=':slug/comments'\n          />\n        </Route>\n        <Route element={<Person />} path='people/:slug' />\n        <Route path='search'>\n          <Route element={<Navigate replace to='all' />} path='/' />\n          <Route element={<Search entity='all' />} path='all' />\n          <Route element={<Search entity='movies' />} path='movies' />\n          <Route element={<Search entity='shows' />} path='shows' />\n          <Route element={<Search entity='people' />} path='people' />\n        </Route>\n        <Route path='users/:userSlug'>\n          <Route element={<Navigate replace to='ratings' />} path='/' />\n          <Route element={<Ratings />} path='ratings' />\n          <Route element={<Recommendations />} path='recommendations' />\n          <Route element={<Watchlist />} path='watchlist' />\n          <Route path='lists'>\n            <Route element={<Lists />} path='/' />\n            <Route element={<List />} path=':id' />\n          </Route>\n          <Route element={<Comments />} path='comments' />\n        </Route>\n      </Route>\n      <Route element={<NotFound />} path='*' />\n    </Routes>\n  );\n}\n\nfunction Providers() {\n  return (\n    <ReduxProvider store={store}>\n      <Router>\n        <MuiCssBaseline />\n        <App />\n      </Router>\n    </ReduxProvider>\n  );\n}\n\nexport default Providers;\n","import './styles.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App.component';\nimport { fetchLists } from './redux/modules/users/lists/lists.slice';\nimport { fetchRatings } from './redux/modules/users/ratings/ratings.slice';\nimport { fetchRecommendations } from './redux/modules/users/recommendations/recommendations.slice';\nimport { fetchWatchlist } from './redux/modules/users/watchlist/watchlist.slice';\nimport store from './redux/store';\n\nconst { dispatch } = store;\n\n//@TODO: Implement parallel initial calls\n//@TODO: Add default loading state in public/index.html\nasync function init() {\n  await dispatch(fetchLists());\n  await dispatch(fetchRatings());\n  await dispatch(fetchRecommendations());\n  await dispatch(fetchWatchlist());\n}\n\ninit().then(function () {\n  ReactDOM.render(<App />, document.getElementById('root'));\n});\n"],"sourceRoot":""}