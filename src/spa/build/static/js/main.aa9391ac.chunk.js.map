{"version":3,"sources":["redux/notifications/notifications.selectors.js","redux/notifications/notifications.slice.js","components/Notifications/Notification/Notification.component.jsx","components/Notifications/Notifications.component.jsx","components/Layout/Layout.styles.js","utils.js","components/Layout/CollapsingListItem/CollapsingListItem.styles.js","components/Layout/CollapsingListItem/CollapsingListItem.component.jsx","components/Layout/Layout.utils.js","components/Layout/Layout.component.jsx","components/LoadingOverlay/LoadingOverlay.styles.js","components/LoadingOverlay/LoadingOverlay.component.jsx","components/NotFound/NotFound.component.jsx","hooks/useScrollToTopOnLocationChange.js","redux/loading/loading.selectors.js","redux/modules/users/comments/comments.slice.js","components/Comments/Editor/Editor.component.jsx","components/Comments/Comment/Comment.styles.js","components/Comments/Comment/Comment.component.jsx","components/Comments/Comments.utils.js","components/Comments/Sort/Sort.component.jsx","components/Pagination/Pagination.styles.js","components/Pagination/Pagination.component.jsx","hooks/usePagination.js","redux/modules/comments/comments.selectors.js","redux/modules/movie/movie.slice.js","redux/modules/show/show.slice.js","redux/modules/comments/comments.slice.js","redux/modules/movie/movie.selectors.js","redux/modules/show/show.selectors.js","modules/Comments/Comments.component.jsx","redux/modules/users/lists/lists.slice.js","redux/modules/users/list/list.slice.js","redux/modules/users/lists/lists.selectors.js","components/buttons/ListItemManager/ListItemManager.styles.js","components/buttons/ListItemManager/ListItemManager.component.jsx","redux/modules/users/ratings/ratings.selectors.js","redux/modules/users/ratings/ratings.slice.js","components/buttons/Rating/Rating.styles.js","components/buttons/Rating/Rating.utils.js","components/buttons/Rating/Rating.component.jsx","redux/modules/users/recommendations/recommendations.selectors.js","redux/modules/users/recommendations/recommendations.slice.js","components/buttons/Recommend/Recommend.component.jsx","redux/modules/users/watchlist/watchlist.selectors.js","redux/modules/users/watchlist/watchlist.slice.js","components/buttons/Watchlist/Watchlist.component.jsx","modules/Movie/Movie.component.jsx","redux/modules/movies/movies.selectors.js","redux/modules/movies/movies.slice.js","hooks/usePoster.js","components/Tile/Tile.styles.js","components/Tile/Tile.component.jsx","modules/Movies/Movies.utils.js","modules/Movies/Movies.component.jsx","components/Poster/Poster.component.jsx","redux/modules/person/person.selectors.js","redux/modules/person/person.slice.js","modules/Person/Person.component.jsx","redux/modules/search/search.selectors.js","redux/modules/search/search.slice.js","modules/Search/Search.component.jsx","modules/Show/Show.component.jsx","redux/modules/shows/shows.selectors.js","redux/modules/shows/shows.slice.js","modules/Shows/Shows.utils.js","modules/Shows/Shows.component.jsx","redux/modules/users/comments/comments.selectors.js","modules/Users/Comments/Comments.component.jsx","redux/modules/users/list/list.selectors.js","modules/Users/List/List.component.jsx","modules/Users/Lists/Lists.component.jsx","modules/Users/Ratings/Ratings.component.jsx","modules/Users/Recommendations/Recommendations.component.jsx","modules/Users/Watchlist/Watchlist.component.jsx","redux/loading/loading.slice.js","redux/modules/users/index.js","redux/store.js","App.component.jsx","index.js"],"names":["selectNotifications","createSelector","state","notifications","matches","action","type","endsWith","createSlice","extraReducers","builder","addMatcher","meta","requestId","payload","initialState","name","reducers","createNotification","prepare","message","id","nanoid","reducer","removeNotification","actions","Notification","dispatch","useDispatch","onClick","Notifications","useSelector","Object","entries","map","makeStyles","drawerPaper","width","DEFAULTS","getUserSlug","document","cookie","split","reduce","acc","key","value","userSlug","transformEntityToSingular","entity","theme","nestedListItemGutters","paddingLeft","spacing","CollapsingListItem","children","listItemTextProps","props","classes","useStyles","useState","open","setOpen","e","preventDefault","ExpandLess","ExpandMore","in","disablePadding","React","Children","child","cloneElement","gutters","NAV_PATHS","nested","path","title","Layout","anchor","paper","color","variant","px","py","regularListItemProps","activeClassName","button","component","NavLink","to","primary","collapsingListItemProps","ml","root","alignItems","backgroundColor","palette","text","display","height","justifyContent","position","top","zIndex","drawer","LoadingOverlay","fullscreen","useEffect","body","style","overflow","ReactDOM","createPortal","className","size","getElementById","NotFound","useScrollToTopOnLocationChange","location","useLocation","window","scrollTo","stateSelector","loading","selector","_","actionTypes","selectLoadingFlag","actionType","Boolean","selectLoadingFlagsReducedFactory","keys","filter","includes","some","fetchComments","createAsyncThunk","a","page","rejectWithValue","axios","get","response","entities","data","total","parseInt","headers","toString","postComment","comment","slug","spoiler","post","ids","removeComment","delete","updateComment","put","fulfilled","pagination","arg","index","findIndex","splice","Editor","onSubmit","setState","reset","htmlFor","onChange","target","checked","listItemRoot","marginBottom","Comment","createdAt","review","username","userRating","useMemo","fetching","canEdit","isEditing","isRemoving","MuiPaper","container","justify","item","Date","toLocaleString","label","Edit","fontSize","Delete","secondary","then","allowDangerousHtml","emoji","shortnameToImage","secondaryTypographyProps","renderComment","created_at","user","user_rating","SORT_OPTIONS","Sort","fullWidth","select","marginRight","margin","padding","textAlign","Pagination","disabled","hasNextPage","hasPreviousPage","onFirstPage","onLastPage","onNextPage","onPreviousPage","pagesTotal","firstPageDisabled","previousPageDisabled","nextPageDisabled","lastPageDisabled","FirstPage","LastPage","usePagination","pagesTotalSelector","useSearchParams","searchParams","setSearchParams","fromEntries","otherSearchProps","toFirstPage","toLastPage","toNextPage","toPage","toPreviousPage","selectEntities","comments","selectPagesTotal","fetchMovie","Promise","all","statsResponse","summaryResponse","commentsResponse","peopleResponse","ratingsResponse","relatedResponse","people","ratings","related","stats","summary","fetchShow","seasonsResponse","seasons","sort","unshift","selectEntity","movie","show","Comments","fetchingSelector","isFirstRender","useRef","useParams","selectMovie","selectShow","setSort","current","params","fn","fetchEntityAndComments","JSON","stringify","fetchLists","list","listItems","items","addList","removeList","push","fetchList","listResponse","itemsResponse","removeFromList","listSlug","addToList","addToListAndRefetch","removeFromListAndRefetch","users","lists","selectListsForManagerFactory","__","listed","listItemActionRoot","minWidth","ListItemManager","listsSelector","loadingSelector","anchorEl","setAnchorEl","listedOnCount","length","handleOpen","currentTarget","handleClick","startIcon","anchorOrigin","horizontal","vertical","onClose","transformOrigin","dense","subheader","disableRipple","edge","selectRatingFactory","result","find","rating","fetchRatings","postRating","removeRating","buttonRoot","buttonStartIcon","popoverPaper","paddingBottom","ratingRoot","getRatingLabelFromValue","Rating","hoveredRating","setHoveredRating","hasHoveredRating","icon","max","postRatingAndFetch","onChangeActive","recommendations","selectIsRecommendFactory","recommendation","fetchRecommendations","postRecommendation","removeRecommendation","Recommend","isRecommended","handleRecommend","postRecommendationAndRefetch","watchlist","selectIsWatchlistedFactory","fetchWatchlist","addToWatchlist","removeFromWatchlist","Watchlist","isWatchlisted","handleWatchlist","addToWatchlistAndRefetch","Movie","movies","fetchMovies","category","usePoster","season","tmdbId","url","bottom","flexDirection","chips","footer","grey","backgroundImage","background","backgroundSize","borderBottom","borderRight","contrastText","paddingTop","Tile","omitActions","tmdb","releaseYear","year","posterUrl","chip","renderTiles","watchers","lg","md","sm","xs","trakt","renderTrending","renderPopular","user_count","recommendedByCount","renderRecommended","play_count","plays","watcher_count","renderWatched","list_count","inListsCount","renderAnticipated","Movies","Poster","propTypes","PropTypes","func","isRequired","oneOf","number","string","person","fetchPerson","moviesResponse","showsResponse","shows","Person","alt","src","search","fetchSearchResults","query","Search","searchResults","Show","fetchShows","Shows","List","Lists","canManage","allowComments","description","Ratings","pattern","parts","asyncState","pop","join","combineReducers","store","configureStore","App","basename","element","replace","Providers","init","render"],"mappings":"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","file":"static/js/main.aa9391ac.chunk.js","sourcesContent":["import { createSelector } from '@reduxjs/toolkit';\n\nconst selectNotifications = createSelector(\n  function (state) {\n    return state.notifications;\n  },\n  function (notifications) {\n    return notifications;\n  },\n);\n\nexport { selectNotifications };\n","import { createSlice, nanoid } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  return action.type.endsWith('/rejected');\n}\n\nconst { actions, reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      state[action.meta.requestId] = action.payload;\n    });\n  },\n  initialState: {},\n  name: 'notifications',\n  reducers: {\n    createNotification: {\n      prepare(message) {\n        return {\n          payload: {\n            id: nanoid(),\n            message,\n          },\n        };\n      },\n      reducer(state, action) {\n        state[action.payload.id] = action.payload.message;\n      },\n    },\n    removeNotification(state, action) {\n      delete state[action.payload];\n    },\n  },\n});\n\nconst { createNotification, removeNotification } = actions;\n\nexport { createNotification, removeNotification };\nexport default reducer;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { removeNotification } from '../../../redux/notifications/notifications.slice';\n\nfunction Notification({ id, message }) {\n  const dispatch = useDispatch();\n\n  function handleClick() {\n    dispatch(removeNotification(id));\n  }\n\n  return <div onClick={handleClick}>{message}</div>;\n}\n\nexport default Notification;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectNotifications } from '../../redux/notifications/notifications.selectors';\nimport Notification from './Notification/Notification.component';\n\nfunction Notifications() {\n  const notifications = useSelector(selectNotifications);\n  return Object.entries(notifications).map(([id, message]) => (\n    <Notification id={id} key={id} message={message} />\n  ));\n}\n\nexport default Notifications;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  drawerPaper: {\n    width: 256,\n  },\n});\n","const DEFAULTS = {\n  COMMENT_PAGE_SIZE: 20,\n  PAGE_SIZE: 36,\n};\n\nfunction parseCookie() {\n  return document.cookie.split('; ').reduce((acc, cookie) => {\n    const [key, value] = cookie.split('=');\n    acc[key] = value;\n    return acc;\n  }, {});\n}\n\nfunction getUserSlug() {\n  return process.env.NODE_ENV === 'development'\n    ? process.env.REACT_APP_MOCKED_USER_SLUG\n    : parseCookie().userSlug;\n}\n\nfunction transformEntityToSingular(entity) {\n  switch (entity) {\n    case 'movies':\n      return 'movie';\n    case 'shows':\n      return 'show';\n    case 'people':\n      return 'person';\n    // in case of search\n    default:\n      return 'movie,show,person';\n  }\n}\n\nexport { DEFAULTS, getUserSlug, transformEntityToSingular };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles(function (theme) {\n  return {\n    nestedListItemGutters: {\n      paddingLeft: theme.spacing(4),\n    },\n  };\n});\n","import {\n  Collapse as MuiCollapse,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport {\n  ExpandLess as ExpandLessIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nimport useStyles from './CollapsingListItem.styles';\n\nfunction CollapsingListItem({ children, listItemTextProps, ...props }) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  function handleClick(e) {\n    e.preventDefault();\n    setOpen(!open);\n  }\n\n  function renderChildren() {\n    return React.Children.map(children, function (child) {\n      return React.cloneElement(child, {\n        classes: { gutters: classes.nestedListItemGutters },\n      });\n    });\n  }\n\n  return (\n    <>\n      <MuiListItem {...props} onClick={handleClick}>\n        <MuiListItemText {...listItemTextProps} />\n        {open ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n      </MuiListItem>\n      <MuiCollapse in={open}>\n        <MuiList disablePadding>{renderChildren()}</MuiList>\n      </MuiCollapse>\n    </>\n  );\n}\n\nCollapsingListItem.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default CollapsingListItem;\n","import {\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { getUserSlug } from '../../utils';\nimport CollapsingListItem from './CollapsingListItem/CollapsingListItem.component';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/App.component.jsx in respective <Route> components.\nconst NAV_PATHS = [\n  {\n    nested: [\n      {\n        path: 'movies/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'movies/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'movies/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'movies/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'movies/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Movies',\n  },\n  {\n    nested: [\n      {\n        path: 'shows/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'shows/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'shows/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'shows/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'shows/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Shows',\n  },\n  {\n    nested: [\n      {\n        path: `users/${getUserSlug()}/ratings`,\n        title: 'Ratings',\n      },\n      {\n        path: `users/${getUserSlug()}/recommendations`,\n        title: 'Recommendations',\n      },\n      {\n        path: `users/${getUserSlug()}/watchlist`,\n        title: 'Watchlist',\n      },\n      {\n        path: `users/${getUserSlug()}/lists`,\n        title: 'Lists',\n      },\n      {\n        path: `users/${getUserSlug()}/comments`,\n        title: 'Comments',\n      },\n    ],\n    title: 'Profile',\n  },\n  {\n    nested: [\n      {\n        path: 'search/all',\n        title: 'All',\n      },\n      {\n        path: 'search/movies',\n        title: 'Movies',\n      },\n      {\n        path: 'search/shows',\n        title: 'Shows',\n      },\n      {\n        path: 'search/people',\n        title: 'People',\n      },\n    ],\n    title: 'Search',\n  },\n];\n\nfunction renderListItems() {\n  return NAV_PATHS.map(function ({ nested, path, title }) {\n    const regularListItemProps = {\n      activeClassName: 'Mui-selected',\n      button: true,\n      component: NavLink,\n      key: title,\n      to: path,\n    };\n\n    // Regular ListItem. No need for custom CollapsingListItem.\n    if (!nested && path) {\n      return (\n        <MuiListItem {...regularListItemProps}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    }\n\n    const children = nested.map(function ({ path, title }) {\n      return (\n        // Overwrite key and path props as we are iterating over nested items.\n        <MuiListItem {...regularListItemProps} key={title} to={path}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    });\n\n    const collapsingListItemProps = {\n      button: true,\n      key: title,\n      listItemTextProps: {\n        primary: title,\n      },\n    };\n\n    return (\n      <CollapsingListItem {...collapsingListItemProps}>\n        {children}\n      </CollapsingListItem>\n    );\n  });\n}\n\nexport { NAV_PATHS, renderListItems };\n","import {\n  Box as MuiBox,\n  Divider as MuiDivider,\n  Drawer as MuiDrawer,\n  Grid as MuiGrid,\n  List as MuiList,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { Outlet } from 'react-router-dom';\n\nimport Notifications from '../Notifications/Notifications.component';\nimport useStyles from './Layout.styles';\nimport { renderListItems } from './Layout.utils';\n\nfunction Layout() {\n  const classes = useStyles();\n\n  return (\n    <MuiGrid>\n      <MuiDrawer\n        anchor='left'\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        color=''\n        variant='permanent'\n      >\n        <MuiBox px={2} py={1}>\n          <MuiTypography variant='h6'>Traktor</MuiTypography>\n          <MuiTypography variant='caption'>v0.1</MuiTypography>\n        </MuiBox>\n        <MuiDivider />\n        <MuiList disablePadding>{renderListItems()}</MuiList>\n      </MuiDrawer>\n      <MuiBox ml={32}>\n        <Notifications />\n        <Outlet />\n      </MuiBox>\n    </MuiGrid>\n  );\n}\n\nexport default Layout;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.text.primary,\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n    position: 'fixed',\n    top: 0,\n    width: '100%',\n    zIndex: theme.zIndex.drawer,\n  },\n}));\n","import { CircularProgress as MuiCircularProgress } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport useStyles from './LoadingOverlay.styles';\n\nfunction LoadingOverlay({ fullscreen = true }) {\n  const classes = useStyles();\n\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n    return () => (document.body.style.overflow = 'initial');\n  }, []);\n\n  if (fullscreen) {\n    return ReactDOM.createPortal(\n      <div className={classes.root}>\n        <MuiCircularProgress color='secondary' size={64} />\n      </div>,\n      document.getElementById('loadingOverlayRoot'),\n    );\n  }\n\n  return <h1>hi</h1>;\n}\n\nLoadingOverlay.propTypes = {\n  fullscreen: PropTypes.bool,\n};\n\nexport default LoadingOverlay;\n","import React from 'react';\n\nfunction NotFound() {\n  return <h1>404 not found</h1>;\n}\n\nexport default NotFound;\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nfunction useScrollToTopOnLocationChange() {\n  const location = useLocation();\n  useEffect(() => {\n    window.scrollTo({ top: 0 });\n  }, [location]);\n}\n\nexport default useScrollToTopOnLocationChange;\n","import { createSelector } from '@reduxjs/toolkit';\n\nfunction stateSelector(state) {\n  return state.loading;\n}\n\n// Action types can be a string or array of strings\nfunction selector(_, actionTypes) {\n  return actionTypes;\n}\n\nconst selectLoadingFlag = createSelector([stateSelector, selector], function (\n  loading,\n  actionType,\n) {\n  return Boolean(loading[actionType]);\n});\n\nfunction selectLoadingFlagsFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state.loading)\n      .filter((action) => actionTypes.includes(action))\n      .map((action) => state.loading[action]);\n  });\n}\n\nfunction selectLoadingFlagsReducedFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state)\n      .filter((action) => actionTypes.includes(action))\n      .some((action) => state[action]);\n  });\n}\n\nexport {\n  selectLoadingFlag,\n  selectLoadingFlagsFactory,\n  selectLoadingFlagsReducedFactory,\n};\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  DEFAULTS,\n  getUserSlug,\n  transformEntityToSingular,\n} from '../../../../utils';\n\nconst fetchComments = createAsyncThunk('users/comments/fetch', async function (\n  { page, userSlug = getUserSlug() },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/users/${userSlug}/comments?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst postComment = createAsyncThunk('users/comments/post', async function (\n  { comment, entity, slug, spoiler = false },\n  { rejectWithValue },\n) {\n  entity = transformEntityToSingular(entity);\n  try {\n    const response = await axios.post('/trakt/comments', {\n      comment,\n      [entity]: { ids: { slug } },\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeComment = createAsyncThunk('users/comments/remove', async function (\n  id,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/comments/${id}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst updateComment = createAsyncThunk('users/comments/update', async function (\n  { comment, id, spoiler },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.put(`/trakt/comments/${id}`, {\n      comment,\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex(\n        ({ comment }) => comment.id === id,\n      );\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        ({ comment }) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.entities[index].comment = action.payload;\n      }\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'users/comments',\n  reducers: {},\n});\n\nexport { fetchComments, postComment, removeComment, updateComment };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nfunction Editor({ comment = '', onSubmit, spoiler = false }) {\n  const [state, setState] = useState({\n    comment,\n    spoiler,\n  });\n\n  function handleCommentChange({ target: { value } }) {\n    setState({\n      ...state,\n      comment: value,\n    });\n  }\n\n  function handleSpoilerChange({ target: { checked } }) {\n    setState({\n      ...state,\n      spoiler: checked,\n    });\n  }\n\n  function reset() {\n    setState({\n      comment,\n      spoiler,\n    });\n  }\n\n  function handleSubmit() {\n    onSubmit({ comment: state.comment, reset, spoiler: state.spoiler });\n  }\n\n  return (\n    <>\n      <label htmlFor='comment'>Type your comment</label>\n      <br />\n      <textarea\n        id='comment'\n        onChange={handleCommentChange}\n        value={state.comment}\n      />\n      <br />\n      <input\n        checked={state.spoiler}\n        id='spoiler'\n        onChange={handleSpoilerChange}\n        type='checkbox'\n      />\n      <label htmlFor='spoiler'>Is this spoiler?</label>\n      <br />\n      <button onClick={handleSubmit} type='button'>\n        Submit\n      </button>\n    </>\n  );\n}\n\nEditor.propTypes = {\n  comment: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired,\n  spoiler: PropTypes.bool,\n};\n\nexport default Editor;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemRoot: {\n    '&:not(:last-child)': {\n      marginBottom: 8,\n    },\n  },\n});\n","import {\n  Chip as MuiChip,\n  Grid as MuiGrid,\n  IconButton as MuiIconButton,\n  LinearProgress as MuiLinearProgress,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Paper as MuiPaper,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport { Delete as DeleteIcon, Edit as EditIcon } from '@material-ui/icons';\nimport emoji from 'emoji-toolkit';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport {\n  removeComment,\n  updateComment,\n} from '../../../redux/modules/users/comments/comments.slice';\nimport { getUserSlug } from '../../../utils';\nimport Editor from '../Editor/Editor.component';\nimport useStyles from './Comment.styles';\n\nfunction Comment({\n  comment,\n  createdAt,\n  id,\n  review,\n  spoiler,\n  username,\n  userRating,\n  userSlug,\n}) {\n  const selector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selector(state, ['users/comments/remove', 'users/comments/update']),\n  );\n  const [state, setState] = useState(null);\n  const canEdit = getUserSlug() === userSlug;\n  const [isEditing, isRemoving] = [state === 'editing', state === 'removing'];\n\n  function toggleEditMode() {\n    if (isEditing) {\n      setState('default');\n      return;\n    }\n    setState('editing');\n  }\n\n  //@TODO: unwrap promise and add .catch() as removing can fail\n  function handleRemove() {\n    setState('removing');\n    dispatch(removeComment(id));\n  }\n\n  //@TODO: unwrap promise and add .catch() as editing can fail\n  function handleSubmit({ reset, ...comment }) {\n    dispatch(\n      updateComment({\n        ...comment,\n        id,\n      }),\n    ).then(() => setState('default'));\n  }\n\n  return (\n    <>\n      {fetching && (isEditing || isRemoving) && <MuiLinearProgress />}\n      <MuiListItem\n        classes={{\n          root: classes.listItemRoot,\n        }}\n        component={MuiPaper}\n      >\n        <MuiListItemText\n          primary={\n            <MuiGrid container justify='space-between'>\n              <MuiGrid item>\n                <MuiTypography display='inline' variant='body2'>\n                  {review ? 'Review' : 'Shout'} by {username}\n                </MuiTypography>\n                <MuiTypography display='inline' variant='caption'>\n                  {` | ${new Date(createdAt).toLocaleString('da-Dk')} \n                ${userRating ? `| rated ${userRating} stars` : ''}`}\n                  {spoiler && (\n                    <>\n                      {' | '} <MuiChip label='Spoiler' size='small' />\n                    </>\n                  )}\n                </MuiTypography>\n              </MuiGrid>\n              {canEdit && (\n                <MuiGrid item>\n                  <MuiIconButton onClick={toggleEditMode} size='small'>\n                    <EditIcon fontSize='small' />\n                  </MuiIconButton>\n                  <MuiIconButton onClick={handleRemove} size='small'>\n                    <DeleteIcon fontSize='small' />\n                  </MuiIconButton>\n                </MuiGrid>\n              )}\n            </MuiGrid>\n          }\n          secondary={\n            isEditing ? (\n              <Editor\n                comment={comment}\n                onSubmit={handleSubmit}\n                spoiler={spoiler}\n              />\n            ) : (\n              <ReactMarkdown allowDangerousHtml>\n                {emoji.shortnameToImage(comment)}\n              </ReactMarkdown>\n            )\n          }\n          secondaryTypographyProps={{\n            component: 'div',\n          }}\n        />\n      </MuiListItem>\n    </>\n  );\n}\nComment.propTypes = {\n  comment: PropTypes.string.isRequired,\n  createdAt: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  review: PropTypes.bool.isRequired,\n  spoiler: PropTypes.bool.isRequired,\n  username: PropTypes.string.isRequired,\n  userRating: PropTypes.number,\n  userSlug: PropTypes.string.isRequired,\n};\nexport default Comment;\n","import React from 'react';\n\nimport Comment from './Comment/Comment.component';\n\nfunction renderComment(item) {\n  const props = {\n    comment: item.comment,\n    createdAt: item.created_at,\n    id: item.id,\n    review: item.review,\n    spoiler: item.spoiler,\n    username: item.user.username,\n    userRating: item.user_rating,\n    userSlug: item.user.ids.slug,\n  };\n  const { id } = props;\n  return <Comment key={id} {...props} />;\n}\n\nconst DEFAULT_SORT_OPTION = 'highest';\n\nconst SORT_OPTIONS = [\n  ['highest', 'Highest'],\n  ['newest', 'Newest'],\n  ['likes', 'Likes'],\n];\n\nexport { DEFAULT_SORT_OPTION, renderComment, SORT_OPTIONS };\n","import {\n  MenuItem as MuiMenuItem,\n  TextField as MuiTextField,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { SORT_OPTIONS } from '../Comments.utils';\n\nfunction Sort({ onChange, value }) {\n  function handleChange({ target: { value } }) {\n    onChange(value);\n  }\n\n  return (\n    <MuiTextField\n      fullWidth\n      label='Sort comments by'\n      onChange={handleChange}\n      select\n      size='small'\n      value={value}\n      variant='outlined'\n    >\n      {SORT_OPTIONS.map(([value, label]) => (\n        <MuiMenuItem key={value} value={value}>\n          {label}\n        </MuiMenuItem>\n      ))}\n    </MuiTextField>\n  );\n}\n\nSort.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.oneOf(['highest', 'newest', 'likes']).isRequired,\n};\n\nexport default Sort;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    '& > *:not(:last-child)': {\n      marginRight: theme.spacing(1),\n    },\n    margin: `${theme.spacing(1)}px 0`,\n    padding: `0 ${theme.spacing(1)}px`,\n    textAlign: 'right',\n  },\n}));\n","import {\n  IconButton as MuiIconButton,\n  Tooltip as MuiTooltip,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport {\n  ChevronLeft as PreviousPageIcon,\n  ChevronRight as NextPageIcon,\n  FirstPage as FirstPageIcon,\n  LastPage as LastPageIcon,\n} from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport useStyles from './Pagination.styles';\n\nfunction Pagination({\n  disabled = false,\n  hasNextPage,\n  hasPreviousPage,\n  onFirstPage,\n  onLastPage,\n  onNextPage,\n  onPreviousPage,\n  page,\n  pagesTotal,\n}) {\n  const classes = useStyles();\n  const [\n    firstPageDisabled,\n    previousPageDisabled,\n    nextPageDisabled,\n    lastPageDisabled,\n  ] = [\n    disabled || page === 1,\n    disabled || !hasPreviousPage,\n    disabled || !hasNextPage,\n    disabled || page === pagesTotal,\n  ];\n\n  return (\n    <div className={classes.root}>\n      <MuiTooltip title='Go to first page'>\n        <span>\n          <MuiIconButton\n            disabled={firstPageDisabled}\n            onClick={onFirstPage}\n            size='small'\n          >\n            <FirstPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n\n      <MuiTooltip title='Go to previous page'>\n        <span>\n          <MuiIconButton\n            disabled={previousPageDisabled}\n            onClick={onPreviousPage}\n            size='small'\n          >\n            <PreviousPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n\n      <MuiTypography variant='caption'>\n        Page {page} of {pagesTotal}\n      </MuiTypography>\n\n      <MuiTooltip title='Go to next page'>\n        <span>\n          <MuiIconButton\n            disabled={nextPageDisabled}\n            onClick={onNextPage}\n            size='small'\n          >\n            <NextPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n\n      <MuiTooltip title='Go to last page'>\n        <span>\n          <MuiIconButton\n            disabled={lastPageDisabled}\n            onClick={onLastPage}\n            size='small'\n          >\n            <LastPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    </div>\n  );\n}\n\nPagination.propTypes = {\n  disabled: PropTypes.bool,\n  hasNextPage: PropTypes.bool.isRequired,\n  hasPreviousPage: PropTypes.bool.isRequired,\n  onFirstPage: PropTypes.func.isRequired,\n  onLastPage: PropTypes.func.isRequired,\n  onNextPage: PropTypes.func.isRequired,\n  onPreviousPage: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  pagesTotal: PropTypes.number.isRequired,\n};\n\nexport default Pagination;\n","import { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nfunction usePagination(pagesTotalSelector) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { page = '1', ...otherSearchProps } = useMemo(\n    () => Object.fromEntries(searchParams),\n    [searchParams],\n  );\n  const pagesTotal = useSelector(pagesTotalSelector);\n\n  function toPage(page) {\n    setSearchParams({\n      page: parseInt(page),\n      ...otherSearchProps,\n    });\n  }\n\n  function toFirstPage() {\n    setSearchParams({\n      page: 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toLastPage() {\n    setSearchParams({\n      page: pagesTotal,\n      ...otherSearchProps,\n    });\n  }\n\n  function toNextPage() {\n    setSearchParams({\n      page: parseInt(page) + 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toPreviousPage() {\n    setSearchParams({\n      page: parseInt(page) - 1,\n      ...otherSearchProps,\n    });\n  }\n\n  return {\n    hasNextPage: parseInt(page) < pagesTotal,\n    hasPreviousPage: parseInt(page) > 1,\n    page: parseInt(page),\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPage,\n    toPreviousPage,\n  };\n}\n\nexport default usePagination;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.comments.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { removeComment, updateComment } from '../users/comments/comments.slice';\n\nconst fetchMovie = createAsyncThunk('movie/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      statsResponse,\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/movies/${slug}/stats`),\n      axios.get(`/trakt/movies/${slug}`),\n      axios.get(`/trakt/movies/${slug}/comments/highest`),\n      axios.get(`/trakt/movies/${slug}/people`),\n      axios.get(`/trakt/movies/${slug}/ratings`),\n      axios.get(`/trakt/movies/${slug}/related`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.comments.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.comments.splice(index, 1);\n      }\n    },\n    [fetchMovie.fulfilled](state, action) {\n      return action.payload;\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.comments.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.comments[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'movie',\n  reducers: {},\n});\n\nexport { fetchMovie };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { removeComment, updateComment } from '../users/comments/comments.slice';\n\nconst fetchShow = createAsyncThunk('show/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n      statsResponse,\n      seasonsResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/shows/${slug}`),\n      axios.get(`/trakt/shows/${slug}/comments/highest`),\n      axios.get(`/trakt/shows/${slug}/people`),\n      axios.get(`/trakt/shows/${slug}/ratings`),\n      axios.get(`/trakt/shows/${slug}/related`),\n      axios.get(`/trakt/shows/${slug}/stats`),\n      axios.get(`/trakt/shows/${slug}/seasons?extended=episodes`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      seasons: seasonsResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShow.fulfilled](state, action) {\n      return action.payload;\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.comments.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.comments.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.comments.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.comments[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    seasons: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'show',\n  reducers: {},\n});\n\nexport { fetchShow };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\nimport { fetchMovie } from '../movie/movie.slice';\nimport { fetchShow } from '../show/show.slice';\nimport {\n  postComment,\n  removeComment,\n  updateComment,\n} from '../users/comments/comments.slice';\n\nconst fetchComments = createAsyncThunk('comments/fetch', async function (\n  { entity, page, slug, sort },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/${entity}/${slug}/comments/${sort}?page=${page}&limit=${DEFAULTS.COMMENT_PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction fetchEntityAndComments(params) {\n  const { entity, slug } = params;\n  const fn = entity === 'movies' ? fetchMovie : fetchShow;\n  return async function (dispatch) {\n    await Promise.all([dispatch(fn(slug)), dispatch(fetchComments(params))]);\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n    [postComment.fulfilled](state, action) {\n      state.entities.unshift(action.payload);\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.entities[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'comments',\n  reducers: {},\n});\n\nexport { fetchComments, fetchEntityAndComments };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.movie;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.show;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport {\n  DEFAULT_SORT_OPTION,\n  renderComment,\n} from '../../components/Comments/Comments.utils';\nimport Editor from '../../components/Comments/Editor/Editor.component';\nimport Sort from '../../components/Comments/Sort/Sort.component';\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlagsReducedFactory } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/comments/comments.selectors';\nimport {\n  fetchComments,\n  fetchEntityAndComments,\n} from '../../redux/modules/comments/comments.slice';\nimport { selectEntity as selectMovie } from '../../redux/modules/movie/movie.selectors';\nimport { selectEntity as selectShow } from '../../redux/modules/show/show.selectors';\nimport { postComment } from '../../redux/modules/users/comments/comments.slice';\n\n//@TODO: Add redux module for this component\nfunction Comments({ entity }) {\n  const fetchingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isFirstRender = useRef(true);\n  const { slug } = useParams();\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const { stats, summary } = useSelector(\n    entity === 'movies' ? selectMovie : selectShow,\n  );\n  const comments = useSelector(selectEntities);\n  const fetching = useSelector((state) =>\n    fetchingSelector(state, ['comments/fetch', 'movie/fetch', 'show/fetch']),\n  );\n  const [sort, setSort] = useState(DEFAULT_SORT_OPTION);\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      dispatch(fetchEntityAndComments({ entity, page, slug, sort: 'highest' }));\n      return;\n    }\n    dispatch(fetchComments({ entity, page, slug, sort }));\n  }, [dispatch, entity, page, slug, sort]);\n\n  function handleSubmit({ reset, ...comment }) {\n    dispatch(\n      postComment({\n        ...comment,\n        entity,\n        slug,\n      }),\n    ).then(reset);\n  }\n\n  return (\n    <>\n      <h1>Summary</h1>\n      <pre>{JSON.stringify(summary, null, 2)}</pre>\n      <h1>Stats</h1>\n      <pre>{JSON.stringify(stats, null, 2)}</pre>\n      <h1>Comments</h1>\n      {fetching && <div>Loading...</div>}\n      <Sort onChange={setSort} value={sort} />\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n      <Editor onSubmit={handleSubmit} />\n      {comments.map((comment) => renderComment(comment))}\n    </>\n  );\n}\n\nComments.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'shows']),\n};\n\nexport default Comments;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchLists = createAsyncThunk('users/lists/fetch', async function (\n  userSlug = getUserSlug(),\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(`/trakt/users/${userSlug}/lists`);\n    const listItems = await Promise.all(\n      response.data.map((list) =>\n        axios.get(`/trakt/users/${userSlug}/lists/${list.ids.slug}/items`),\n      ),\n    );\n    return response.data.map((list, index) => ({\n      ...list,\n      items: listItems[index].data,\n    }));\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addList = createAsyncThunk('users/lists/add', async function (\n  list,\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.post(\n      `/trakt/users/${getUserSlug()}/lists`,\n      list,\n    );\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeList = createAsyncThunk('users/lists/remove', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/users/${getUserSlug()}/lists/${slug}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [addList.fulfilled](state, action) {\n      state.push(action.payload);\n    },\n    [fetchLists.fulfilled](state, action) {\n      return action.payload;\n    },\n    [removeList.fulfilled](state, action) {\n      const { arg: slug } = action.meta;\n      const index = state.findIndex((list) => list.ids.slug === slug);\n      state.splice(index, 1);\n    },\n  },\n  initialState: [],\n  name: 'users/lists',\n  reducers: {},\n});\n\nexport { addList, fetchLists, removeList };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\nimport { fetchLists } from '../lists/lists.slice';\n\nconst fetchList = createAsyncThunk('users/list/fetch', async function (\n  { id, userSlug = getUserSlug() },\n  { rejectWithValue },\n) {\n  try {\n    const [listResponse, itemsResponse] = await Promise.all([\n      axios.get(`/trakt/users/${userSlug}/lists/${id}`),\n      axios.get(`/trakt/users/${userSlug}/lists/${id}/items`),\n    ]);\n    return {\n      ...listResponse.data,\n      items: itemsResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeFromList = createAsyncThunk('users/list/remove', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(\n      `/trakt/users/${getUserSlug()}/lists/${listSlug}/items/remove`,\n      {\n        [entity]: [{ ids: { slug } }],\n      },\n    );\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addToList = createAsyncThunk('users/list/add', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(`/trakt/users/${getUserSlug()}/lists/${listSlug}/items`, {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction addToListAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(addToList(params));\n    await dispatch(fetchLists());\n  };\n}\n\nfunction removeFromListAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeFromList(params));\n    await dispatch(fetchLists());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchList.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    items: [],\n  },\n  name: 'list',\n  reducers: {},\n});\n\nexport { addToListAndRefetch, fetchList, removeFromListAndRefetch };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.lists;\n  },\n  function (lists) {\n    return lists;\n  },\n);\n\nfunction selectListsForManagerFactory() {\n  return createSelector(\n    function (state) {\n      return state.users.lists;\n    },\n    function (_, entity) {\n      return entity;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n    function (lists, entity, slug) {\n      entity = transformEntityToSingular(entity);\n      return lists.map((list) => {\n        const listed = list.items.some(\n          (item) => item.type === entity && item[entity].ids.slug === slug,\n        );\n        return {\n          listed,\n          name: list.name,\n          slug: list.ids.slug,\n        };\n      });\n    },\n  );\n}\n\nexport { selectEntities, selectListsForManagerFactory };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemActionRoot: {\n    minWidth: 32,\n  },\n});\n","import {\n  Button as MuiButton,\n  Checkbox as MuiCheckbox,\n  IconButton as MuiIconButton,\n  LinearProgress as MuiLinearProgress,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemIcon as MuiListItemAction,\n  ListItemText as MuiListItemText,\n  ListSubheader as MuiListSubheader,\n  Popover as MuiPopover,\n  Tooltip as MuiTooltip,\n} from '@material-ui/core';\nimport { List as ListIcon } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport {\n  addToListAndRefetch,\n  removeFromListAndRefetch,\n} from '../../../redux/modules/users/list/list.slice';\nimport { selectListsForManagerFactory } from '../../../redux/modules/users/lists/lists.selectors';\nimport useStyles from './ListItemManager.styles';\n\nfunction ListItemManager({ entity, size = 'default', slug }) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const listsSelector = useMemo(selectListsForManagerFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/lists/fetch',\n      'users/list/add',\n      'users/list/remove',\n    ]),\n  );\n  const lists = useSelector((state) => listsSelector(state, entity, slug));\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const listedOnCount = useMemo(\n    () => lists.filter(({ listed }) => Boolean(listed)).length,\n    [lists],\n  );\n\n  function handleOpen(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  //@TODO: catch in case recommendation failed\n  function handleClick(entity, listed, listSlug) {\n    return function () {\n      let fn = addToListAndRefetch;\n      if (listed) {\n        fn = removeFromListAndRefetch;\n      }\n      dispatch(fn({ entity, listSlug, slug }));\n    };\n  }\n\n  let button = (\n    <MuiButton\n      color={listedOnCount ? 'secondary' : 'inherit'}\n      disabled={loading}\n      onClick={handleOpen}\n      startIcon={<ListIcon />}\n    >\n      {listedOnCount ? `Listed on ${listedOnCount} lists` : 'Add to your lists'}\n    </MuiButton>\n  );\n\n  if (size === 'small') {\n    button = (\n      <MuiTooltip\n        title={\n          listedOnCount\n            ? `Listed on ${listedOnCount} lists`\n            : 'Add to your lists'\n        }\n      >\n        <MuiIconButton\n          color={listedOnCount ? 'secondary' : 'inherit'}\n          onClick={handleOpen}\n          size='small'\n        >\n          <ListIcon fontSize='small' />\n        </MuiIconButton>\n      </MuiTooltip>\n    );\n  }\n\n  return (\n    <>\n      {button}\n      <MuiPopover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'center',\n          vertical: 'bottom',\n        }}\n        onClose={handleClose}\n        open={open}\n        transformOrigin={{\n          horizontal: 'center',\n          vertical: 'top',\n        }}\n      >\n        {loading && <MuiLinearProgress color='secondary' />}\n        <MuiList\n          dense\n          subheader={\n            <MuiListSubheader>\n              Listed on {listedOnCount} of {lists.length} lists\n            </MuiListSubheader>\n          }\n        >\n          {lists.map(({ listed, name, slug }) => (\n            <MuiListItem\n              button\n              disabled={loading}\n              key={slug}\n              onClick={handleClick(entity, listed, slug)}\n            >\n              <MuiListItemAction\n                classes={{\n                  root: classes.listItemActionRoot,\n                }}\n              >\n                <MuiCheckbox\n                  checked={listed}\n                  disableRipple\n                  edge='start'\n                  size='small'\n                />\n              </MuiListItemAction>\n              <MuiListItemText>{name}</MuiListItemText>\n            </MuiListItem>\n          ))}\n        </MuiList>\n      </MuiPopover>\n    </>\n  );\n}\n\nListItemManager.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default ListItemManager;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.ratings;\n  },\n  function (ratings) {\n    return ratings;\n  },\n);\n\nfunction selectRatingFactory() {\n  return createSelector(\n    [\n      function (state) {\n        return state.users.ratings;\n      },\n      function (_, entity) {\n        return transformEntityToSingular(entity);\n      },\n      function (_, __, slug) {\n        return slug;\n      },\n    ],\n    function (ratings, entity, slug) {\n      const result = ratings.find(\n        (rating) => rating.type === entity && rating[entity].ids.slug === slug,\n      );\n      return result ? result.rating : 0;\n    },\n  );\n}\n\nexport { selectEntities, selectRatingFactory };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchRatings = createAsyncThunk('users/ratings/fetch', async function (\n  userSlug = getUserSlug(),\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(`/trakt/users/${userSlug}/ratings`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst postRating = createAsyncThunk('users/ratings/rate', async function (\n  { entity, rating, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings', {\n      [entity]: [\n        {\n          ids: { slug },\n          rating,\n        },\n      ],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeRating = createAsyncThunk('users/ratings/remove', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings/remove', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction postRatingAndFetch(params) {\n  return async function (dispatch) {\n    await dispatch(postRating(params));\n    await dispatch(fetchRatings());\n  };\n}\n\nfunction removeRatingAndFetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeRating(params));\n    await dispatch(fetchRatings());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRatings.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/ratings',\n  reducers: {},\n});\n\nexport { fetchRatings, postRatingAndFetch, removeRatingAndFetch };\nexport default reducer;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  buttonRoot: {\n    minWidth: 154,\n  },\n  buttonStartIcon: {\n    color: '#990000',\n  },\n  popoverPaper: {\n    padding: theme.spacing(1),\n    paddingBottom: theme.spacing(0.25),\n  },\n  ratingRoot: {\n    color: '#990000',\n  },\n}));\n","function getRatingLabelFromValue(value) {\n  switch (value) {\n    case -1:\n      return 'Unrate';\n    case 1:\n      return '1 - Weak sauce';\n    case 2:\n      return '2 - Terrible';\n    case 3:\n      return '3 - Bad';\n    case 4:\n      return '4 - Poor';\n    case 5:\n      return '5 - Meh';\n    case 6:\n      return '6 - Fair';\n    case 7:\n      return '7 - Good';\n    case 8:\n      return '8 - Great';\n    case 9:\n      return '9 - Superb';\n    case 10:\n      return '10 - Excellent!';\n    default:\n      return 'Rate';\n  }\n}\n\nexport { getRatingLabelFromValue };\n","import { Button as MuiButton, Popover as MuiPopover } from '@material-ui/core';\nimport { Favorite as HeartIcon } from '@material-ui/icons';\nimport { Rating as MuiRating } from '@material-ui/lab';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport { selectRatingFactory } from '../../../redux/modules/users/ratings/ratings.selectors';\nimport {\n  postRatingAndFetch,\n  removeRatingAndFetch,\n} from '../../../redux/modules/users/ratings/ratings.slice';\nimport useStyles from './Rating.styles';\nimport { getRatingLabelFromValue } from './Rating.utils';\n\nfunction Rating({ entity, size = 'default', slug }) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const selector = useMemo(selectRatingFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const rating = useSelector((state) => selector(state, entity, slug));\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/ratings/fetch',\n      'users/ratings/rate',\n      'users/ratings/remove',\n    ]),\n  );\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const [hoveredRating, setHoveredRating] = useState(null);\n  const hasHoveredRating = hoveredRating !== null;\n\n  function handleOpen(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setHoveredRating(null);\n    setAnchorEl(null);\n  }\n\n  function handleActiveChange(_, hoveredRating) {\n    if (hoveredRating === rating) {\n      setHoveredRating(-1);\n      return;\n    }\n    if (hoveredRating === -1) {\n      setHoveredRating(null);\n      return;\n    }\n    setHoveredRating(hoveredRating);\n  }\n\n  function handleChange(_, rating) {\n    if (!rating) {\n      dispatch(removeRatingAndFetch({ entity, slug }));\n      return;\n    }\n    dispatch(postRatingAndFetch({ entity, rating, slug }));\n  }\n\n  return (\n    <>\n      <MuiButton\n        classes={{\n          root: classes.buttonRoot,\n          startIcon: classes.buttonStartIcon,\n        }}\n        onClick={handleOpen}\n        size={size === 'small' ? 'small' : 'medium'}\n        startIcon={<HeartIcon />}\n      >\n        {getRatingLabelFromValue(hasHoveredRating ? hoveredRating : rating)}\n      </MuiButton>\n      <MuiPopover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'center',\n          vertical: 'bottom',\n        }}\n        classes={{\n          paper: classes.popoverPaper,\n        }}\n        onClose={handleClose}\n        open={open}\n        transformOrigin={{\n          horizontal: 'center',\n          vertical: 'top',\n        }}\n      >\n        <MuiRating\n          classes={{\n            root: classes.ratingRoot,\n          }}\n          disabled={loading}\n          icon={<HeartIcon fontSize='inherit' />}\n          max={10}\n          name='_'\n          onChange={handleChange}\n          onChangeActive={handleActiveChange}\n          value={rating}\n        />\n      </MuiPopover>\n    </>\n  );\n}\n\nRating.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default Rating;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.recommendations;\n  },\n  function (recommendations) {\n    return recommendations;\n  },\n);\n\nfunction selectIsRecommendFactory() {\n  return createSelector(\n    [\n      function (state) {\n        return state.users.recommendations;\n      },\n      function (_, entity) {\n        return transformEntityToSingular(entity);\n      },\n      function (_, __, slug) {\n        return slug;\n      },\n    ],\n    function (recommendations, entity, slug) {\n      const result = recommendations.find(\n        (recommendation) =>\n          recommendation.type === entity &&\n          recommendation[entity].ids.slug === slug,\n      );\n      return Boolean(result);\n    },\n  );\n}\n\nexport { selectEntities, selectIsRecommendFactory };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchRecommendations = createAsyncThunk(\n  'users/recommendations/fetch',\n  async function (userSlug = getUserSlug(), { rejectWithValue }) {\n    try {\n      const response = await axios.get(\n        `/trakt/users/${userSlug}/recommendations`,\n      );\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst postRecommendation = createAsyncThunk(\n  'users/recommendations/recommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst removeRecommendation = createAsyncThunk(\n  'users/recommendations/unrecommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction postRecommendationAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(postRecommendation(params));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nfunction removeRecommendationAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeRecommendation(params));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRecommendations.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/recommendations',\n  reducers: {},\n});\n\nexport {\n  fetchRecommendations,\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n};\nexport default reducer;\n","import {\n  Button as MuiButton,\n  CircularProgress as MuiCircularProgress,\n  IconButton as MuiIconButton,\n  Tooltip as MuiTooltip,\n} from '@material-ui/core';\nimport { Favorite as RecommendIcon } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport { selectIsRecommendFactory } from '../../../redux/modules/users/recommendations/recommendations.selectors';\nimport {\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n} from '../../../redux/modules/users/recommendations/recommendations.slice';\n\nfunction Recommend({ entity, size = 'default', slug }) {\n  const dispatch = useDispatch();\n  const selector = useMemo(selectIsRecommendFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isRecommended = useSelector((state) => selector(state, entity, slug));\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/recommendations/fetch',\n      'users/recommendations/recommend',\n      'users/recommendations/unrecommend',\n    ]),\n  );\n\n  //@TODO: catch in case recommendation failed\n  function handleRecommend() {\n    if (isRecommended) {\n      dispatch(removeRecommendationAndRefetch({ entity, slug }));\n      return;\n    }\n    dispatch(postRecommendationAndRefetch({ entity, slug }));\n  }\n\n  if (size === 'small') {\n    return (\n      <MuiTooltip\n        title={isRecommended ? 'Remove from recommendations' : 'Recommend'}\n      >\n        <span>\n          <MuiIconButton\n            color={isRecommended ? 'secondary' : 'inherit'}\n            disabled={loading}\n            onClick={handleRecommend}\n            size='small'\n          >\n            {loading ? (\n              <MuiCircularProgress color='secondary' size={20} />\n            ) : (\n              <RecommendIcon fontSize='small' />\n            )}\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    );\n  }\n  return (\n    <MuiButton\n      color={isRecommended ? 'secondary' : 'inherit'}\n      disabled={loading}\n      onClick={handleRecommend}\n      startIcon={<RecommendIcon />}\n    >\n      {isRecommended ? 'Remove from recommendations' : 'Recommend'}\n    </MuiButton>\n  );\n}\n\nRecommend.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default,', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default Recommend;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.watchlist;\n  },\n  function (watchlist) {\n    return watchlist;\n  },\n);\n\nfunction selectIsWatchlistedFactory() {\n  return createSelector(\n    [\n      function (state) {\n        return state.users.watchlist;\n      },\n      function (_, entity) {\n        return transformEntityToSingular(entity);\n      },\n      function (_, __, slug) {\n        return slug;\n      },\n    ],\n    function (watchlist, entity, slug) {\n      const result = watchlist.find(\n        (item) => item.type === entity && item[entity].ids.slug === slug,\n      );\n      return Boolean(result);\n    },\n  );\n}\n\nexport { selectEntities, selectIsWatchlistedFactory };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../utils';\n\nconst fetchWatchlist = createAsyncThunk(\n  'users/watchlist/fetch',\n  async function (userSlug = getUserSlug(), { rejectWithValue }) {\n    try {\n      const response = await axios.get(`/trakt/users/${userSlug}/watchlist`);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst addToWatchlist = createAsyncThunk('users/watchlist/add', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/watchlist', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeFromWatchlist = createAsyncThunk(\n  'users/watchlist/remove',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/watchlist/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction addToWatchlistAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(addToWatchlist(params));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nfunction removeFromWatchlistAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeFromWatchlist(params));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchWatchlist.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/watchlist',\n  reducers: {},\n});\n\nexport {\n  addToWatchlistAndRefetch,\n  fetchWatchlist,\n  removeFromWatchlistAndRefetch,\n};\nexport default reducer;\n","import {\n  Button as MuiButton,\n  CircularProgress as MuiCircularProgress,\n  IconButton as MuiIconButton,\n  Tooltip as MuiTooltip,\n} from '@material-ui/core';\nimport { WatchLater as WatchlistIcon } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport { selectIsWatchlistedFactory } from '../../../redux/modules/users/watchlist/watchlist.selectors';\nimport {\n  addToWatchlistAndRefetch,\n  removeFromWatchlistAndRefetch,\n} from '../../../redux/modules/users/watchlist/watchlist.slice';\n\nfunction Watchlist({ entity, size = 'default', slug }) {\n  const dispatch = useDispatch();\n  const selector = useMemo(selectIsWatchlistedFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isWatchlisted = useSelector((state) => selector(state, entity, slug));\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/watchlist/fetch',\n      'users/watchlist/add',\n      'users/watchlist/remove',\n    ]),\n  );\n\n  //@TODO: catch in case watchlist request fails\n  function handleWatchlist() {\n    if (isWatchlisted) {\n      dispatch(removeFromWatchlistAndRefetch({ entity, slug }));\n      return;\n    }\n    dispatch(addToWatchlistAndRefetch({ entity, slug }));\n  }\n\n  if (size === 'small') {\n    return (\n      <MuiTooltip\n        title={isWatchlisted ? 'Remove from watchlist' : 'Add to watchlist'}\n      >\n        <span>\n          <MuiIconButton\n            color={isWatchlisted ? 'secondary' : 'inherit'}\n            disabled={loading}\n            onClick={handleWatchlist}\n            size='small'\n          >\n            {loading ? (\n              <MuiCircularProgress color='secondary' size={20} />\n            ) : (\n              <WatchlistIcon fontSize='small' />\n            )}\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    );\n  }\n  return (\n    <MuiButton\n      color={isWatchlisted ? 'secondary' : 'inherit'}\n      disabled={loading}\n      onClick={handleWatchlist}\n      startIcon={<WatchlistIcon />}\n    >\n      {isWatchlisted ? 'Remove from watchlist' : 'Add to watchlist'}\n    </MuiButton>\n  );\n}\n\nWatchlist.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default,', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default Watchlist;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\n\nimport ListItemManagerButton from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport RatingButton from '../../components/buttons/Rating/Rating.component';\nimport RecommendButton from '../../components/buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../../components/buttons/Watchlist/Watchlist.component';\nimport { renderComment } from '../../components/Comments/Comments.utils';\nimport { selectEntity } from '../../redux/modules/movie/movie.selectors';\nimport { fetchMovie } from '../../redux/modules/movie/movie.slice';\n\nfunction Movie() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const movie = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchMovie(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <>\n      <ListItemManagerButton entity='movies' slug={slug} />\n      <WatchlistButton entity='movies' slug={slug} />\n      <RecommendButton entity='movies' slug={slug} />\n      <RatingButton entity='movies' slug={slug} />\n      <Link to='comments'>\n        Showing highest rated comments - Show more comments\n      </Link>\n      {movie.comments.map(renderComment)}\n    </>\n  );\n}\n\nexport default Movie;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.movies.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.movies.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchMovies = createAsyncThunk('movies/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/movies/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ movie: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchMovies.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'movies',\n  reducers: {},\n});\n\nexport { fetchMovies };\nexport default reducer;\n","import { transformEntityToSingular } from '../utils';\n\nfunction usePoster({ entity, season, size, tmdbId, type }) {\n  entity = transformEntityToSingular(entity);\n  if (!tmdbId) {\n    return '/images/placeholder.png';\n  }\n\n  let url = `/images/${entity}/${tmdbId}/${type}?`;\n  if (season) {\n    url += `season=${season}`;\n  }\n  if (size) {\n    url += `size=${size}`;\n  }\n  return url;\n}\n\nexport default usePoster;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  body: {\n    bottom: 30,\n    display: 'flex',\n    flexDirection: 'column',\n    height: 'calc(100% - 30px)',\n    justifyContent: 'flex-end',\n    padding: `0 ${theme.spacing(1)}px ${theme.spacing(0.5)}px`,\n    position: 'absolute',\n    width: '100%',\n  },\n  chips: {\n    '& > *': {\n      margin: `0 ${theme.spacing(0.5)}px ${theme.spacing(0.5)}px 0`,\n    },\n  },\n  footer: {\n    '& > *:not(:last-child)': {\n      marginRight: theme.spacing(1),\n    },\n    backgroundColor: theme.palette.grey[900],\n    height: 30,\n    padding: 2,\n    width: '100%',\n  },\n  root: ({ backgroundImage }) => ({\n    background: `url(${backgroundImage}) no-repeat center`,\n    backgroundSize: 'cover',\n    borderBottom: `1px solid #2d2d2d`,\n    borderRight: `1px solid #2d2d2d`,\n    color: theme.palette.primary.contrastText,\n    paddingTop: `calc(1px + 125%)`,\n    position: 'relative',\n    width: '100%',\n  }),\n}));\n","import {\n  Chip as MuiChip,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport usePoster from '../../hooks/usePoster';\nimport ListItemManagerButton from '../buttons/ListItemManager/ListItemManager.component';\nimport RecommendButton from '../buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../buttons/Watchlist/Watchlist.component';\nimport useStyles from './Tile.styles';\n\nfunction Tile({\n  chips = [],\n  entity,\n  item,\n  omitActions = false,\n  size = 'default',\n}) {\n  const {\n    ids: { slug, tmdb: tmdbId },\n    title,\n    year: releaseYear,\n  } = item;\n  const posterUrl = usePoster({\n    entity,\n    size: size === 'small' ? 'w185' : 'w342',\n    tmdbId,\n    type: 'poster',\n  });\n  const classes = useStyles({ backgroundImage: posterUrl, size });\n\n  return (\n    <div className={classes.root}>\n      <Link className={classes.body} to={`/app/${entity}/${slug}`}>\n        <div className={classes.chips}>\n          {chips.map((chip) => (\n            <MuiChip color='secondary' key={chip} label={chip} size='small' />\n          ))}\n        </div>\n        <div>\n          <MuiTypography display='inline' variant='subtitle2'>\n            {title + ' '}\n          </MuiTypography>\n          <MuiTypography display='inline' variant='caption'>\n            {releaseYear}\n          </MuiTypography>\n        </div>\n      </Link>\n      {!omitActions && (\n        <div className={classes.footer}>\n          <WatchlistButton entity={entity} size='small' slug={slug} />\n          <RecommendButton entity={entity} size='small' slug={slug} />\n          <ListItemManagerButton entity={entity} size='small' slug={slug} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nTile.propTypes = {\n  chips: PropTypes.arrayOf(PropTypes.string),\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  item: PropTypes.object.isRequired,\n  omitActions: PropTypes.bool,\n  size: PropTypes.oneOf(['default', 'small']),\n};\n\nexport default Tile;\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport React from 'react';\n\nimport Tile from '../../components/Tile/Tile.component';\n\nfunction renderTrending(movies) {\n  return movies.map(({ movie, watchers = 0 }) => {\n    const chips = [];\n    if (watchers) {\n      chips.push(`${watchers} people watching`);\n    }\n    return (\n      <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <Tile chips={chips} entity='movies' item={movie} />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderPopular(movies) {\n  return movies.map(({ movie }) => (\n    <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n      <Tile entity='movies' item={movie} />\n    </MuiGrid>\n  ));\n}\n\nfunction renderRecommended(movies) {\n  return movies.map(({ movie, user_count: recommendedByCount = 0 }) => {\n    const chips = [];\n    if (recommendedByCount) {\n      chips.push(`${recommendedByCount} people`);\n    }\n    return (\n      <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <Tile chips={chips} entity='movies' item={movie} />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderWatched(movies) {\n  return movies.map(\n    ({ movie, play_count: plays = 0, watcher_count: watchers = 0 }) => {\n      const chips = [];\n      if (plays) {\n        chips.push(`${plays} plays`);\n      }\n      if (watchers) {\n        chips.push(`${watchers} watches`);\n      }\n      return (\n        <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n          <Tile chips={chips} entity='movies' item={movie} />\n        </MuiGrid>\n      );\n    },\n  );\n}\n\nfunction renderAnticipated(movies) {\n  return movies.map(({ list_count: inListsCount = 0, movie }) => {\n    const chips = [];\n    if (inListsCount) {\n      chips.push(`In ${inListsCount} lists`);\n    }\n    return (\n      <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <Tile chips={chips} entity='movies' item={movie} />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderTiles({ category, movies }) {\n  switch (category) {\n    case 'trending':\n      return renderTrending(movies);\n    case 'popular':\n      return renderPopular(movies);\n    case 'recommended':\n      return renderRecommended(movies);\n    case 'watched':\n      return renderWatched(movies);\n    case 'anticipated':\n      return renderAnticipated(movies);\n    default:\n      return null;\n  }\n}\n\nexport { renderTiles };\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/movies/movies.selectors';\nimport { fetchMovies } from '../../redux/modules/movies/movies.slice';\nimport { renderTiles } from './Movies.utils';\n\nfunction Movies({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const movies = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchMovies({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      <MuiGrid container>{renderTiles({ category, movies })}</MuiGrid>\n      <Pagination\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n    </>\n  );\n}\n\nMovies.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Movies;\n","import PropTypes from 'prop-types';\n\nimport usePoster from '../../hooks/usePoster';\n\nfunction Poster({ children, entity, season, size, tmdbId, type }) {\n  const url = usePoster({\n    entity,\n    season,\n    size,\n    tmdbId,\n    type,\n  });\n  return children(url);\n}\n\nPoster.propTypes = {\n  children: PropTypes.func.isRequired,\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  season: PropTypes.number,\n  size: PropTypes.string,\n  tmdbId: PropTypes.number,\n  type: PropTypes.oneOf(['backdrop', 'poster', 'profile']),\n};\n\nexport default Poster;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.person;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchPerson = createAsyncThunk('person/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [summaryResponse, moviesResponse, showsResponse] = await Promise.all([\n      axios.get(`/trakt/people/${slug}?extended=full`),\n      axios.get(`/trakt/people/${slug}/movies`),\n      axios.get(`/trakt/people/${slug}/shows`),\n    ]);\n    return {\n      movies: moviesResponse.data,\n      shows: showsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchPerson.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    movies: [],\n    shows: [],\n    summary: null,\n  },\n  name: 'person',\n  reducers: {},\n});\n\nexport { fetchPerson };\nexport default reducer;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport ListItemManager from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport Poster from '../../components/Poster/Poster.component';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../redux/modules/person/person.selectors';\nimport { fetchPerson } from '../../redux/modules/person/person.slice';\n\nfunction Person() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'person/fetch'),\n  );\n  const person = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchPerson(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <ListItemManager entity='people' slug={slug} />\n      <Poster\n        entity='people'\n        size='w185'\n        tmdbId={person.summary?.ids.tmdb}\n        type='profile'\n      >\n        {(url) => <img alt='poster' src={url} />}\n      </Poster>\n      <pre>{JSON.stringify(person, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Person;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.search.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.search.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS, transformEntityToSingular } from '../../../utils';\n\nconst fetchSearchResults = createAsyncThunk('search/fetch', async function (\n  { entity, page, query },\n  { rejectWithValue },\n) {\n  try {\n    entity = transformEntityToSingular(entity);\n    const response = await axios.get(\n      `/trakt/search/${entity}?query=${query}&page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchSearchResults.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'search',\n  reducers: {},\n});\n\nexport { fetchSearchResults };\nexport default reducer;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/search/search.selectors';\nimport { fetchSearchResults } from '../../redux/modules/search/search.slice';\n\nfunction Search({ entity }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { query = '' } = useMemo(() => Object.fromEntries(searchParams), [\n    searchParams,\n  ]);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'search/fetch'),\n  );\n  const searchResults = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchSearchResults({ entity, page, query }));\n  }, [dispatch, entity, page, query]);\n\n  function handleQueryChange({ target: { value } }) {\n    setSearchParams({ query: value });\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n      />\n      <div>\n        <label htmlFor='query'>Input your query:</label>\n        <input\n          id='query'\n          onChange={handleQueryChange}\n          type='text'\n          value={query}\n        />\n      </div>\n      <pre>{JSON.stringify(searchResults, null, 2)}</pre>\n    </>\n  );\n}\n\nSearch.propTypes = {\n  entity: PropTypes.oneOf(['all', 'movies', 'shows', 'people']),\n};\n\nexport default Search;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\n\nimport ListItemManagerButton from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport RatingButton from '../../components/buttons/Rating/Rating.component';\nimport RecommendButton from '../../components/buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../../components/buttons/Watchlist/Watchlist.component';\nimport { renderComment } from '../../components/Comments/Comments.utils';\nimport { selectEntity } from '../../redux/modules/show/show.selectors';\nimport { fetchShow } from '../../redux/modules/show/show.slice';\n\nfunction Show() {\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const show = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchShow(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <>\n      <ListItemManagerButton entity='shows' slug={slug} />\n      <WatchlistButton entity='shows' slug={slug} />\n      <RecommendButton entity='shows' slug={slug} />\n      <RatingButton entity='shows' slug={slug} />\n      <Link to='comments'>\n        Showing highest rated comments - Show more comments\n      </Link>\n      {show.comments.map(renderComment)}\n    </>\n  );\n}\n\nexport default Show;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.shows.entities;\n  },\n  function (shows) {\n    return shows;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.shows.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchShows = createAsyncThunk('shows/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/shows/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ show: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShows.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'shows',\n  reducers: {},\n});\n\nexport { fetchShows };\nexport default reducer;\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport React from 'react';\n\nimport Tile from '../../components/Tile/Tile.component';\n\nfunction renderTrending(shows) {\n  return shows.map(({ show, watchers = 0 }) => {\n    const chips = [];\n    if (watchers) {\n      chips.push(`${watchers} people watching`);\n    }\n    return (\n      <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <Tile chips={chips} entity='shows' item={show} />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderPopular(shows) {\n  return shows.map(({ show }) => (\n    <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n      <Tile entity='shows' item={show} />\n    </MuiGrid>\n  ));\n}\n\nfunction renderRecommended(shows) {\n  return shows.map(({ show, user_count: recommendedByCount = 0 }) => {\n    const chips = [];\n    if (recommendedByCount) {\n      chips.push(`${recommendedByCount} people`);\n    }\n    return (\n      <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <Tile chips={chips} entity='shows' item={show} />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderWatched(shows) {\n  return shows.map(\n    ({ play_count: plays = 0, show, watcher_count: watchers = 0 }) => {\n      const chips = [];\n      if (plays) {\n        chips.push(`${plays} plays`);\n      }\n      if (watchers) {\n        chips.push(`${watchers} watches`);\n      }\n      return (\n        <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n          <Tile chips={chips} entity='shows' item={show} />\n        </MuiGrid>\n      );\n    },\n  );\n}\n\nfunction renderAnticipated(shows) {\n  return shows.map(({ list_count: inListsCount = 0, show }) => {\n    const chips = [];\n    if (inListsCount) {\n      chips.push(`In ${inListsCount} lists`);\n    }\n    return (\n      <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <Tile chips={chips} entity='shows' item={show} />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderTiles({ category, shows }) {\n  switch (category) {\n    case 'trending':\n      return renderTrending(shows);\n    case 'popular':\n      return renderPopular(shows);\n    case 'recommended':\n      return renderRecommended(shows);\n    case 'watched':\n      return renderWatched(shows);\n    case 'anticipated':\n      return renderAnticipated(shows);\n    default:\n      return null;\n  }\n}\n\nexport { renderTiles };\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/shows/shows.selectors';\nimport { fetchShows } from '../../redux/modules/shows/shows.slice';\nimport { renderTiles } from './Shows.utils';\n\nfunction Shows({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const shows = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchShows({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      <MuiGrid container>{renderTiles({ category, shows })}</MuiGrid>\n      <Pagination\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n    </>\n  );\n}\n\nShows.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Shows;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.comments.entities;\n  },\n  function (comments) {\n    return comments;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.users.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { renderComment } from '../../../components/Comments/Comments.utils';\nimport Pagination from '../../../components/Pagination/Pagination.component';\nimport usePagination from '../../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../../redux/modules/users/comments/comments.selectors';\nimport { fetchComments } from '../../../redux/modules/users/comments/comments.slice';\n\nfunction Comments() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/comments/fetch'),\n  );\n  const comments = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchComments({ page, userSlug }));\n  }, [dispatch, page, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n      {comments.map(({ comment, type }) => renderComment(comment))}\n    </>\n  );\n}\n\nexport default Comments;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.users.list;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntity } from '../../../redux/modules/users/list/list.selectors';\nimport { fetchList } from '../../../redux/modules/users/list/list.slice';\n\nfunction List() {\n  const { id, userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'list/fetch'),\n  );\n  const list = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchList({ id, userSlug }));\n  }, [dispatch, id, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(list, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default List;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/lists/lists.selectors';\nimport {\n  addList,\n  fetchLists,\n  removeList,\n} from '../../../redux/modules/users/lists/lists.slice';\nimport { getUserSlug } from '../../../utils';\n\nfunction Lists() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/lists/fetch'),\n  );\n  const lists = useSelector(selectEntities);\n  const canManage = userSlug === getUserSlug();\n\n  useEffect(() => {\n    dispatch(fetchLists(userSlug));\n  }, [dispatch, userSlug]);\n\n  function handleAdd() {\n    dispatch(\n      addList({\n        allowComments: false,\n        description: 'This is my list',\n        name: 'My list',\n      }),\n    );\n  }\n\n  function handleRemove() {\n    dispatch(removeList('my-list'));\n  }\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      {canManage && (\n        <>\n          <button onClick={handleAdd} type='button'>\n            Add list\n          </button>\n          <button onClick={handleRemove} type='button'>\n            Remove list\n          </button>\n        </>\n      )}\n      <pre>{JSON.stringify(lists, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Lists;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/ratings/ratings.selectors';\nimport { fetchRatings } from '../../../redux/modules/users/ratings/ratings.slice';\n\nfunction Ratings() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/ratings/fetch'),\n  );\n  const ratings = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchRatings(userSlug));\n  }, [dispatch, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(ratings, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Ratings;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/recommendations/recommendations.selectors';\nimport { fetchRecommendations } from '../../../redux/modules/users/recommendations/recommendations.slice';\n\nfunction Ratings() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/recommendations/fetch'),\n  );\n  const recommendations = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchRecommendations(userSlug));\n  }, [dispatch, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(recommendations, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Ratings;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectLoadingFlag } from '../../../redux/loading/loading.selectors';\nimport { selectEntities } from '../../../redux/modules/users/watchlist/watchlist.selectors';\nimport { fetchWatchlist } from '../../../redux/modules/users/watchlist/watchlist.slice';\n\nfunction Watchlist() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'users/watchlist/fetch'),\n  );\n  const watchlist = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchWatchlist(userSlug));\n  }, [dispatch, userSlug]);\n\n  return (\n    <>\n      {fetching && <div>Loading...</div>}\n      <pre>{JSON.stringify(watchlist, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Watchlist;\n","import { createSlice } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  const patterns = ['/pending', '/fulfilled', '/rejected'];\n  return patterns.some((pattern) => action.type.endsWith(pattern));\n}\n\nconst { reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      const parts = action.type.split('/');\n      const asyncState = parts.pop();\n      state[`${parts.join('/')}`] = asyncState === 'pending';\n    });\n  },\n  initialState: {},\n  name: 'loading',\n  reducers: {},\n});\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport comments from './comments/comments.slice';\nimport list from './list/list.slice';\nimport lists from './lists/lists.slice';\nimport ratings from './ratings/ratings.slice';\nimport recommendations from './recommendations/recommendations.slice';\nimport watchlist from './watchlist/watchlist.slice';\n\nexport default combineReducers({\n  comments,\n  list,\n  lists,\n  ratings,\n  recommendations,\n  watchlist,\n});\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport loading from './loading/loading.slice';\nimport comments from './modules/comments/comments.slice';\nimport movie from './modules/movie/movie.slice';\nimport movies from './modules/movies/movies.slice';\nimport person from './modules/person/person.slice';\nimport search from './modules/search/search.slice';\nimport show from './modules/show/show.slice';\nimport shows from './modules/shows/shows.slice';\nimport users from './modules/users';\nimport notifications from './notifications/notifications.slice';\n\nconst store = configureStore({\n  reducer: {\n    comments,\n    loading,\n    movie,\n    movies,\n    notifications,\n    person,\n    search,\n    show,\n    shows,\n    users,\n  },\n});\n\nexport default store;\n","import { CssBaseline as MuiCssBaseline } from '@material-ui/core';\nimport React, { useMemo } from 'react';\nimport { Provider as ReduxProvider, useSelector } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Navigate,\n  Route,\n  Routes,\n} from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout.component';\nimport LoadingOverlay from './components/LoadingOverlay/LoadingOverlay.component';\nimport NotFound from './components/NotFound/NotFound.component';\nimport useScrollToTopOnLocationChange from './hooks/useScrollToTopOnLocationChange';\nimport {\n  default as MovieComments,\n  default as ShowComments,\n} from './modules/Comments/Comments.component';\nimport Movie from './modules/Movie/Movie.component';\nimport Movies from './modules/Movies/Movies.component';\nimport Person from './modules/Person/Person.component';\nimport Search from './modules/Search/Search.component';\nimport Show from './modules/Show/Show.component';\nimport Shows from './modules/Shows/Shows.component';\nimport Comments from './modules/Users/Comments/Comments.component';\nimport List from './modules/Users/List/List.component';\nimport Lists from './modules/Users/Lists/Lists.component';\nimport Ratings from './modules/Users/Ratings/Ratings.component';\nimport Recommendations from './modules/Users/Recommendations/Recommendations.component';\nimport Watchlist from './modules/Users/Watchlist/Watchlist.component';\nimport { selectLoadingFlagsReducedFactory } from './redux/loading/loading.selectors';\nimport store from './redux/store';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/components/Layouts/Layouts/Layouts.utils.js in variable NAV_PATHS\nfunction App() {\n  useScrollToTopOnLocationChange();\n  const selector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const loading = useSelector((state) =>\n    selector(state, [\n      'movie/fetch',\n      'movies/fetch',\n      'show/fetch',\n      'shows/fetch',\n      'comments/fetch',\n    ]),\n  );\n\n  return (\n    <>\n      {loading && <LoadingOverlay />}\n      <Routes basename='/app'>\n        <Route element={<Navigate replace to='movies/trending' />} path='/' />\n        <Route element={<Layout />} path='/'>\n          <Route path='movies'>\n            <Route element={<Navigate replace to='trending' />} path='/' />\n            <Route element={<Movies category='trending' />} path='trending' />\n            <Route element={<Movies category='popular' />} path='popular' />\n            <Route\n              element={<Movies category='recommended' />}\n              path='recommended'\n            />\n            <Route element={<Movies category='watched' />} path='watched' />\n            <Route\n              element={<Movies category='anticipated' />}\n              path='anticipated'\n            />\n            <Route element={<Movie />} path=':slug' />\n            <Route\n              element={<MovieComments entity='movies' />}\n              path=':slug/comments'\n            />\n          </Route>\n          <Route path='shows'>\n            <Route element={<Navigate replace to='trending' />} path='/' />\n            <Route element={<Shows category='trending' />} path='trending' />\n            <Route element={<Shows category='popular' />} path='popular' />\n            <Route\n              element={<Shows category='recommended' />}\n              path='recommended'\n            />\n            <Route element={<Shows category='watched' />} path='watched' />\n            <Route\n              element={<Shows category='anticipated' />}\n              path='anticipated'\n            />\n            <Route element={<Show />} path=':slug' />\n            <Route\n              element={<ShowComments entity='shows' />}\n              path=':slug/comments'\n            />\n          </Route>\n          <Route element={<Person />} path='people/:slug' />\n          <Route path='search'>\n            <Route element={<Navigate replace to='all' />} path='/' />\n            <Route element={<Search entity='all' />} path='all' />\n            <Route element={<Search entity='movies' />} path='movies' />\n            <Route element={<Search entity='shows' />} path='shows' />\n            <Route element={<Search entity='people' />} path='people' />\n          </Route>\n          <Route path='users/:userSlug'>\n            <Route element={<Navigate replace to='ratings' />} path='/' />\n            <Route element={<Ratings />} path='ratings' />\n            <Route element={<Recommendations />} path='recommendations' />\n            <Route element={<Watchlist />} path='watchlist' />\n            <Route path='lists'>\n              <Route element={<Lists />} path='/' />\n              <Route element={<List />} path=':id' />\n            </Route>\n            <Route element={<Comments />} path='comments' />\n          </Route>\n        </Route>\n        <Route element={<NotFound />} path='*' />\n      </Routes>\n    </>\n  );\n}\n\nfunction Providers() {\n  return (\n    <ReduxProvider store={store}>\n      <Router>\n        <MuiCssBaseline />\n        <App />\n      </Router>\n    </ReduxProvider>\n  );\n}\n\nexport default Providers;\n","import './styles.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App.component';\nimport { fetchLists } from './redux/modules/users/lists/lists.slice';\nimport { fetchRatings } from './redux/modules/users/ratings/ratings.slice';\nimport { fetchRecommendations } from './redux/modules/users/recommendations/recommendations.slice';\nimport { fetchWatchlist } from './redux/modules/users/watchlist/watchlist.slice';\nimport store from './redux/store';\n\nconst { dispatch } = store;\n\n//@TODO: Implement parallel initial calls\n//@TODO: Add default loading state in public/index.html\nasync function init() {\n  await dispatch(fetchLists());\n  await dispatch(fetchRatings());\n  await dispatch(fetchRecommendations());\n  await dispatch(fetchWatchlist());\n}\n\ninit().then(function () {\n  ReactDOM.render(<App />, document.getElementById('root'));\n});\n"],"sourceRoot":""}