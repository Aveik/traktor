{"version":3,"sources":["redux/notifications/notifications.selectors.js","redux/notifications/notifications.slice.js","components/Notifications/Notification/Notification.component.jsx","components/Notifications/Notifications.component.jsx","components/Layout/Layout.styles.js","redux/loading/loading.selectors.js","redux/modules/users/utils.js","redux/modules/users/user/list/list.slice.js","redux/modules/users/user/lists/lists.slice.js","redux/modules/users/profile/list/list.slice.js","redux/modules/users/profile/lists/lists.selectors.js","components/buttons/ListItemManager/ListItemManager.styles.js","components/buttons/ListItemManager/ListItemManager.component.jsx","redux/modules/users/profile/ratings/ratings.selectors.js","redux/modules/users/user/ratings/ratings.slice.js","redux/modules/users/profile/ratings/ratings.slice.js","components/buttons/Rating/Rating.styles.js","components/buttons/Rating/Rating.utils.js","components/buttons/Rating/Rating.component.jsx","redux/modules/users/profile/recommendations/recommendations.selectors.js","redux/modules/users/user/recommendations/recommendations.slice.js","redux/modules/users/profile/recommendations/recommendations.slice.js","components/buttons/Recommend/Recommend.component.jsx","redux/modules/users/profile/watchlist/watchlist.selectors.js","redux/modules/users/user/watchlist/watchlist.slice.js","redux/modules/users/profile/watchlist/watchlist.slice.js","components/buttons/Watchlist/Watchlist.component.jsx","hooks/useImage.js","components/tiles/Tile/Tile.styles.js","components/tiles/Tile/Tile.component.jsx","components/tiles/InteractiveTile/InteractiveTile.styles.js","components/tiles/InteractiveTile/InteractiveTile.component.jsx","components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component.jsx","utils.js","components/Layout/CollapsingListItem/CollapsingListItem.styles.js","components/Layout/CollapsingListItem/CollapsingListItem.component.jsx","components/Layout/Layout.utils.js","components/Layout/Layout.component.jsx","components/LoadingOverlay/LoadingOverlay.styles.js","components/LoadingOverlay/LoadingOverlay.component.jsx","components/NotFound/NotFound.component.jsx","hooks/useScrollToTopOnLocationChange.js","redux/modules/users/user/comments/comments.slice.js","redux/modules/users/profile/comments/comments.slice.js","components/Comments/Editor/Editor.component.jsx","components/Comments/Comment/Comment.component.jsx","components/Comments/Comments.utils.js","components/Comments/Sort/Sort.styles.js","components/Comments/Sort/Sort.component.jsx","components/Pagination/Pagination.styles.js","components/Pagination/Pagination.component.jsx","hooks/usePagination.js","redux/modules/comments/comments.selectors.js","redux/modules/movie/movie.slice.js","redux/modules/show/show.slice.js","redux/modules/comments/comments.slice.js","redux/modules/movie/movie.selectors.js","redux/modules/show/show.selectors.js","modules/Comments/Comments.styles.js","modules/Comments/Comments.component.jsx","modules/Movie/Movie.styles.js","modules/Movie/Movie.component.jsx","redux/modules/movies/movies.selectors.js","redux/modules/movies/movies.slice.js","modules/Movies/Movies.utils.js","modules/Movies/Movies.component.jsx","redux/modules/person/person.selectors.js","redux/modules/person/person.slice.js","modules/Person/Person.styles.js","modules/Person/Person.component.jsx","redux/modules/search/search.selectors.js","redux/modules/search/search.slice.js","modules/Search/Search.component.jsx","modules/Show/Show.styles.js","modules/Show/Show.component.jsx","redux/modules/shows/shows.selectors.js","redux/modules/shows/shows.slice.js","modules/Shows/Shows.utils.js","modules/Shows/Shows.component.jsx","redux/modules/users/profile/comments/comments.selectors.js","redux/modules/users/user/comments/comments.selectors.js","modules/Users/Comments/Comments.component.jsx","redux/modules/users/profile/list/list.selectors.js","redux/modules/users/user/list/list.selectors.js","modules/Users/List/List.component.jsx","redux/modules/users/profile/lists/lists.slice.js","redux/modules/users/user/lists/lists.selectors.js","modules/Users/Lists/Lists.component.jsx","redux/modules/users/user/ratings/ratings.selectors.js","modules/Users/Ratings/Ratings.component.jsx","redux/modules/users/user/recommendations/recommendations.selectors.js","modules/Users/Recommendations/Recommendations.component.jsx","modules/Users/Users.component.jsx","redux/modules/users/user/watchlist/watchlist.selectors.js","modules/Users/Watchlist/Watchlist.component.jsx","redux/loading/loading.slice.js","redux/modules/users/profile/index.js","redux/modules/users/user/index.js","redux/modules/users/index.js","redux/store.js","App.component.jsx","redux/init.js","index.js"],"names":["selectNotifications","createSelector","state","notifications","matches","action","type","endsWith","createSlice","extraReducers","builder","addMatcher","meta","requestId","payload","initialState","name","reducers","createNotification","prepare","message","id","nanoid","reducer","removeNotification","actions","Notification","dispatch","useDispatch","onClick","Notifications","useSelector","Object","entries","map","makeStyles","drawerPaper","width","stateSelector","loading","selector","_","actionTypes","selectLoadingFlag","actionType","Boolean","selectLoadingFlagsReducedFactory","keys","filter","includes","some","isForLoggedUser","userSlug","getUserSlug","fetchList","createAsyncThunk","a","rejectWithValue","Promise","all","axios","get","listResponse","itemsResponse","data","items","filterOutUnsupportedEntityTypes","toString","fulfilled","arg","fetchLists","response","list","ids","slug","listItems","index","removeFromList","entity","listSlug","post","addToList","addToListAndRefetch","params","removeFromListAndRefetch","item","transformEntityToSingular","selectEntities","users","profile","lists","selectListsForManagerFactory","__","listed","listItemActionRoot","minWidth","ListItemManager","size","classes","useStyles","listsSelector","useMemo","loadingSelector","useState","anchorEl","setAnchorEl","open","listedOnCount","length","handleOpen","e","currentTarget","handleClick","fn","button","color","disabled","fullWidth","startIcon","variant","title","fontSize","anchorOrigin","horizontal","vertical","onClose","transformOrigin","dense","subheader","root","checked","disableRipple","edge","ratings","selectRatingFactory","result","find","rating","fetchRatings","postRating","removeRating","theme","buttonRoot","popoverPaper","padding","spacing","paddingBottom","ratingRoot","palette","secondary","main","getRatingLabelFromValue","value","Rating","overallRating","hoveredRating","setHoveredRating","hasHoveredRating","paper","textAlign","icon","max","onChange","postRatingAndFetch","onChangeActive","recommendations","selectIsRecommendFactory","recommendation","fetchRecommendations","postRecommendation","removeRecommendation","Recommend","isRecommended","handleRecommend","postRecommendationAndRefetch","watchlist","selectIsWatchlistedFactory","fetchWatchlist","addToWatchlist","removeFromWatchlist","Watchlist","isWatchlisted","handleWatchlist","addToWatchlistAndRefetch","useImage","season","tmdbId","url","undefined","children","content","bottom","left","position","footer","marginRight","backgroundColor","grey","link","backgroundImage","isPerson","background","primary","contrastText","display","paddingTop","Tile","isSmallSize","imageUrl","className","style","backgroundSize","to","chips","margin","common","white","InteractiveTile","isPeople","chip","label","container","justify","xs","InteractiveTileWithRating","props","ALLOWED_ENTITY_TYPES","DEFAULTS","extractFactsDefault","stats","summary","transformRatingToPercentage","transformNumberToK","votes","Date","released","toLocaleDateString","genres","capitalize","join","certification","watchers","plays","comments","href","trailer","document","cookie","split","reduce","acc","key","renderTileBasedOnType","Wrapper","wrapperProps","transformEntityToPlural","tmdb","year","num","Math","abs","sign","toFixed","decimalPlaces","nestedListItemGutters","paddingLeft","CollapsingListItem","listItemTextProps","setOpen","preventDefault","ExpandLess","ExpandMore","in","disablePadding","React","Children","child","cloneElement","gutters","NAV_PATHS","nested","path","Layout","anchor","px","py","regularListItemProps","activeClassName","component","NavLink","collapsingListItemProps","ml","alignItems","text","height","justifyContent","top","zIndex","drawer","LoadingOverlay","fullscreen","useEffect","body","overflow","ReactDOM","createPortal","getElementById","NotFound","useScrollToTopOnLocationChange","location","useLocation","window","scrollTo","fetchComments","page","entities","total","parseInt","headers","pagination","postComment","comment","spoiler","removeComment","delete","updateComment","put","findIndex","splice","Editor","onSubmit","setState","reset","helperText","multiline","target","selected","Comment","createdAt","review","username","userRating","fetching","canEdit","isEditing","isRemoving","MuiPaper","toLocaleString","Edit","Delete","mt","then","allowDangerousHtml","emoji","shortnameToImage","secondaryTypographyProps","renderComment","console","log","created_at","user","user_rating","SORT_OPTIONS","textFieldRoot","Sort","select","isWrapped","Pagination","hasNextPage","hasPreviousPage","onFirstPage","onLastPage","onNextPage","onPreviousPage","pagesTotal","firstPageDisabled","previousPageDisabled","nextPageDisabled","lastPageDisabled","FirstPage","LastPage","usePagination","pagesTotalSelector","useSearchParams","searchParams","setSearchParams","fromEntries","otherSearchProps","toFirstPage","toLastPage","toNextPage","toPage","toPreviousPage","selectPagesTotal","fetchMovie","statsResponse","summaryResponse","commentsResponse","peopleResponse","ratingsResponse","relatedResponse","people","related","fetchShow","seasonsResponse","seasons","reverse","sort","unshift","selectEntity","movie","show","buttons","marginBottom","commentsRoot","marginLeft","facts","flexWrap","factsItem","whiteSpace","fixedColumn","overview","SIDE_MENU_LINKS","Comments","fetchingSelector","isFirstRender","useRef","useParams","selectMovie","selectShow","isAddingComment","setSort","current","fetchEntityAndComments","Movie","tagline","wrap","cast","character","person","flex","direction","Link","movies","fetchMovies","category","renderTiles","push","lg","md","sm","trakt","renderTrending","renderPopular","user_count","recommendedByCount","renderRecommended","play_count","watcher_count","renderWatched","list_count","inListsCount","renderAnticipated","Movies","fetchPerson","moviesResponse","showsResponse","shows","extractFacts","birthplace","birthday","Person","biography","search","fetchSearchResults","query","Search","searchResults","m","defaultValue","onKeyDown","keyCode","MuiGrid","Show","number","episodes","fetchShows","Shows","selectProfileComments","selectUserComments","List","selectProfileList","selectUserList","p","addList","removeList","Lists","selectProfileLists","selectUserLists","allowComments","description","JSON","stringify","Ratings","selectProfileRatings","selectUserRatings","selectProfileRecommendations","selectUserRecommendations","Users","selectProfileWatchlist","selectUserWatchlist","pattern","parts","asyncState","pop","combineReducers","store","configureStore","App","basename","element","replace","Providers","init","render"],"mappings":"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","file":"static/js/main.29774ecf.chunk.js","sourcesContent":["import { createSelector } from '@reduxjs/toolkit';\n\nconst selectNotifications = createSelector(\n  function (state) {\n    return state.notifications;\n  },\n  function (notifications) {\n    return notifications;\n  },\n);\n\nexport { selectNotifications };\n","import { createSlice, nanoid } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  return action.type.endsWith('/rejected');\n}\n\nconst { actions, reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      state[action.meta.requestId] = action.payload;\n    });\n  },\n  initialState: {},\n  name: 'notifications',\n  reducers: {\n    createNotification: {\n      prepare(message) {\n        return {\n          payload: {\n            id: nanoid(),\n            message,\n          },\n        };\n      },\n      reducer(state, action) {\n        state[action.payload.id] = action.payload.message;\n      },\n    },\n    removeNotification(state, action) {\n      delete state[action.payload];\n    },\n  },\n});\n\nconst { createNotification, removeNotification } = actions;\n\nexport { createNotification, removeNotification };\nexport default reducer;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { removeNotification } from '../../../redux/notifications/notifications.slice';\n\nfunction Notification({ id, message }) {\n  const dispatch = useDispatch();\n\n  function handleClick() {\n    dispatch(removeNotification(id));\n  }\n\n  return <div onClick={handleClick}>{message}</div>;\n}\n\nexport default Notification;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectNotifications } from '../../redux/notifications/notifications.selectors';\nimport Notification from './Notification/Notification.component';\n\nfunction Notifications() {\n  const notifications = useSelector(selectNotifications);\n  return Object.entries(notifications).map(([id, message]) => (\n    <Notification id={id} key={id} message={message} />\n  ));\n}\n\nexport default Notifications;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  drawerPaper: {\n    width: 256,\n  },\n});\n","import { createSelector } from '@reduxjs/toolkit';\n\nfunction stateSelector(state) {\n  return state.loading;\n}\n\n// Action types can be a string or array of strings\nfunction selector(_, actionTypes) {\n  return actionTypes;\n}\n\nconst selectLoadingFlag = createSelector([stateSelector, selector], function (\n  loading,\n  actionType,\n) {\n  return Boolean(loading[actionType]);\n});\n\nfunction selectLoadingFlagsFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state.loading)\n      .filter((action) => actionTypes.includes(action))\n      .map((action) => state.loading[action]);\n  });\n}\n\nfunction selectLoadingFlagsReducedFactory() {\n  return createSelector([stateSelector, selector], function (\n    state,\n    actionTypes,\n  ) {\n    return Object.keys(state)\n      .filter((action) => actionTypes.includes(action))\n      .some((action) => state[action]);\n  });\n}\n\nexport {\n  selectLoadingFlag,\n  selectLoadingFlagsFactory,\n  selectLoadingFlagsReducedFactory,\n};\n","import { getUserSlug } from '../../../utils';\n\nfunction isForLoggedUser(userSlug) {\n  return !userSlug || userSlug === getUserSlug();\n}\n\nexport { isForLoggedUser };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  filterOutUnsupportedEntityTypes,\n  getUserSlug,\n} from '../../../../../utils';\nimport { isForLoggedUser } from '../../utils';\n\nconst fetchList = createAsyncThunk('users/list/fetch', async function (\n  { id, userSlug = getUserSlug() },\n  { rejectWithValue },\n) {\n  try {\n    const [listResponse, itemsResponse] = await Promise.all([\n      axios.get(`/trakt/users/${userSlug}/lists/${id}`),\n      axios.get(`/trakt/users/${userSlug}/lists/${id}/items?extended=full`),\n    ]);\n    return {\n      ...listResponse.data,\n      items: filterOutUnsupportedEntityTypes(itemsResponse.data),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchList.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg.userSlug)) {\n        return state;\n      }\n      return action.payload;\n    },\n  },\n  initialState: {\n    items: [],\n  },\n  name: 'list',\n  reducers: {},\n});\n\nexport { fetchList };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  filterOutUnsupportedEntityTypes,\n  getUserSlug,\n} from '../../../../../utils';\nimport { isForLoggedUser } from '../../utils';\n\nconst fetchLists = createAsyncThunk('users/lists/fetch', async function (\n  userSlug = getUserSlug(),\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(`/trakt/users/${userSlug}/lists`);\n    const listItems = await Promise.all(\n      response.data.map((list) =>\n        axios.get(`/trakt/users/${userSlug}/lists/${list.ids.slug}/items`),\n      ),\n    );\n    return response.data.map((list, index) => ({\n      ...list,\n      items: filterOutUnsupportedEntityTypes(listItems[index].data),\n    }));\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchLists.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return state;\n      }\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/lists',\n  reducers: {},\n});\n\nexport { fetchLists };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug, transformEntityToSingular } from '../../../../../utils';\nimport { fetchList } from '../../user/list/list.slice';\nimport { fetchLists } from '../../user/lists/lists.slice';\nimport { isForLoggedUser } from '../../utils';\n\nconst removeFromList = createAsyncThunk('users/list/remove', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(\n      `/trakt/users/${getUserSlug()}/lists/${listSlug}/items/remove`,\n      {\n        [entity]: [{ ids: { slug } }],\n      },\n    );\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst addToList = createAsyncThunk('users/list/add', async function (\n  { entity, listSlug, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post(`/trakt/users/${getUserSlug()}/lists/${listSlug}/items`, {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction addToListAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(addToList(params));\n    await dispatch(fetchLists());\n  };\n}\n\nfunction removeFromListAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeFromList(params));\n    await dispatch(fetchLists());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchList.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg.userSlug)) {\n        return action.payload;\n      }\n      return state;\n    },\n    [removeFromList.fulfilled](state, action) {\n      const { entity, listSlug, slug } = action.meta.arg;\n      if (state.ids?.slug === listSlug) {\n        state.items = state.items.filter(\n          (item) =>\n            item.type !== entity &&\n            item[transformEntityToSingular(entity)].ids.slug !== slug,\n        );\n      }\n      return state;\n    },\n  },\n  initialState: {\n    items: [],\n  },\n  name: 'users/list',\n  reducers: {},\n});\n\nexport { addToListAndRefetch, fetchList, removeFromListAndRefetch };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.profile.lists;\n  },\n  function (lists) {\n    return lists;\n  },\n);\n\nfunction selectListsForManagerFactory() {\n  return createSelector(\n    function (state) {\n      return state.users.profile.lists;\n    },\n    function (_, entity) {\n      return entity;\n    },\n    function (_, __, slug) {\n      return slug;\n    },\n    function (lists, entity, slug) {\n      entity = transformEntityToSingular(entity);\n      return lists.map((list) => {\n        const listed = list.items.some(\n          (item) => item.type === entity && item[entity].ids.slug === slug,\n        );\n        return {\n          listed,\n          name: list.name,\n          slug: list.ids.slug,\n        };\n      });\n    },\n  );\n}\n\nexport { selectEntities, selectListsForManagerFactory };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  listItemActionRoot: {\n    minWidth: 32,\n  },\n});\n","import {\n  Button as MuiButton,\n  Checkbox as MuiCheckbox,\n  IconButton as MuiIconButton,\n  LinearProgress as MuiLinearProgress,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemIcon as MuiListItemAction,\n  ListItemText as MuiListItemText,\n  ListSubheader as MuiListSubheader,\n  Popover as MuiPopover,\n  Tooltip as MuiTooltip,\n} from '@material-ui/core';\nimport { List as ListIcon } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport {\n  addToListAndRefetch,\n  removeFromListAndRefetch,\n} from '../../../redux/modules/users/profile/list/list.slice';\nimport { selectListsForManagerFactory } from '../../../redux/modules/users/profile/lists/lists.selectors';\nimport useStyles from './ListItemManager.styles';\n\nfunction ListItemManager({ entity, size = 'default', slug }) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const listsSelector = useMemo(selectListsForManagerFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/lists/fetch',\n      'users/list/add',\n      'users/list/remove',\n    ]),\n  );\n  const lists = useSelector((state) => listsSelector(state, entity, slug));\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const listedOnCount = useMemo(\n    () => lists.filter(({ listed }) => Boolean(listed)).length,\n    [lists],\n  );\n\n  function handleOpen(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  //@TODO: catch in case recommendation failed\n  function handleClick(entity, listed, listSlug) {\n    return function () {\n      let fn = addToListAndRefetch;\n      if (listed) {\n        fn = removeFromListAndRefetch;\n      }\n      dispatch(fn({ entity, listSlug, slug }));\n    };\n  }\n\n  let button = (\n    <MuiButton\n      color='secondary'\n      disabled={loading}\n      fullWidth\n      onClick={handleOpen}\n      startIcon={<ListIcon />}\n      variant={listedOnCount ? 'contained' : 'outlined'}\n    >\n      {listedOnCount ? `Listed on ${listedOnCount} lists` : 'Add to your lists'}\n    </MuiButton>\n  );\n\n  if (size === 'small') {\n    button = (\n      <MuiTooltip\n        title={\n          listedOnCount\n            ? `Listed on ${listedOnCount} lists`\n            : 'Add to your lists'\n        }\n      >\n        <MuiIconButton\n          color={listedOnCount ? 'secondary' : 'inherit'}\n          onClick={handleOpen}\n          size='small'\n        >\n          <ListIcon fontSize='small' />\n        </MuiIconButton>\n      </MuiTooltip>\n    );\n  }\n\n  return (\n    <>\n      {button}\n      <MuiPopover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'center',\n          vertical: 'bottom',\n        }}\n        onClose={handleClose}\n        open={open}\n        transformOrigin={{\n          horizontal: 'center',\n          vertical: 'top',\n        }}\n      >\n        {loading && <MuiLinearProgress color='secondary' />}\n        <MuiList\n          dense\n          subheader={\n            <MuiListSubheader>\n              Listed on {listedOnCount} of {lists.length} lists\n            </MuiListSubheader>\n          }\n        >\n          {lists.map(({ listed, name, slug }) => (\n            <MuiListItem\n              button\n              disabled={loading}\n              key={slug}\n              onClick={handleClick(entity, listed, slug)}\n            >\n              <MuiListItemAction\n                classes={{\n                  root: classes.listItemActionRoot,\n                }}\n              >\n                <MuiCheckbox\n                  checked={listed}\n                  disableRipple\n                  edge='start'\n                  size='small'\n                />\n              </MuiListItemAction>\n              <MuiListItemText>{name}</MuiListItemText>\n            </MuiListItem>\n          ))}\n        </MuiList>\n      </MuiPopover>\n    </>\n  );\n}\n\nListItemManager.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default ListItemManager;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.profile.ratings;\n  },\n  function (ratings) {\n    return ratings;\n  },\n);\n\nfunction selectRatingFactory() {\n  return createSelector(\n    [\n      function (state) {\n        return state.users.profile.ratings;\n      },\n      function (_, entity) {\n        return transformEntityToSingular(entity);\n      },\n      function (_, __, slug) {\n        return slug;\n      },\n    ],\n    function (ratings, entity, slug) {\n      const result = ratings.find(\n        (rating) => rating.type === entity && rating[entity].ids.slug === slug,\n      );\n      return result ? result.rating : 0;\n    },\n  );\n}\n\nexport { selectEntities, selectRatingFactory };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  filterOutUnsupportedEntityTypes,\n  getUserSlug,\n} from '../../../../../utils';\nimport { isForLoggedUser } from '../../utils';\n\nconst fetchRatings = createAsyncThunk('users/ratings/fetch', async function (\n  userSlug = getUserSlug(),\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/users/${userSlug}/ratings?page=1&limit=10`,\n    );\n    return filterOutUnsupportedEntityTypes(response.data);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRatings.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return state;\n      }\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/ratings',\n  reducers: {},\n});\n\nexport { fetchRatings };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { fetchRatings } from '../../user/ratings/ratings.slice';\nimport { isForLoggedUser } from '../../utils';\n\nconst postRating = createAsyncThunk('users/ratings/rate', async function (\n  { entity, rating, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings', {\n      [entity]: [\n        {\n          ids: { slug },\n          rating,\n        },\n      ],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeRating = createAsyncThunk('users/ratings/remove', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/ratings/remove', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction postRatingAndFetch(params) {\n  return async function (dispatch) {\n    await dispatch(postRating(params));\n    await dispatch(fetchRatings());\n  };\n}\n\nfunction removeRatingAndFetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeRating(params));\n    await dispatch(fetchRatings());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRatings.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return action.payload;\n      }\n      return state;\n    },\n  },\n  initialState: [],\n  name: 'users/ratings',\n  reducers: {},\n});\n\nexport { postRatingAndFetch, removeRatingAndFetch };\nexport default reducer;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  buttonRoot: {\n    minWidth: 154,\n  },\n  popoverPaper: {\n    padding: theme.spacing(1),\n    paddingBottom: theme.spacing(0.25),\n  },\n  ratingRoot: {\n    color: theme.palette.secondary.main,\n  },\n}));\n","function getRatingFromValue(value) {\n  if (value === -1) {\n    return 0;\n  }\n  return value;\n}\n\nfunction getRatingLabelFromValue(value) {\n  switch (value) {\n    case -1:\n      return 'Unrate';\n    case 1:\n      return '1 - Weak sauce';\n    case 2:\n      return '2 - Terrible';\n    case 3:\n      return '3 - Bad';\n    case 4:\n      return '4 - Poor';\n    case 5:\n      return '5 - Meh';\n    case 6:\n      return '6 - Fair';\n    case 7:\n      return '7 - Good';\n    case 8:\n      return '8 - Great';\n    case 9:\n      return '9 - Superb';\n    case 10:\n      return '10 - Excellent!';\n    default:\n      return 'Rate';\n  }\n}\n\nexport { getRatingFromValue, getRatingLabelFromValue };\n","import {\n  Box as MuiBox,\n  Button as MuiButton,\n  IconButton as MuiIconButton,\n  Popover as MuiPopover,\n  Tooltip as MuiTooltip,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport { Favorite as HeartIcon } from '@material-ui/icons';\nimport { Rating as MuiRating } from '@material-ui/lab';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport { selectRatingFactory } from '../../../redux/modules/users/profile/ratings/ratings.selectors';\nimport {\n  postRatingAndFetch,\n  removeRatingAndFetch,\n} from '../../../redux/modules/users/profile/ratings/ratings.slice';\nimport useStyles from './Rating.styles';\nimport { getRatingFromValue, getRatingLabelFromValue } from './Rating.utils';\n\nfunction Rating({ entity, overallRating, size, slug }) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const selector = useMemo(selectRatingFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const rating = useSelector((state) => selector(state, entity, slug));\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/ratings/fetch',\n      'users/ratings/rate',\n      'users/ratings/remove',\n    ]),\n  );\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const [hoveredRating, setHoveredRating] = useState(null);\n  const hasHoveredRating = hoveredRating !== null;\n\n  function handleOpen(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setHoveredRating(null);\n    setAnchorEl(null);\n  }\n\n  function handleActiveChange(_, hoveredRating) {\n    if (hoveredRating === rating) {\n      setHoveredRating(-1);\n      return;\n    }\n    if (hoveredRating === -1) {\n      setHoveredRating(null);\n      return;\n    }\n    setHoveredRating(hoveredRating);\n  }\n\n  function handleChange(_, rating) {\n    if (!rating) {\n      dispatch(removeRatingAndFetch({ entity, slug }));\n      return;\n    }\n    dispatch(postRatingAndFetch({ entity, rating, slug }));\n  }\n\n  let button = (\n    <MuiButton\n      classes={{\n        root: classes.buttonRoot,\n      }}\n      color='secondary'\n      fullWidth\n      onClick={handleOpen}\n      startIcon={<HeartIcon />}\n      variant={rating ? 'contained' : 'outlined'}\n    >\n      {getRatingLabelFromValue(hasHoveredRating ? hoveredRating : rating)}\n    </MuiButton>\n  );\n\n  if (size === 'small') {\n    button = (\n      <MuiTooltip title='Rate'>\n        <span>\n          <MuiTypography\n            color={overallRating || !rating ? 'inherit' : 'secondary'}\n            variant='caption'\n          >\n            {overallRating ||\n              getRatingFromValue(hasHoveredRating ? hoveredRating : rating)}\n          </MuiTypography>\n          <MuiIconButton\n            color={rating ? 'secondary' : 'inherit'}\n            onClick={handleOpen}\n            size='small'\n          >\n            <HeartIcon fontSize='small' />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    );\n  }\n\n  return (\n    <>\n      {button}\n      <MuiPopover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'center',\n          vertical: 'bottom',\n        }}\n        classes={{\n          paper: classes.popoverPaper,\n        }}\n        onClose={handleClose}\n        open={open}\n        transformOrigin={{\n          horizontal: 'center',\n          vertical: 'top',\n        }}\n      >\n        {size === 'small' && (\n          <MuiBox textAlign='center'>\n            {getRatingLabelFromValue(hasHoveredRating ? hoveredRating : rating)}\n          </MuiBox>\n        )}\n        <MuiRating\n          classes={{\n            root: classes.ratingRoot,\n          }}\n          disabled={loading}\n          icon={<HeartIcon fontSize='inherit' />}\n          max={10}\n          name='_'\n          onChange={handleChange}\n          onChangeActive={handleActiveChange}\n          value={rating}\n        />\n      </MuiPopover>\n    </>\n  );\n}\n\nRating.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  overallRating: PropTypes.node,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default Rating;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../../utils';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.profile.recommendations;\n  },\n  function (recommendations) {\n    return recommendations;\n  },\n);\n\nfunction selectIsRecommendFactory() {\n  return createSelector(\n    [\n      function (state) {\n        return state.users.profile.recommendations;\n      },\n      function (_, entity) {\n        return transformEntityToSingular(entity);\n      },\n      function (_, __, slug) {\n        return slug;\n      },\n    ],\n    function (recommendations, entity, slug) {\n      const result = recommendations.find(\n        (recommendation) =>\n          recommendation.type === entity &&\n          recommendation[entity].ids.slug === slug,\n      );\n      return Boolean(result);\n    },\n  );\n}\n\nexport { selectEntities, selectIsRecommendFactory };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../../utils';\nimport { isForLoggedUser } from '../../utils';\n\nconst fetchRecommendations = createAsyncThunk(\n  'users/recommendations/fetch',\n  async function (userSlug = getUserSlug(), { rejectWithValue }) {\n    try {\n      const response = await axios.get(\n        `/trakt/users/${userSlug}/recommendations?extended=full`,\n      );\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRecommendations.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return state;\n      }\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/recommendations',\n  reducers: {},\n});\n\nexport { fetchRecommendations };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { fetchRecommendations } from '../../user/recommendations/recommendations.slice';\nimport { isForLoggedUser } from '../../utils';\n\nconst postRecommendation = createAsyncThunk(\n  'users/recommendations/recommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst removeRecommendation = createAsyncThunk(\n  'users/recommendations/unrecommend',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/recommendations/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction postRecommendationAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(postRecommendation(params));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nfunction removeRecommendationAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeRecommendation(params));\n    await dispatch(fetchRecommendations());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchRecommendations.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return action.payload;\n      }\n      return state;\n    },\n  },\n  initialState: [],\n  name: 'users/recommendations',\n  reducers: {},\n});\n\nexport { postRecommendationAndRefetch, removeRecommendationAndRefetch };\nexport default reducer;\n","import {\n  Button as MuiButton,\n  CircularProgress as MuiCircularProgress,\n  IconButton as MuiIconButton,\n  Tooltip as MuiTooltip,\n} from '@material-ui/core';\nimport { ThumbUp as RecommendIcon } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport { selectIsRecommendFactory } from '../../../redux/modules/users/profile/recommendations/recommendations.selectors';\nimport {\n  postRecommendationAndRefetch,\n  removeRecommendationAndRefetch,\n} from '../../../redux/modules/users/profile/recommendations/recommendations.slice';\n\nfunction Recommend({ entity, size = 'default', slug }) {\n  const dispatch = useDispatch();\n  const selector = useMemo(selectIsRecommendFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isRecommended = useSelector((state) => selector(state, entity, slug));\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/recommendations/fetch',\n      'users/recommendations/recommend',\n      'users/recommendations/unrecommend',\n    ]),\n  );\n\n  //@TODO: catch in case recommendation failed\n  function handleRecommend() {\n    if (isRecommended) {\n      dispatch(removeRecommendationAndRefetch({ entity, slug }));\n      return;\n    }\n    dispatch(postRecommendationAndRefetch({ entity, slug }));\n  }\n\n  if (size === 'small') {\n    return (\n      <MuiTooltip\n        title={isRecommended ? 'Remove from recommendations' : 'Recommend'}\n      >\n        <span>\n          <MuiIconButton\n            color={isRecommended ? 'secondary' : 'inherit'}\n            disabled={loading}\n            onClick={handleRecommend}\n            size='small'\n          >\n            {loading ? (\n              <MuiCircularProgress color='secondary' size={20} />\n            ) : (\n              <RecommendIcon fontSize='small' />\n            )}\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    );\n  }\n  return (\n    <MuiButton\n      color='secondary'\n      disabled={loading}\n      fullWidth\n      onClick={handleRecommend}\n      startIcon={<RecommendIcon />}\n      variant={isRecommended ? 'contained' : 'outlined'}\n    >\n      {isRecommended ? 'Remove from recommendations' : 'Recommend'}\n    </MuiButton>\n  );\n}\n\nRecommend.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default,', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default Recommend;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { transformEntityToSingular } from '../../../../../utils';\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.profile.watchlist;\n  },\n  function (watchlist) {\n    return watchlist;\n  },\n);\n\nfunction selectIsWatchlistedFactory() {\n  return createSelector(\n    [\n      function (state) {\n        return state.users.profile.watchlist;\n      },\n      function (_, entity) {\n        return transformEntityToSingular(entity);\n      },\n      function (_, __, slug) {\n        return slug;\n      },\n    ],\n    function (watchlist, entity, slug) {\n      const result = watchlist.find(\n        (item) => item.type === entity && item[entity].ids.slug === slug,\n      );\n      return Boolean(result);\n    },\n  );\n}\n\nexport { selectEntities, selectIsWatchlistedFactory };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  filterOutUnsupportedEntityTypes,\n  getUserSlug,\n} from '../../../../../utils';\nimport { isForLoggedUser } from '../../utils';\n\nconst fetchWatchlist = createAsyncThunk(\n  'users/watchlist/fetch',\n  async function (userSlug = getUserSlug(), { rejectWithValue }) {\n    try {\n      const response = await axios.get(\n        `/trakt/users/${userSlug}/watchlist?extended=full`,\n      );\n      return filterOutUnsupportedEntityTypes(response.data);\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchWatchlist.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return state;\n      }\n      return action.payload;\n    },\n  },\n  initialState: [],\n  name: 'users/watchlist',\n  reducers: {},\n});\n\nexport { fetchWatchlist };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { fetchWatchlist } from '../../user/watchlist/watchlist.slice';\nimport { isForLoggedUser } from '../../utils';\n\nconst addToWatchlist = createAsyncThunk('users/watchlist/add', async function (\n  { entity, slug },\n  { rejectWithValue },\n) {\n  try {\n    await axios.post('/trakt/sync/watchlist', {\n      [entity]: [{ ids: { slug } }],\n    });\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeFromWatchlist = createAsyncThunk(\n  'users/watchlist/remove',\n  async function ({ entity, slug }, { rejectWithValue }) {\n    try {\n      await axios.post('/trakt/sync/watchlist/remove', {\n        [entity]: [{ ids: { slug } }],\n      });\n    } catch (error) {\n      return rejectWithValue(error.toString());\n    }\n  },\n);\n\nfunction addToWatchlistAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(addToWatchlist(params));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nfunction removeFromWatchlistAndRefetch(params) {\n  return async function (dispatch) {\n    await dispatch(removeFromWatchlist(params));\n    await dispatch(fetchWatchlist());\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchWatchlist.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return action.payload;\n      }\n      return state;\n    },\n  },\n  initialState: [],\n  name: 'users/watchlist',\n  reducers: {},\n});\n\nexport { addToWatchlistAndRefetch, removeFromWatchlistAndRefetch };\nexport default reducer;\n","import {\n  Button as MuiButton,\n  CircularProgress as MuiCircularProgress,\n  IconButton as MuiIconButton,\n  Tooltip as MuiTooltip,\n} from '@material-ui/core';\nimport { WatchLater as WatchlistIcon } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport { selectIsWatchlistedFactory } from '../../../redux/modules/users/profile/watchlist/watchlist.selectors';\nimport {\n  addToWatchlistAndRefetch,\n  removeFromWatchlistAndRefetch,\n} from '../../../redux/modules/users/profile/watchlist/watchlist.slice';\n\nfunction Watchlist({ entity, size = 'default', slug }) {\n  const dispatch = useDispatch();\n  const selector = useMemo(selectIsWatchlistedFactory, []);\n  const loadingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isWatchlisted = useSelector((state) => selector(state, entity, slug));\n  const loading = useSelector((state) =>\n    loadingSelector(state, [\n      'users/watchlist/fetch',\n      'users/watchlist/add',\n      'users/watchlist/remove',\n    ]),\n  );\n\n  //@TODO: catch in case watchlist request fails\n  function handleWatchlist() {\n    if (isWatchlisted) {\n      dispatch(removeFromWatchlistAndRefetch({ entity, slug }));\n      return;\n    }\n    dispatch(addToWatchlistAndRefetch({ entity, slug }));\n  }\n\n  if (size === 'small') {\n    return (\n      <MuiTooltip\n        title={isWatchlisted ? 'Remove from watchlist' : 'Add to watchlist'}\n      >\n        <span>\n          <MuiIconButton\n            color={isWatchlisted ? 'secondary' : 'inherit'}\n            disabled={loading}\n            onClick={handleWatchlist}\n            size='small'\n          >\n            {loading ? (\n              <MuiCircularProgress color='secondary' size={20} />\n            ) : (\n              <WatchlistIcon fontSize='small' />\n            )}\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    );\n  }\n  return (\n    <MuiButton\n      color='secondary'\n      disabled={loading}\n      fullWidth\n      onClick={handleWatchlist}\n      startIcon={<WatchlistIcon />}\n      variant={isWatchlisted ? 'contained' : 'outlined'}\n    >\n      {isWatchlisted ? 'Remove from watchlist' : 'Add to watchlist'}\n    </MuiButton>\n  );\n}\n\nWatchlist.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  size: PropTypes.oneOf(['default,', 'small']),\n  slug: PropTypes.string.isRequired,\n};\n\nexport default Watchlist;\n","import { transformEntityToSingular } from '../utils';\n\nfunction useImage({ entity, season, size, tmdbId, type }) {\n  entity = transformEntityToSingular(entity);\n  if (!tmdbId) {\n    return '/images/placeholder.png';\n  }\n\n  let url = `/images/${entity}/${tmdbId}/${type}?`;\n  if (season !== undefined) {\n    url += `season=${season}`;\n  }\n  if (size) {\n    url += `size=${size}`;\n  }\n  return url;\n}\n\nexport default useImage;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  children: {\n    textAlign: 'center',\n  },\n  content: {\n    bottom: theme.spacing(1),\n    left: theme.spacing(1),\n    position: 'absolute',\n  },\n  footer: {\n    '& > *:not(:last-child)': {\n      marginRight: theme.spacing(1),\n    },\n    backgroundColor: theme.palette.grey[900],\n  },\n  link: ({ backgroundImage, isPerson }) => ({\n    background: `url(${backgroundImage}) no-repeat ${\n      isPerson ? 'top center' : 'center'\n    }`,\n    color: theme.palette.primary.contrastText,\n    display: 'block',\n    paddingTop: '148%', // 25 : 37 poster ratio,\n    position: 'relative',\n    width: '100%',\n  }),\n  root: {},\n}));\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport useImage from '../../../hooks/useImage';\nimport useStyles from './Tile.styles';\n\nfunction Tile({\n  children,\n  content,\n  entity,\n  season,\n  size = 'default',\n  slug,\n  tmdbId,\n}) {\n  const isPerson = entity === 'people';\n  const isSmallSize = size === 'small';\n\n  let imageSize;\n  if (isPerson) {\n    imageSize = isSmallSize ? 'w185' : 'h632';\n  } else {\n    imageSize = isSmallSize ? 'w185' : 'w342';\n  }\n  const imageType = isPerson ? 'profile' : 'poster';\n  const imageUrl = useImage({\n    entity,\n    season,\n    size: imageSize,\n    tmdbId,\n    type: imageType,\n  });\n\n  const classes = useStyles({\n    backgroundImage: imageUrl,\n    isPerson,\n  });\n\n  return (\n    <div className={classes.root}>\n      {/*TODO: Resolve. Inlining backgroundSize as JSS refuses to accept this prop */}\n      <Link\n        className={classes.link}\n        style={{\n          backgroundSize: 'cover',\n        }}\n        to={`/app/${entity}/${slug}`}\n      >\n        {content && <div className={classes.content}>{content}</div>}\n      </Link>\n      <div className={classes.children}>{children}</div>\n    </div>\n  );\n}\n\nTile.propTypes = {\n  children: PropTypes.node,\n  content: PropTypes.node,\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  season: PropTypes.number,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n  tmdbId: PropTypes.number,\n};\n\nexport default Tile;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  chips: {\n    '& > *': {\n      margin: `0 ${theme.spacing(0.5)}px ${theme.spacing(0.5)}px 0`,\n    },\n  },\n  footer: {\n    backgroundColor: theme.palette.grey[900],\n    color: theme.palette.common.white,\n    padding: 8,\n  },\n}));\n","import {\n  Chip as MuiChip,\n  Grid as MuiGrid,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport ListItemManagerButton from '../../buttons/ListItemManager/ListItemManager.component';\nimport RatingButton from '../../buttons/Rating/Rating.component';\nimport RecommendButton from '../../buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../../buttons/Watchlist/Watchlist.component';\nimport Tile from '../Tile/Tile.component';\nimport useStyles from './InteractiveTile.styles';\n\nfunction InteractiveTile({\n  actions,\n  children,\n  chips = [],\n  entity,\n  primary,\n  season,\n  secondary,\n  size,\n  slug,\n  tmdbId,\n}) {\n  const classes = useStyles();\n  const isPeople = entity === 'people';\n\n  const content = (\n    <>\n      <div className={classes.chips}>\n        {chips.map((chip) => (\n          <MuiChip color='secondary' key={chip} label={chip} size='small' />\n        ))}\n      </div>\n      <MuiTypography display='inline' variant='subtitle2'>\n        {primary}\n      </MuiTypography>\n      {secondary && (\n        <MuiTypography display='inline' variant='caption'>\n          {' '}\n          {secondary}\n        </MuiTypography>\n      )}\n    </>\n  );\n\n  return (\n    <Tile\n      content={content}\n      entity={entity}\n      season={season}\n      size={size}\n      slug={slug}\n      tmdbId={tmdbId}\n    >\n      <div className={classes.footer}>\n        <MuiGrid container justify='space-between'>\n          <MuiGrid container item spacing={1} xs={6}>\n            <ListItemManagerButton entity={entity} size='small' slug={slug} />\n            {!isPeople && (\n              <>\n                <WatchlistButton entity={entity} size='small' slug={slug} />\n                <RecommendButton entity={entity} size='small' slug={slug} />\n              </>\n            )}\n          </MuiGrid>\n          <MuiGrid container item justify='flex-end' spacing={1} xs={6}>\n            {actions}\n          </MuiGrid>\n        </MuiGrid>\n      </div>\n      {children}\n    </Tile>\n  );\n}\n\nInteractiveTile.propTypes = {\n  actions: PropTypes.node,\n  children: PropTypes.node,\n  chips: PropTypes.arrayOf(PropTypes.string),\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  primary: PropTypes.string.isRequired,\n  season: PropTypes.number,\n  secondary: PropTypes.node,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n  tmdbId: PropTypes.number,\n};\n\nexport default InteractiveTile;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport RatingButton from '../../buttons/Rating/Rating.component';\nimport InteractiveTile from '../InteractiveTile/InteractiveTile.component';\n\nfunction InteractiveTileWithRating(props) {\n  const { entity, overallRating, slug } = props;\n  return (\n    <InteractiveTile\n      actions={\n        <RatingButton\n          entity={entity}\n          overallRating={overallRating}\n          size='small'\n          slug={slug}\n        />\n      }\n      {...props}\n    />\n  );\n}\n\nInteractiveTileWithRating.propTypes = {\n  actions: PropTypes.node,\n  children: PropTypes.node,\n  chips: PropTypes.arrayOf(PropTypes.string),\n  entity: PropTypes.oneOf(['movies', 'people', 'shows']).isRequired,\n  overallRating: PropTypes.node,\n  primary: PropTypes.string.isRequired,\n  season: PropTypes.number,\n  secondary: PropTypes.node,\n  size: PropTypes.oneOf(['default', 'small']),\n  slug: PropTypes.string.isRequired,\n  tmdbId: PropTypes.number,\n};\n\nexport default InteractiveTileWithRating;\n","import { capitalize } from '@material-ui/core';\nimport React from 'react';\n\nimport InteractiveTile from './components/tiles/InteractiveTile/InteractiveTile.component';\nimport InteractiveTileWithRating from './components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component';\n\nconst ALLOWED_ENTITY_TYPES = ['movie', 'person', 'show'];\n\nconst DEFAULTS = {\n  COMMENT_PAGE_SIZE: 20,\n  PAGE_SIZE: 36,\n};\n\nfunction extractFactsDefault(item) {\n  if (!item) {\n    return [];\n  }\n  const { ratings, stats, summary } = item;\n  return [\n    ['Rating', transformRatingToPercentage(ratings?.rating)],\n    ['Votes', transformNumberToK(ratings?.votes)],\n    ['Released', new Date(summary?.released).toLocaleDateString('da-Dk')],\n    ['Genres', summary?.genres.map(capitalize).join(', ')],\n    ['Certification', summary?.certification],\n    ['Watchers', transformNumberToK(stats?.watchers)],\n    ['Plays', transformNumberToK(stats?.plays)],\n    ['Lists', transformNumberToK(stats?.lists)],\n    ['Comments', transformNumberToK(stats?.comments)],\n    ['Trailer', <a href={summary?.trailer}>Watch trailer</a>],\n  ];\n}\n\nfunction filterOutUnsupportedEntityTypes(items) {\n  return items.filter(({ type }) => ALLOWED_ENTITY_TYPES.includes(type));\n}\n\nfunction parseCookie() {\n  return document.cookie.split('; ').reduce((acc, cookie) => {\n    const [key, value] = cookie.split('=');\n    acc[key] = value;\n    return acc;\n  }, {});\n}\n\nfunction getUserSlug() {\n  return process.env.NODE_ENV === 'development'\n    ? process.env.REACT_APP_MOCKED_USER_SLUG\n    : parseCookie().userSlug;\n}\n\n// Used where entities are of mixed type and in format of { type: .., [type]: { ..obj.. } }\nfunction renderTileBasedOnType(item, Wrapper, wrapperProps) {\n  const type = item.type;\n  item = item[type];\n  let Tile;\n  let props = {\n    chips: [capitalize(type)],\n    entity: transformEntityToPlural(type),\n    slug: item.ids.slug,\n    tmdbId: item.ids.tmdb,\n  };\n  if (type === 'person') {\n    Tile = InteractiveTile;\n    props.primary = item.name;\n  } else {\n    Tile = InteractiveTileWithRating;\n    props.primary = item.title;\n    props.secondary = item.year;\n    props.overallRating = transformRatingToPercentage(item.rating, 0);\n  }\n  if (Wrapper) {\n    return (\n      <Wrapper key={item.ids.slug} {...wrapperProps}>\n        <Tile {...props} />\n      </Wrapper>\n    );\n  }\n  return <Tile key={item.ids.slug} {...props} />;\n}\n\nfunction transformEntityToSingular(entity) {\n  switch (entity) {\n    case 'movies':\n      return 'movie';\n    case 'shows':\n      return 'show';\n    case 'people':\n      return 'person';\n    // in case of search\n    default:\n      return 'movie,show,person';\n  }\n}\n\nfunction transformEntityToPlural(entity) {\n  switch (entity) {\n    case 'movie':\n      return 'movies';\n    case 'show':\n      return 'shows';\n    case 'person':\n      return 'people';\n    default:\n      return '';\n  }\n}\n\nfunction transformNumberToK(num) {\n  if (!num) {\n    return '';\n  }\n  return Math.abs(num) > 999\n    ? Math.sign(num) * (Math.abs(num) / 1000).toFixed(1) + 'k'\n    : Math.sign(num) * Math.abs(num);\n}\n\nfunction transformRatingToPercentage(rating, decimalPlaces = 2) {\n  if (!rating) {\n    return '';\n  }\n  return `${(rating * 10).toFixed(decimalPlaces)}%`;\n}\n\nexport {\n  DEFAULTS,\n  extractFactsDefault,\n  filterOutUnsupportedEntityTypes,\n  getUserSlug,\n  renderTileBasedOnType,\n  transformEntityToSingular,\n  transformEntityToPlural,\n  transformNumberToK,\n  transformRatingToPercentage,\n};\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles(function (theme) {\n  return {\n    nestedListItemGutters: {\n      paddingLeft: theme.spacing(4),\n    },\n  };\n});\n","import {\n  Collapse as MuiCollapse,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport {\n  ExpandLess as ExpandLessIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nimport useStyles from './CollapsingListItem.styles';\n\nfunction CollapsingListItem({ children, listItemTextProps, ...props }) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  function handleClick(e) {\n    e.preventDefault();\n    setOpen(!open);\n  }\n\n  function renderChildren() {\n    return React.Children.map(children, function (child) {\n      return React.cloneElement(child, {\n        classes: { gutters: classes.nestedListItemGutters },\n      });\n    });\n  }\n\n  return (\n    <>\n      <MuiListItem {...props} onClick={handleClick}>\n        <MuiListItemText {...listItemTextProps} />\n        {open ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n      </MuiListItem>\n      <MuiCollapse in={open}>\n        <MuiList disablePadding>{renderChildren()}</MuiList>\n      </MuiCollapse>\n    </>\n  );\n}\n\nCollapsingListItem.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default CollapsingListItem;\n","import {\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n} from '@material-ui/core';\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { getUserSlug } from '../../utils';\nimport CollapsingListItem from './CollapsingListItem/CollapsingListItem.component';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/App.component.jsx in respective <Route> components.\nconst NAV_PATHS = [\n  {\n    nested: [\n      {\n        path: 'movies/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'movies/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'movies/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'movies/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'movies/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Movies',\n  },\n  {\n    nested: [\n      {\n        path: 'shows/trending',\n        title: 'Trending',\n      },\n      {\n        path: 'shows/popular',\n        title: 'Popular',\n      },\n      {\n        path: 'shows/recommended',\n        title: 'Recommended',\n      },\n      {\n        path: 'shows/watched',\n        title: 'Watched',\n      },\n      {\n        path: 'shows/anticipated',\n        title: 'Anticipated',\n      },\n    ],\n    title: 'Shows',\n  },\n  {\n    nested: [\n      {\n        path: `users/${getUserSlug()}/ratings`,\n        title: 'Ratings',\n      },\n      {\n        path: `users/${getUserSlug()}/recommendations`,\n        title: 'Recommendations',\n      },\n      {\n        path: `users/${getUserSlug()}/watchlist`,\n        title: 'Watchlist',\n      },\n      {\n        path: `users/${getUserSlug()}/lists`,\n        title: 'Lists',\n      },\n      {\n        path: `users/${getUserSlug()}/comments`,\n        title: 'Comments',\n      },\n    ],\n    title: 'Profile',\n  },\n  {\n    nested: [\n      {\n        path: 'search/all',\n        title: 'All',\n      },\n      {\n        path: 'search/movies',\n        title: 'Movies',\n      },\n      {\n        path: 'search/shows',\n        title: 'Shows',\n      },\n      {\n        path: 'search/people',\n        title: 'People',\n      },\n    ],\n    title: 'Search',\n  },\n];\n\nfunction renderListItems() {\n  return NAV_PATHS.map(function ({ nested, path, title }) {\n    const regularListItemProps = {\n      activeClassName: 'Mui-selected',\n      button: true,\n      component: NavLink,\n      key: title,\n      to: path,\n    };\n\n    // Regular ListItem. No need for custom CollapsingListItem.\n    if (!nested && path) {\n      return (\n        <MuiListItem {...regularListItemProps}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    }\n\n    const children = nested.map(function ({ path, title }) {\n      return (\n        // Overwrite key and path props as we are iterating over nested items.\n        <MuiListItem {...regularListItemProps} key={title} to={path}>\n          <MuiListItemText primary={title} />\n        </MuiListItem>\n      );\n    });\n\n    const collapsingListItemProps = {\n      button: true,\n      key: title,\n      listItemTextProps: {\n        primary: title,\n      },\n    };\n\n    return (\n      <CollapsingListItem {...collapsingListItemProps}>\n        {children}\n      </CollapsingListItem>\n    );\n  });\n}\n\nexport { NAV_PATHS, renderListItems };\n","import {\n  Box as MuiBox,\n  Divider as MuiDivider,\n  Drawer as MuiDrawer,\n  Grid as MuiGrid,\n  List as MuiList,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { Outlet } from 'react-router-dom';\n\nimport Notifications from '../Notifications/Notifications.component';\nimport useStyles from './Layout.styles';\nimport { renderListItems } from './Layout.utils';\n\nfunction Layout() {\n  const classes = useStyles();\n\n  return (\n    <MuiGrid>\n      <MuiDrawer\n        anchor='left'\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        color=''\n        variant='permanent'\n      >\n        <MuiBox px={2} py={1}>\n          <MuiTypography variant='h6'>Traktor</MuiTypography>\n          <MuiTypography variant='caption'>v0.1</MuiTypography>\n        </MuiBox>\n        <MuiDivider />\n        <MuiList disablePadding>{renderListItems()}</MuiList>\n      </MuiDrawer>\n      <MuiBox ml={32}>\n        <Notifications />\n        <Outlet />\n      </MuiBox>\n    </MuiGrid>\n  );\n}\n\nexport default Layout;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.text.primary,\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n    position: 'fixed',\n    top: 0,\n    width: '100%',\n    zIndex: theme.zIndex.drawer,\n  },\n}));\n","import { CircularProgress as MuiCircularProgress } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport useStyles from './LoadingOverlay.styles';\n\nfunction LoadingOverlay({ fullscreen = true }) {\n  const classes = useStyles();\n\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n    return () => (document.body.style.overflow = 'initial');\n  }, []);\n\n  if (fullscreen) {\n    return ReactDOM.createPortal(\n      <div className={classes.root}>\n        <MuiCircularProgress color='secondary' size={64} />\n      </div>,\n      document.getElementById('loadingOverlayRoot'),\n    );\n  }\n\n  return <h1>hi</h1>;\n}\n\nLoadingOverlay.propTypes = {\n  fullscreen: PropTypes.bool,\n};\n\nexport default LoadingOverlay;\n","import React from 'react';\n\nfunction NotFound() {\n  return <h1>404 not found</h1>;\n}\n\nexport default NotFound;\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nfunction useScrollToTopOnLocationChange() {\n  const location = useLocation();\n  useEffect(() => {\n    window.scrollTo({ top: 0 });\n  }, [location]);\n}\n\nexport default useScrollToTopOnLocationChange;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS, getUserSlug } from '../../../../../utils';\nimport { isForLoggedUser } from '../../utils';\n\nconst fetchComments = createAsyncThunk('users/comments/fetch', async function (\n  { page, userSlug = getUserSlug() },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/users/${userSlug}/comments?page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg.userSlug)) {\n        return state;\n      }\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'users/comments',\n  reducers: {},\n});\n\nexport { fetchComments };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { transformEntityToSingular } from '../../../../../utils';\nimport { fetchComments } from '../../user/comments/comments.slice';\nimport { isForLoggedUser } from '../../utils';\n\nconst postComment = createAsyncThunk('users/comments/post', async function (\n  { comment, entity, slug, spoiler = false },\n  { rejectWithValue },\n) {\n  entity = transformEntityToSingular(entity);\n  try {\n    const response = await axios.post('/trakt/comments', {\n      comment,\n      [entity]: { ids: { slug } },\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeComment = createAsyncThunk('users/comments/remove', async function (\n  id,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/comments/${id}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst updateComment = createAsyncThunk('users/comments/update', async function (\n  { comment, id, spoiler },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.put(`/trakt/comments/${id}`, {\n      comment,\n      spoiler,\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg.userSlug)) {\n        state.entities = action.payload.entities;\n        state.pagination.total = action.payload.total;\n      }\n      return state;\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex(\n        ({ comment }) => comment.id === id,\n      );\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        ({ comment }) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.entities[index].comment = action.payload;\n      }\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'users/comments',\n  reducers: {},\n});\n\nexport { fetchComments, postComment, removeComment, updateComment };\nexport default reducer;\n","import {\n  Button as MuiButton,\n  TextField as MuiTextField,\n} from '@material-ui/core';\nimport { ToggleButton as MuiToggleButton } from '@material-ui/lab';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nfunction Editor({ comment = '', disabled = false, onSubmit, spoiler = false }) {\n  const [state, setState] = useState({\n    comment: comment || '',\n    spoiler: spoiler || false,\n  });\n\n  function handleCommentChange({ target: { value } }) {\n    setState({\n      ...state,\n      comment: value,\n    });\n  }\n\n  function handleSpoilerChange() {\n    setState({\n      ...state,\n      spoiler: !state.spoiler,\n    });\n  }\n\n  function reset() {\n    setState({\n      comment,\n      spoiler,\n    });\n  }\n\n  function handleSubmit() {\n    onSubmit({ comment: state.comment, reset, spoiler: state.spoiler });\n  }\n\n  return (\n    <div>\n      <MuiTextField\n        disabled={disabled}\n        fullWidth\n        helperText='Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]'\n        label='Your comment'\n        multiline\n        onChange={handleCommentChange}\n        value={state.comment}\n        variant='outlined'\n      />\n      <div style={{ textAlign: 'right' }}>\n        <MuiToggleButton\n          color='primary'\n          disabled={disabled}\n          onChange={handleSpoilerChange}\n          selected={state.spoiler}\n          size='small'\n          value={state.spoiler}\n        >\n          {state.spoiler ? 'Marked as spoiler' : 'Mark as spoiler'}\n        </MuiToggleButton>{' '}\n        <MuiButton\n          color='secondary'\n          disabled={disabled}\n          onClick={handleSubmit}\n          variant='outlined'\n        >\n          Submit\n        </MuiButton>\n      </div>\n    </div>\n  );\n}\n\nEditor.propTypes = {\n  comment: PropTypes.string,\n  disabled: PropTypes.bool,\n  onSubmit: PropTypes.func.isRequired,\n  spoiler: PropTypes.bool,\n};\n\nexport default Editor;\n","import {\n  Box as MuiBox,\n  Chip as MuiChip,\n  Grid as MuiGrid,\n  IconButton as MuiIconButton,\n  LinearProgress as MuiLinearProgress,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Paper as MuiPaper,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport { Delete as DeleteIcon, Edit as EditIcon } from '@material-ui/icons';\nimport emoji from 'emoji-toolkit';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { selectLoadingFlagsReducedFactory } from '../../../redux/loading/loading.selectors';\nimport {\n  removeComment,\n  updateComment,\n} from '../../../redux/modules/users/profile/comments/comments.slice';\nimport { getUserSlug } from '../../../utils';\nimport Editor from '../Editor/Editor.component';\n\nfunction Comment({\n  comment,\n  createdAt,\n  id,\n  review,\n  spoiler,\n  username,\n  userRating,\n  userSlug,\n}) {\n  const selector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const dispatch = useDispatch();\n  const fetching = useSelector((state) =>\n    selector(state, ['users/comments/remove', 'users/comments/update']),\n  );\n  const [state, setState] = useState(null);\n  const canEdit = getUserSlug() === userSlug;\n  const [isEditing, isRemoving] = [state === 'editing', state === 'removing'];\n\n  function toggleEditMode() {\n    if (isEditing) {\n      setState('default');\n      return;\n    }\n    setState('editing');\n  }\n\n  //@TODO: unwrap promise and add .catch() as removing can fail\n  function handleRemove() {\n    setState('removing');\n    dispatch(removeComment(id));\n  }\n\n  //@TODO: unwrap promise and add .catch() as editing can fail\n  function handleSubmit({ reset, ...comment }) {\n    dispatch(\n      updateComment({\n        ...comment,\n        id,\n      }),\n    ).then(() => setState('default'));\n  }\n\n  return (\n    <>\n      {(isEditing || isRemoving) && fetching && (\n        <MuiLinearProgress color='secondary' />\n      )}\n      <MuiListItem component={MuiPaper}>\n        <MuiListItemText\n          primary={\n            <MuiGrid container justify='space-between'>\n              <MuiGrid item>\n                <MuiTypography display='inline' variant='body2'>\n                  {review ? 'Review' : 'Shout'} by{' '}\n                  <Link to={`/app/users/${userSlug}`}>{username}</Link>\n                </MuiTypography>\n                <MuiTypography display='inline' variant='caption'>\n                  {` | ${new Date(createdAt).toLocaleString('da-Dk')} \n                ${userRating ? `| rated ${userRating} stars` : ''}`}\n                  {spoiler && (\n                    <>\n                      {' | '} <MuiChip label='Spoiler' size='small' />\n                    </>\n                  )}\n                </MuiTypography>\n              </MuiGrid>\n              {canEdit && (\n                <MuiGrid item>\n                  <MuiIconButton onClick={toggleEditMode} size='small'>\n                    <EditIcon fontSize='small' />\n                  </MuiIconButton>\n                  <MuiIconButton onClick={handleRemove} size='small'>\n                    <DeleteIcon fontSize='small' />\n                  </MuiIconButton>\n                </MuiGrid>\n              )}\n            </MuiGrid>\n          }\n          secondary={\n            isEditing ? (\n              <MuiBox mt={2}>\n                <Editor\n                  comment={comment}\n                  disabled={fetching}\n                  onSubmit={handleSubmit}\n                  spoiler={spoiler}\n                />\n              </MuiBox>\n            ) : (\n              <ReactMarkdown allowDangerousHtml>\n                {emoji.shortnameToImage(comment)}\n              </ReactMarkdown>\n            )\n          }\n          secondaryTypographyProps={{\n            component: 'div',\n          }}\n        />\n      </MuiListItem>\n    </>\n  );\n}\nComment.propTypes = {\n  comment: PropTypes.string.isRequired,\n  createdAt: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  review: PropTypes.bool.isRequired,\n  spoiler: PropTypes.bool.isRequired,\n  username: PropTypes.string.isRequired,\n  userRating: PropTypes.number,\n  userSlug: PropTypes.string.isRequired,\n};\nexport default Comment;\n","import React from 'react';\n\nimport Comment from './Comment/Comment.component';\n\nfunction renderComment(item) {\n  console.log(item);\n  const props = {\n    comment: item.comment,\n    createdAt: item.created_at,\n    id: item.id,\n    review: item.review,\n    spoiler: item.spoiler,\n    username: item.user.username,\n    userRating: item.user_rating,\n    userSlug: item.user.ids.slug,\n  };\n  const { id } = props;\n  return <Comment key={id} {...props} />;\n}\n\nconst DEFAULT_SORT_OPTION = 'highest';\n\nconst SORT_OPTIONS = [\n  ['highest', 'Highest'],\n  ['newest', 'Newest'],\n  ['likes', 'Likes'],\n];\n\nexport { DEFAULT_SORT_OPTION, renderComment, SORT_OPTIONS };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  textFieldRoot: {\n    minWidth: 133,\n  },\n}));\n","import {\n  MenuItem as MuiMenuItem,\n  TextField as MuiTextField,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { SORT_OPTIONS } from '../Comments.utils';\nimport useStyles from './Sort.styles';\n\nfunction Sort({ onChange, value }) {\n  const classes = useStyles();\n  function handleChange({ target: { value } }) {\n    onChange(value);\n  }\n\n  return (\n    <MuiTextField\n      classes={{\n        root: classes.textFieldRoot,\n      }}\n      label='Sort comments by'\n      onChange={handleChange}\n      select\n      size='small'\n      value={value}\n      variant='outlined'\n    >\n      {SORT_OPTIONS.map(([value, label]) => (\n        <MuiMenuItem key={value} value={value}>\n          {label}\n        </MuiMenuItem>\n      ))}\n    </MuiTextField>\n  );\n}\n\nSort.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.oneOf(['highest', 'newest', 'likes']).isRequired,\n};\n\nexport default Sort;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: ({ isWrapped }) => ({\n    '& > *:not(:last-child)': {\n      marginRight: theme.spacing(1),\n    },\n    display: isWrapped ? 'block' : 'inline-block',\n    margin: isWrapped ? `${theme.spacing(1)}px 0` : 'initial',\n    textAlign: isWrapped ? 'right' : 'inherit',\n  }),\n}));\n","import {\n  IconButton as MuiIconButton,\n  Tooltip as MuiTooltip,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport {\n  ChevronLeft as PreviousPageIcon,\n  ChevronRight as NextPageIcon,\n  FirstPage as FirstPageIcon,\n  LastPage as LastPageIcon,\n} from '@material-ui/icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport useStyles from './Pagination.styles';\n\nfunction Pagination({\n  disabled = false,\n  hasNextPage,\n  hasPreviousPage,\n  onFirstPage,\n  onLastPage,\n  onNextPage,\n  onPreviousPage,\n  page,\n  pagesTotal,\n  variant = 'wrapped',\n}) {\n  const isWrapped = variant === 'wrapped';\n  const classes = useStyles({ isWrapped });\n  const [\n    firstPageDisabled,\n    previousPageDisabled,\n    nextPageDisabled,\n    lastPageDisabled,\n  ] = [\n    disabled || page === 1,\n    disabled || !hasPreviousPage,\n    disabled || !hasNextPage,\n    disabled || page === pagesTotal,\n  ];\n\n  return (\n    <div className={classes.root}>\n      <MuiTooltip title='Go to first page'>\n        <span>\n          <MuiIconButton\n            disabled={firstPageDisabled}\n            onClick={onFirstPage}\n            size='small'\n          >\n            <FirstPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n\n      <MuiTooltip title='Go to previous page'>\n        <span>\n          <MuiIconButton\n            disabled={previousPageDisabled}\n            onClick={onPreviousPage}\n            size='small'\n          >\n            <PreviousPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n\n      <MuiTypography variant='caption'>\n        Page {page} of {pagesTotal}\n      </MuiTypography>\n\n      <MuiTooltip title='Go to next page'>\n        <span>\n          <MuiIconButton\n            disabled={nextPageDisabled}\n            onClick={onNextPage}\n            size='small'\n          >\n            <NextPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n\n      <MuiTooltip title='Go to last page'>\n        <span>\n          <MuiIconButton\n            disabled={lastPageDisabled}\n            onClick={onLastPage}\n            size='small'\n          >\n            <LastPageIcon />\n          </MuiIconButton>\n        </span>\n      </MuiTooltip>\n    </div>\n  );\n}\n\nPagination.propTypes = {\n  disabled: PropTypes.bool,\n  hasNextPage: PropTypes.bool.isRequired,\n  hasPreviousPage: PropTypes.bool.isRequired,\n  onFirstPage: PropTypes.func.isRequired,\n  onLastPage: PropTypes.func.isRequired,\n  onNextPage: PropTypes.func.isRequired,\n  onPreviousPage: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  pagesTotal: PropTypes.number.isRequired,\n  variant: PropTypes.oneOf(['inlined', 'wrapped']),\n};\n\nexport default Pagination;\n","import { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nfunction usePagination(pagesTotalSelector) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { page = '1', ...otherSearchProps } = useMemo(\n    () => Object.fromEntries(searchParams),\n    [searchParams],\n  );\n  const pagesTotal = useSelector(pagesTotalSelector);\n\n  function toPage(page) {\n    setSearchParams({\n      page: parseInt(page),\n      ...otherSearchProps,\n    });\n  }\n\n  function toFirstPage() {\n    setSearchParams({\n      page: 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toLastPage() {\n    setSearchParams({\n      page: pagesTotal,\n      ...otherSearchProps,\n    });\n  }\n\n  function toNextPage() {\n    setSearchParams({\n      page: parseInt(page) + 1,\n      ...otherSearchProps,\n    });\n  }\n\n  function toPreviousPage() {\n    setSearchParams({\n      page: parseInt(page) - 1,\n      ...otherSearchProps,\n    });\n  }\n\n  return {\n    hasNextPage: parseInt(page) < pagesTotal,\n    hasPreviousPage: parseInt(page) > 1,\n    page: parseInt(page),\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPage,\n    toPreviousPage,\n  };\n}\n\nexport default usePagination;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.comments.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  removeComment,\n  updateComment,\n} from '../users/profile/comments/comments.slice';\n\nconst fetchMovie = createAsyncThunk('movie/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      statsResponse,\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/movies/${slug}/stats`),\n      axios.get(`/trakt/movies/${slug}?extended=full`),\n      axios.get(`/trakt/movies/${slug}/comments/highest`),\n      axios.get(`/trakt/movies/${slug}/people`),\n      axios.get(`/trakt/movies/${slug}/ratings`),\n      axios.get(`/trakt/movies/${slug}/related?extended=full`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.comments.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.comments.splice(index, 1);\n      }\n    },\n    [fetchMovie.fulfilled](state, action) {\n      return action.payload;\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.comments.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.comments[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'movie',\n  reducers: {},\n});\n\nexport { fetchMovie };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport {\n  removeComment,\n  updateComment,\n} from '../users/profile/comments/comments.slice';\n\nconst fetchShow = createAsyncThunk('show/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [\n      summaryResponse,\n      commentsResponse,\n      peopleResponse,\n      ratingsResponse,\n      relatedResponse,\n      statsResponse,\n      seasonsResponse,\n    ] = await Promise.all([\n      axios.get(`/trakt/shows/${slug}?extended=full`),\n      axios.get(`/trakt/shows/${slug}/comments/highest`),\n      axios.get(`/trakt/shows/${slug}/people`),\n      axios.get(`/trakt/shows/${slug}/ratings`),\n      axios.get(`/trakt/shows/${slug}/related?extended=full`),\n      axios.get(`/trakt/shows/${slug}/stats`),\n      axios.get(`/trakt/shows/${slug}/seasons?extended=episodes`),\n    ]);\n    return {\n      comments: commentsResponse.data,\n      people: peopleResponse.data,\n      ratings: ratingsResponse.data,\n      related: relatedResponse.data,\n      seasons: seasonsResponse.data.reverse(),\n      stats: statsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShow.fulfilled](state, action) {\n      return action.payload;\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.comments.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.comments.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.comments.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.comments[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    comments: [],\n    people: null,\n    ratings: null,\n    related: [],\n    seasons: [],\n    stats: null,\n    summary: null,\n  },\n  name: 'show',\n  reducers: {},\n});\n\nexport { fetchShow };\nexport default reducer;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\nimport { fetchMovie } from '../movie/movie.slice';\nimport { fetchShow } from '../show/show.slice';\nimport {\n  postComment,\n  removeComment,\n  updateComment,\n} from '../users/profile/comments/comments.slice';\n\nconst fetchComments = createAsyncThunk('comments/fetch', async function (\n  { entity, page, slug, sort },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/${entity}/${slug}/comments/${sort}?page=${page}&limit=${DEFAULTS.COMMENT_PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nfunction fetchEntityAndComments(params) {\n  const { entity, slug } = params;\n  const fn = entity === 'movies' ? fetchMovie : fetchShow;\n  return async function (dispatch) {\n    await Promise.all([dispatch(fn(slug)), dispatch(fetchComments(params))]);\n  };\n}\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchComments.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n    [postComment.fulfilled](state, action) {\n      state.entities.unshift(action.payload);\n    },\n    [removeComment.fulfilled](state, action) {\n      const { arg: id } = action.meta;\n      const index = state.entities.findIndex((comment) => comment.id === id);\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    [updateComment.fulfilled](state, action) {\n      const index = state.entities.findIndex(\n        (comment) => comment.id === action.payload.id,\n      );\n      if (index !== -1) {\n        state.entities[index] = action.payload;\n      }\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'comments',\n  reducers: {},\n});\n\nexport { fetchComments, fetchEntityAndComments };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.movie;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.show;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  buttons: {\n    '& > *:not(last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  commentsRoot: {\n    '& > *:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  content: {\n    '& > *:not(:last-child)': {\n      marginBottom: theme.spacing(2),\n    },\n    marginLeft: 342,\n    paddingLeft: theme.spacing(2),\n  },\n  facts: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  factsItem: {\n    '& > :first-child': {\n      marginRight: theme.spacing(1),\n    },\n    marginBottom: theme.spacing(1),\n    marginRight: theme.spacing(2),\n    whiteSpace: 'nowrap',\n  },\n  fixedColumn: {\n    position: 'fixed',\n    width: 342,\n  },\n  overview: {\n    marginBottom: theme.spacing(3),\n  },\n  root: {\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}));\n","import {\n  Divider as MuiDivider,\n  Grid as MuiGrid,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport ListItemManagerButton from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport RatingButton from '../../components/buttons/Rating/Rating.component';\nimport RecommendButton from '../../components/buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../../components/buttons/Watchlist/Watchlist.component';\nimport {\n  DEFAULT_SORT_OPTION,\n  renderComment,\n} from '../../components/Comments/Comments.utils';\nimport Editor from '../../components/Comments/Editor/Editor.component';\nimport Sort from '../../components/Comments/Sort/Sort.component';\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport Tile from '../../components/tiles/Tile/Tile.component';\nimport usePagination from '../../hooks/usePagination';\nimport {\n  selectLoadingFlag,\n  selectLoadingFlagsReducedFactory,\n} from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/comments/comments.selectors';\nimport {\n  fetchComments,\n  fetchEntityAndComments,\n} from '../../redux/modules/comments/comments.slice';\nimport { selectEntity as selectMovie } from '../../redux/modules/movie/movie.selectors';\nimport { selectEntity as selectShow } from '../../redux/modules/show/show.selectors';\nimport { postComment } from '../../redux/modules/users/profile/comments/comments.slice';\nimport useStyles from './Comments.styles';\n\nconst SIDE_MENU_LINKS = [['Comments', '#comments']];\n\nfunction Comments({ entity }) {\n  const classes = useStyles();\n  const fetchingSelector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const isFirstRender = useRef(true);\n  const { slug } = useParams();\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const item = useSelector(entity === 'movies' ? selectMovie : selectShow);\n  const comments = useSelector(selectEntities);\n  const fetching = useSelector((state) =>\n    fetchingSelector(state, ['comments/fetch', 'movie/fetch', 'show/fetch']),\n  );\n  const isAddingComment = useSelector((state) =>\n    selectLoadingFlag(state, 'users/comments/post'),\n  );\n  const [sort, setSort] = useState(DEFAULT_SORT_OPTION);\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      dispatch(fetchEntityAndComments({ entity, page, slug, sort: 'highest' }));\n      return;\n    }\n    dispatch(fetchComments({ entity, page, slug, sort }));\n  }, [dispatch, entity, page, slug, sort]);\n\n  function handleSubmit({ reset, ...comment }) {\n    dispatch(\n      postComment({\n        ...comment,\n        entity,\n        slug,\n      }),\n    ).then(reset);\n  }\n\n  return (\n    <div className={classes.root}>\n      {/* Fixed column */}\n      <div className={classes.fixedColumn}>\n        <Tile entity={entity} slug={slug} tmdbId={item.summary?.ids.tmdb} />\n        <MuiList>\n          {SIDE_MENU_LINKS.map(([label, anchor]) => (\n            <Fragment key={anchor}>\n              <MuiListItem button component='a' href={anchor}>\n                <MuiListItemText>{label}</MuiListItemText>\n              </MuiListItem>\n              <MuiDivider />\n            </Fragment>\n          ))}\n        </MuiList>\n        <div className={classes.buttons}>\n          <ListItemManagerButton entity='movies' slug={slug} />\n          <WatchlistButton entity='movies' slug={slug} />\n          <RecommendButton entity='movies' slug={slug} />\n          <RatingButton entity='movies' slug={slug} />\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className={classes.content}>\n        {/* Overview */}\n        <div className={classes.overview} id='overview'>\n          <MuiTypography display='block' variant='overline'>\n            All comments about:\n          </MuiTypography>\n          <MuiTypography display='inline' variant='h4'>\n            {item.summary?.title}{' '}\n          </MuiTypography>\n          <MuiTypography color='textSecondary' display='inline' variant='h5'>\n            {item.summary?.year}\n          </MuiTypography>\n        </div>\n\n        {/* Add comment */}\n        <MuiTypography id='actors' variant='h5'>\n          Add comment\n        </MuiTypography>\n        <Editor disabled={isAddingComment} onSubmit={handleSubmit} />\n\n        {/* Comments */}\n        <MuiGrid\n          alignItems='flex-end'\n          classes={{\n            root: classes.commentsRoot,\n          }}\n          container\n          justify='space-between'\n        >\n          <MuiGrid item>\n            <Sort onChange={setSort} value={sort} />\n          </MuiGrid>\n          <MuiGrid item>\n            <Pagination\n              disabled={fetching}\n              hasNextPage={hasNextPage}\n              hasPreviousPage={hasPreviousPage}\n              onFirstPage={toFirstPage}\n              onLastPage={toLastPage}\n              onNextPage={toNextPage}\n              onPreviousPage={toPreviousPage}\n              page={page}\n              pagesTotal={pagesTotal}\n              variant='inlined'\n            />\n          </MuiGrid>\n          {comments.map((comment) => (\n            <MuiGrid item key={comment.id} xs={12}>\n              {renderComment(comment)}\n            </MuiGrid>\n          ))}\n          {/* Invsible character to prevent React from skipping render of content */}\n          <div></div>\n          <MuiGrid item>\n            <Pagination\n              disabled={fetching}\n              hasNextPage={hasNextPage}\n              hasPreviousPage={hasPreviousPage}\n              onFirstPage={toFirstPage}\n              onLastPage={toLastPage}\n              onNextPage={toNextPage}\n              onPreviousPage={toPreviousPage}\n              page={page}\n              pagesTotal={pagesTotal}\n              variant='inlined'\n            />\n          </MuiGrid>\n        </MuiGrid>\n      </div>\n    </div>\n  );\n}\n\nComments.propTypes = {\n  entity: PropTypes.oneOf(['movies', 'shows']),\n};\n\nexport default Comments;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  buttons: {\n    '& > *:not(last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  content: {\n    '& > *:not(:last-child)': {\n      marginBottom: theme.spacing(2),\n    },\n    marginLeft: 342,\n    paddingLeft: theme.spacing(2),\n  },\n  facts: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  factsItem: {\n    '& > :first-child': {\n      marginRight: theme.spacing(1),\n    },\n    marginBottom: theme.spacing(1),\n    marginRight: theme.spacing(2),\n    whiteSpace: 'nowrap',\n  },\n  fixedColumn: {\n    position: 'fixed',\n    width: 342,\n  },\n  root: {\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}));\n","import {\n  Button as MuiButton,\n  Divider as MuiDivider,\n  Grid as MuiGrid,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React, { Fragment, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\n\nimport ListItemManagerButton from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport RatingButton from '../../components/buttons/Rating/Rating.component';\nimport RecommendButton from '../../components/buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../../components/buttons/Watchlist/Watchlist.component';\nimport { renderComment } from '../../components/Comments/Comments.utils';\nimport InteractiveTileWithRating from '../../components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component';\nimport Tile from '../../components/tiles/Tile/Tile.component';\nimport { selectEntity } from '../../redux/modules/movie/movie.selectors';\nimport { fetchMovie } from '../../redux/modules/movie/movie.slice';\nimport { extractFactsDefault, transformRatingToPercentage } from '../../utils';\nimport useStyles from './Movie.styles';\n\nconst SIDE_MENU_LINKS = [\n  ['Overview', '#overview'],\n  ['Actors', '#actors'],\n  ['Comments', '#comments'],\n  ['Related', '#related'],\n];\n\nfunction Movie() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const movie = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchMovie(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <div className={classes.root}>\n      {/* Fixed column */}\n      <div className={classes.fixedColumn}>\n        <Tile entity='movies' slug={slug} tmdbId={movie.summary?.ids.tmdb} />\n        <MuiList>\n          {SIDE_MENU_LINKS.map(([label, anchor]) => (\n            <Fragment key={anchor}>\n              <MuiListItem button component='a' href={anchor}>\n                <MuiListItemText>{label}</MuiListItemText>\n              </MuiListItem>\n              <MuiDivider />\n            </Fragment>\n          ))}\n        </MuiList>\n        <div className={classes.buttons}>\n          <ListItemManagerButton entity='movies' slug={slug} />\n          <WatchlistButton entity='movies' slug={slug} />\n          <RecommendButton entity='movies' slug={slug} />\n          <RatingButton entity='movies' slug={slug} />\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className={classes.content}>\n        {/* Overview */}\n        <div id='overview'>\n          <MuiTypography display='inline' variant='h4'>\n            {movie.summary?.title}{' '}\n          </MuiTypography>\n          <MuiTypography color='textSecondary' display='inline' variant='h5'>\n            {movie.summary?.year}\n          </MuiTypography>\n        </div>\n\n        {/* Facts */}\n        <div className={classes.facts}>\n          {extractFactsDefault(movie).map(([label, value]) => (\n            <span className={classes.factsItem} key={label}>\n              <MuiTypography\n                color='textSecondary'\n                display='inline'\n                variant='body2'\n              >\n                {label}\n              </MuiTypography>\n              <MuiTypography display='inline' variant='body2'>\n                {value}\n              </MuiTypography>\n            </span>\n          ))}\n        </div>\n\n        {/* Overview */}\n        <MuiTypography variant='body2'>\n          <i>{movie.summary?.tagline} </i>\n          {movie.summary?.overview}\n        </MuiTypography>\n\n        {/* Actors */}\n        <MuiTypography id='actors' variant='h5'>\n          Actors\n        </MuiTypography>\n        <MuiGrid\n          container\n          spacing={1}\n          style={{\n            overflow: 'auto',\n          }}\n          wrap='nowrap'\n        >\n          {movie.people?.cast.map(({ character, person }) => (\n            <MuiGrid\n              item\n              key={person.name}\n              style={{\n                flex: '0 0 128px',\n              }}\n            >\n              <Tile\n                entity='people'\n                size='small'\n                slug={person.ids.slug}\n                tmdbId={person.ids.tmdb}\n              >\n                <MuiTypography color='textSecondary' variant='caption'>\n                  {person.name}{' '}\n                </MuiTypography>\n                <MuiTypography variant='caption'>{character}</MuiTypography>\n              </Tile>\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n\n        {/* Comments */}\n        <MuiGrid container direction='column' spacing={1}>\n          <MuiGrid\n            alignItems='center'\n            container\n            item\n            justify='space-between'\n            xs={12}\n          >\n            <MuiTypography id='comments' variant='h5'>\n              Comments\n            </MuiTypography>\n            <MuiButton\n              color='secondary'\n              component={Link}\n              size='small'\n              to='comments'\n              variant='outlined'\n            >\n              All {movie.stats?.comments} comments\n            </MuiButton>\n          </MuiGrid>\n          {movie.comments.map((comment) => (\n            <MuiGrid item key={comment.id} xs={12}>\n              {renderComment(comment)}\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n\n        {/* Related */}\n        <MuiTypography id='related' variant='h5'>\n          Related\n        </MuiTypography>\n        <MuiGrid container spacing={1}>\n          {movie.related.map((movie) => (\n            <MuiGrid item key={movie.ids.slug} xs={2}>\n              <InteractiveTileWithRating\n                entity='movies'\n                overallRating={transformRatingToPercentage(movie.rating, 0)}\n                primary={movie.title}\n                secondary={movie.year}\n                slug={movie.ids.slug}\n                tmdbId={movie.ids.tmdb}\n              />\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n      </div>\n    </div>\n  );\n}\n\nexport default Movie;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.movies.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.movies.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchMovies = createAsyncThunk('movies/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/movies/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}&extended=full`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ movie: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchMovies.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'movies',\n  reducers: {},\n});\n\nexport { fetchMovies };\nexport default reducer;\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport React from 'react';\n\nimport InteractiveTileWithRating from '../../components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component';\nimport { transformRatingToPercentage } from '../../utils';\n\nfunction renderTrending(movies) {\n  return movies.map(({ movie, watchers = 0 }) => {\n    const chips = [];\n    if (watchers) {\n      chips.push(`${watchers} people watching`);\n    }\n    return (\n      <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <InteractiveTileWithRating\n          chips={chips}\n          entity='movies'\n          overallRating={transformRatingToPercentage(movie.rating, 0)}\n          primary={movie.title}\n          secondary={movie.year}\n          slug={movie.ids.slug}\n          tmdbId={movie.ids.tmdb}\n        />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderPopular(movies) {\n  return movies.map(({ movie }) => (\n    <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n      <InteractiveTileWithRating\n        entity='movies'\n        overallRating={transformRatingToPercentage(movie.rating, 0)}\n        primary={movie.title}\n        secondary={movie.year}\n        slug={movie.ids.slug}\n        tmdbId={movie.ids.tmdb}\n      />\n    </MuiGrid>\n  ));\n}\n\nfunction renderRecommended(movies) {\n  return movies.map(({ movie, user_count: recommendedByCount = 0 }) => {\n    const chips = [];\n    if (recommendedByCount) {\n      chips.push(`${recommendedByCount} people`);\n    }\n    return (\n      <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <InteractiveTileWithRating\n          chips={chips}\n          entity='movies'\n          overallRating={transformRatingToPercentage(movie.rating, 0)}\n          primary={movie.title}\n          secondary={movie.year}\n          slug={movie.ids.slug}\n          tmdbId={movie.ids.tmdb}\n        />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderWatched(movies) {\n  return movies.map(\n    ({ movie, play_count: plays = 0, watcher_count: watchers = 0 }) => {\n      const chips = [];\n      if (plays) {\n        chips.push(`${plays} plays`);\n      }\n      if (watchers) {\n        chips.push(`${watchers} watches`);\n      }\n      return (\n        <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n          <InteractiveTileWithRating\n            chips={chips}\n            entity='movies'\n            overallRating={transformRatingToPercentage(movie.rating, 0)}\n            primary={movie.title}\n            secondary={movie.year}\n            slug={movie.ids.slug}\n            tmdbId={movie.ids.tmdb}\n          />\n        </MuiGrid>\n      );\n    },\n  );\n}\n\nfunction renderAnticipated(movies) {\n  return movies.map(({ list_count: inListsCount = 0, movie }) => {\n    const chips = [];\n    if (inListsCount) {\n      chips.push(`In ${inListsCount} lists`);\n    }\n    return (\n      <MuiGrid item key={movie.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <InteractiveTileWithRating\n          chips={chips}\n          entity='movies'\n          overallRating={transformRatingToPercentage(movie.rating, 0)}\n          primary={movie.title}\n          secondary={movie.year}\n          slug={movie.ids.slug}\n          tmdbId={movie.ids.tmdb}\n        />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderTiles({ category, movies }) {\n  switch (category) {\n    case 'trending':\n      return renderTrending(movies);\n    case 'popular':\n      return renderPopular(movies);\n    case 'recommended':\n      return renderRecommended(movies);\n    case 'watched':\n      return renderWatched(movies);\n    case 'anticipated':\n      return renderAnticipated(movies);\n    default:\n      return null;\n  }\n}\n\nexport { renderTiles };\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/movies/movies.selectors';\nimport { fetchMovies } from '../../redux/modules/movies/movies.slice';\nimport { renderTiles } from './Movies.utils';\n\nfunction Movies({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const movies = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchMovies({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      <MuiGrid container>{renderTiles({ category, movies })}</MuiGrid>\n      <Pagination\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n    </>\n  );\n}\n\nMovies.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Movies;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.person;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst fetchPerson = createAsyncThunk('person/fetch', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    const [summaryResponse, moviesResponse, showsResponse] = await Promise.all([\n      axios.get(`/trakt/people/${slug}?extended=full`),\n      axios.get(`/trakt/people/${slug}/movies?extended=full`),\n      axios.get(`/trakt/people/${slug}/shows?extended=full`),\n    ]);\n    return {\n      movies: moviesResponse.data,\n      shows: showsResponse.data,\n      summary: summaryResponse.data,\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchPerson.fulfilled](state, action) {\n      return action.payload;\n    },\n  },\n  initialState: {\n    movies: [],\n    shows: [],\n    summary: null,\n  },\n  name: 'person',\n  reducers: {},\n});\n\nexport { fetchPerson };\nexport default reducer;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  buttons: {\n    '& > *:not(last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  content: {\n    '& > *:not(:last-child)': {\n      marginBottom: theme.spacing(2),\n    },\n    marginLeft: 342,\n    paddingLeft: theme.spacing(2),\n  },\n  facts: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  factsItem: {\n    '& > :first-child': {\n      marginRight: theme.spacing(1),\n    },\n    marginBottom: theme.spacing(1),\n    marginRight: theme.spacing(2),\n    whiteSpace: 'nowrap',\n  },\n  fixedColumn: {\n    position: 'fixed',\n    width: 342,\n  },\n  root: {\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}));\n","import {\n  Divider as MuiDivider,\n  Grid as MuiGrid,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React, { Fragment, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport ListItemManagerButton from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport InteractiveTile from '../../components/tiles/InteractiveTile/InteractiveTile.component';\nimport InteractiveTileWithRating from '../../components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component';\nimport Tile from '../../components/tiles/Tile/Tile.component';\nimport { selectEntity } from '../../redux/modules/person/person.selectors';\nimport { fetchPerson } from '../../redux/modules/person/person.slice';\nimport { transformRatingToPercentage } from '../../utils';\nimport useStyles from './Person.styles';\n\nconst SIDE_MENU_LINKS = [\n  ['Overview', '#overview'],\n  ['Movies', '#movies'],\n  ['Shows', '#shows'],\n];\n\nfunction extractFacts(person) {\n  if (!person) {\n    return [];\n  }\n  const { summary } = person;\n  return [\n    ['Birthplace', summary?.birthplace],\n    ['Birthday', new Date(summary?.birthday).toLocaleDateString('da-Dk')],\n  ];\n}\n\nfunction Person() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const person = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchPerson(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <div className={classes.root}>\n      {/* Fixed column */}\n      <div className={classes.fixedColumn}>\n        <Tile entity='people' slug={slug} tmdbId={person.summary?.ids.tmdb} />\n        <MuiList>\n          {SIDE_MENU_LINKS.map(([label, anchor]) => (\n            <Fragment key={anchor}>\n              <MuiListItem button component='a' href={anchor}>\n                <MuiListItemText>{label}</MuiListItemText>\n              </MuiListItem>\n              <MuiDivider />\n            </Fragment>\n          ))}\n        </MuiList>\n        <div className={classes.buttons}>\n          <ListItemManagerButton entity='people' slug={slug} />\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className={classes.content}>\n        {/* Overview */}\n        <div id='overview'>\n          <MuiTypography display='inline' variant='h4'>\n            {person.summary?.name}\n          </MuiTypography>\n        </div>\n\n        {/* Facts */}\n        <div className={classes.facts}>\n          {extractFacts(person).map(([label, value]) => (\n            <span className={classes.factsItem} key={label}>\n              <MuiTypography\n                color='textSecondary'\n                display='inline'\n                variant='body2'\n              >\n                {label}\n              </MuiTypography>\n              <MuiTypography display='inline' variant='body2'>\n                {value}\n              </MuiTypography>\n            </span>\n          ))}\n        </div>\n\n        {/* Overview */}\n        <MuiTypography variant='body2'>\n          {person.summary?.biography}\n        </MuiTypography>\n\n        {/* Movies */}\n        <MuiTypography id='movies' variant='h5'>\n          Movies\n        </MuiTypography>\n        <MuiGrid container spacing={1}>\n          {person.movies?.cast?.map(({ character, movie }) => (\n            <MuiGrid item key={movie.ids.slug} xs={2}>\n              <InteractiveTileWithRating\n                entity='movies'\n                overallRating={transformRatingToPercentage(movie.rating, 0)}\n                primary={movie.title}\n                secondary={movie.year}\n                slug={movie.ids.slug}\n                tmdbId={movie.ids.tmdb}\n              >\n                <MuiTypography variant='caption'>{character}</MuiTypography>\n              </InteractiveTileWithRating>\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n\n        {/* Shows */}\n        <MuiTypography id='shows' variant='h5'>\n          Shows\n        </MuiTypography>\n        <MuiGrid container spacing={1}>\n          {person.shows?.cast?.map(({ character, show }) => (\n            <MuiGrid item key={show.ids.slug} xs={2}>\n              <InteractiveTileWithRating\n                entity='shows'\n                overallRating={transformRatingToPercentage(show.rating, 0)}\n                primary={show.title}\n                secondary={show.year}\n                slug={show.ids.slug}\n                tmdbId={show.ids.tmdb}\n              >\n                <MuiTypography variant='caption'>{character}</MuiTypography>\n              </InteractiveTileWithRating>\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n      </div>\n    </div>\n  );\n}\n\nexport default Person;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.search.entities;\n  },\n  function (entities) {\n    return entities;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.search.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS, transformEntityToSingular } from '../../../utils';\n\nconst fetchSearchResults = createAsyncThunk('search/fetch', async function (\n  { entity, page, query },\n  { rejectWithValue },\n) {\n  try {\n    entity = transformEntityToSingular(entity);\n    const response = await axios.get(\n      `/trakt/search/${entity}?query=${query}&page=${page}&limit=${DEFAULTS.PAGE_SIZE}`,\n    );\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchSearchResults.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'search',\n  reducers: {},\n});\n\nexport { fetchSearchResults };\nexport default reducer;\n","import {\n  Box as MuiBox,\n  Grid as MuiGrid,\n  TextField as MuiTextField,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport { selectLoadingFlag } from '../../redux/loading/loading.selectors';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/search/search.selectors';\nimport { fetchSearchResults } from '../../redux/modules/search/search.slice';\nimport { renderTileBasedOnType } from '../../utils';\n\nfunction Search({ entity }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { query = '' } = useMemo(() => Object.fromEntries(searchParams), [\n    searchParams,\n  ]);\n  const fetching = useSelector((state) =>\n    selectLoadingFlag(state, 'search/fetch'),\n  );\n  const searchResults = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchSearchResults({ entity, page, query }));\n  }, [dispatch, entity, page, query]);\n\n  function handleQueryChange(e) {\n    if (e.keyCode !== 13) {\n      return;\n    }\n    setSearchParams({ query: e.target.value });\n  }\n\n  return (\n    <>\n      <MuiBox m={2}>\n        <MuiTextField\n          color='secondary'\n          defaultValue={query}\n          label='What are you looking for?'\n          onKeyDown={handleQueryChange}\n          size='small'\n          variant='outlined'\n        />\n      </MuiBox>\n      <MuiGrid container>\n        {searchResults.map((item) =>\n          renderTileBasedOnType(item, MuiGrid, {\n            item: true,\n            lg: 2,\n            md: 3,\n            sm: 6,\n            xs: 12,\n          }),\n        )}\n      </MuiGrid>\n      <Pagination\n        disabled={fetching}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n    </>\n  );\n}\n\nSearch.propTypes = {\n  entity: PropTypes.oneOf(['all', 'movies', 'shows', 'people']),\n};\n\nexport default Search;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  buttons: {\n    '& > *:not(last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  content: {\n    '& > *:not(:last-child)': {\n      marginBottom: theme.spacing(2),\n    },\n    marginLeft: 342,\n    paddingLeft: theme.spacing(2),\n  },\n  facts: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  factsItem: {\n    '& > :first-child': {\n      marginRight: theme.spacing(1),\n    },\n    marginBottom: theme.spacing(1),\n    marginRight: theme.spacing(2),\n    whiteSpace: 'nowrap',\n  },\n  fixedColumn: {\n    position: 'fixed',\n    width: 342,\n  },\n  root: {\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}));\n","import {\n  Button as MuiButton,\n  Divider as MuiDivider,\n  Grid as MuiGrid,\n  List as MuiList,\n  ListItem as MuiListItem,\n  ListItemText as MuiListItemText,\n  Typography as MuiTypography,\n} from '@material-ui/core';\nimport React, { Fragment, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\n\nimport ListItemManagerButton from '../../components/buttons/ListItemManager/ListItemManager.component';\nimport RatingButton from '../../components/buttons/Rating/Rating.component';\nimport RecommendButton from '../../components/buttons/Recommend/Recommend.component';\nimport WatchlistButton from '../../components/buttons/Watchlist/Watchlist.component';\nimport { renderComment } from '../../components/Comments/Comments.utils';\nimport InteractiveTileWithRating from '../../components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component';\nimport Tile from '../../components/tiles/Tile/Tile.component';\nimport { selectEntity } from '../../redux/modules/show/show.selectors';\nimport { fetchShow } from '../../redux/modules/show/show.slice';\nimport { extractFactsDefault, transformRatingToPercentage } from '../../utils';\nimport useStyles from './Show.styles';\n\nconst SIDE_MENU_LINKS = [\n  ['Overview', '#overview'],\n  ['Actors', '#actors'],\n  ['Seasons', '#seasons'],\n  ['Comments', '#comments'],\n  ['Related', '#related'],\n];\n\nfunction Show() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { slug } = useParams();\n  const show = useSelector(selectEntity);\n\n  useEffect(() => {\n    dispatch(fetchShow(slug));\n  }, [dispatch, slug]);\n\n  return (\n    <div className={classes.root}>\n      {/* Fixed column */}\n      <div className={classes.fixedColumn}>\n        <Tile entity='shows' slug={slug} tmdbId={show.summary?.ids.tmdb} />\n        <MuiList>\n          {SIDE_MENU_LINKS.map(([label, anchor]) => (\n            <Fragment key={anchor}>\n              <MuiListItem button component='a' href={anchor}>\n                <MuiListItemText>{label}</MuiListItemText>\n              </MuiListItem>\n              <MuiDivider />\n            </Fragment>\n          ))}\n        </MuiList>\n        <div className={classes.buttons}>\n          <ListItemManagerButton entity='shows' slug={slug} />\n          <WatchlistButton entity='shows' slug={slug} />\n          <RecommendButton entity='shows' slug={slug} />\n          <RatingButton entity='shows' slug={slug} />\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className={classes.content}>\n        {/* Overview */}\n        <div id='overview'>\n          <MuiTypography display='inline' variant='h4'>\n            {show.summary?.title}{' '}\n          </MuiTypography>\n          <MuiTypography color='textSecondary' display='inline' variant='h5'>\n            {show.summary?.year}\n          </MuiTypography>\n        </div>\n\n        {/* Facts */}\n        <div className={classes.facts}>\n          {extractFactsDefault(show).map(([label, value]) => (\n            <span className={classes.factsItem} key={label}>\n              <MuiTypography\n                color='textSecondary'\n                display='inline'\n                variant='body2'\n              >\n                {label}\n              </MuiTypography>\n              <MuiTypography display='inline' variant='body2'>\n                {value}\n              </MuiTypography>\n            </span>\n          ))}\n        </div>\n\n        {/* Overview */}\n        <MuiTypography variant='body2'>\n          <i>{show.summary?.tagline} </i>\n          {show.summary?.overview}\n        </MuiTypography>\n\n        {/* Actors */}\n        <MuiTypography id='actors' variant='h5'>\n          Actors\n        </MuiTypography>\n        <MuiGrid\n          container\n          spacing={1}\n          style={{\n            overflow: 'auto',\n          }}\n          wrap='nowrap'\n        >\n          {show.people?.cast.map(({ character, person }) => (\n            <MuiGrid\n              item\n              key={person.name}\n              style={{\n                flex: '0 0 128px',\n              }}\n            >\n              <Tile\n                entity='people'\n                size='small'\n                slug={person.ids.slug}\n                tmdbId={person.ids.tmdb}\n              >\n                <MuiTypography color='textSecondary' variant='caption'>\n                  {person.name}{' '}\n                </MuiTypography>\n                <MuiTypography variant='caption'>{character}</MuiTypography>\n              </Tile>\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n\n        {/* Seasons */}\n        <MuiTypography id='seasons' variant='h5'>\n          Seasons\n        </MuiTypography>\n        <MuiGrid container spacing={1}>\n          {show.seasons.map((season) => (\n            <MuiGrid item key={season.number} xs={2}>\n              <Tile\n                entity='shows'\n                season={season.number}\n                slug={show.summary?.ids.slug}\n                tmdbId={show.summary?.ids.tmdb}\n              >\n                <MuiTypography variant='body2'>\n                  {season.number === 0 ? 'Specials' : `Season ${season.number}`}{' '}\n                </MuiTypography>\n                <MuiTypography color='textSecondary' variant='caption'>\n                  {season.episodes?.length || 0} episodes\n                </MuiTypography>\n              </Tile>\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n\n        {/* Comments */}\n        <MuiGrid container spacing={1}>\n          <MuiGrid\n            alignItems='center'\n            container\n            item\n            justify='space-between'\n            xs={12}\n          >\n            <MuiTypography id='comments' variant='h5'>\n              Comments\n            </MuiTypography>\n            <MuiButton\n              color='secondary'\n              component={Link}\n              size='small'\n              to='comments'\n              variant='outlined'\n            >\n              All {show.stats?.comments} comments\n            </MuiButton>\n          </MuiGrid>\n          {show.comments.map((comment) => (\n            <MuiGrid item key={comment.id} xs={12}>\n              {renderComment(comment)}\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n\n        {/* Related */}\n        <MuiTypography id='related' variant='h5'>\n          Related\n        </MuiTypography>\n        <MuiGrid container spacing={1}>\n          {show.related.map((show) => (\n            <MuiGrid item key={show.ids.slug} xs={2}>\n              <InteractiveTileWithRating\n                entity='shows'\n                overallRating={transformRatingToPercentage(show.rating, 0)}\n                primary={show.title}\n                secondary={show.year}\n                slug={show.ids.slug}\n                tmdbId={show.ids.tmdb}\n              />\n            </MuiGrid>\n          ))}\n        </MuiGrid>\n      </div>\n    </div>\n  );\n}\n\nexport default Show;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.shows.entities;\n  },\n  function (shows) {\n    return shows;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.shows.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { DEFAULTS } from '../../../utils';\n\nconst fetchShows = createAsyncThunk('shows/fetch', async function (\n  { category, page },\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.get(\n      `/trakt/shows/${category}?page=${page}&limit=${DEFAULTS.PAGE_SIZE}&extended=full`,\n    );\n    if (category === 'popular') {\n      response.data = response.data.map((item) => ({ show: item }));\n    }\n    return {\n      entities: response.data,\n      total: parseInt(response.headers['x-pagination-page-count']),\n    };\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [fetchShows.fulfilled](state, action) {\n      state.entities = action.payload.entities;\n      state.pagination.total = action.payload.total;\n    },\n  },\n  initialState: {\n    entities: [],\n    pagination: {\n      total: 0,\n    },\n  },\n  name: 'shows',\n  reducers: {},\n});\n\nexport { fetchShows };\nexport default reducer;\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport React from 'react';\n\nimport InteractiveTileWithRating from '../../components/tiles/InteractiveTileWithRating/InteractiveTileWithRating.component';\nimport { transformRatingToPercentage } from '../../utils';\n\nfunction renderTrending(shows) {\n  return shows.map(({ show, watchers = 0 }) => {\n    const chips = [];\n    if (watchers) {\n      chips.push(`${watchers} people watching`);\n    }\n    return (\n      <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <InteractiveTileWithRating\n          chips={chips}\n          entity='shows'\n          overallRating={transformRatingToPercentage(show.rating, 0)}\n          primary={show.title}\n          secondary={show.year}\n          slug={show.ids.slug}\n          tmdbId={show.ids.tmdb}\n        />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderPopular(shows) {\n  return shows.map(({ show }) => (\n    <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n      <InteractiveTileWithRating\n        entity='shows'\n        overallRating={transformRatingToPercentage(show.rating, 0)}\n        primary={show.title}\n        secondary={show.year}\n        slug={show.ids.slug}\n        tmdbId={show.ids.tmdb}\n      />\n    </MuiGrid>\n  ));\n}\n\nfunction renderRecommended(shows) {\n  return shows.map(({ show, user_count: recommendedByCount = 0 }) => {\n    const chips = [];\n    if (recommendedByCount) {\n      chips.push(`${recommendedByCount} people`);\n    }\n    return (\n      <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <InteractiveTileWithRating\n          chips={chips}\n          entity='shows'\n          overallRating={transformRatingToPercentage(show.rating, 0)}\n          primary={show.title}\n          secondary={show.year}\n          slug={show.ids.slug}\n          tmdbId={show.ids.tmdb}\n        />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderWatched(shows) {\n  return shows.map(\n    ({ play_count: plays = 0, show, watcher_count: watchers = 0 }) => {\n      const chips = [];\n      if (plays) {\n        chips.push(`${plays} plays`);\n      }\n      if (watchers) {\n        chips.push(`${watchers} watches`);\n      }\n      return (\n        <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n          <InteractiveTileWithRating\n            chips={chips}\n            entity='shows'\n            overallRating={transformRatingToPercentage(show.rating, 0)}\n            primary={show.title}\n            secondary={show.year}\n            slug={show.ids.slug}\n            tmdbId={show.ids.tmdb}\n          />\n        </MuiGrid>\n      );\n    },\n  );\n}\n\nfunction renderAnticipated(shows) {\n  return shows.map(({ list_count: inListsCount = 0, show }) => {\n    const chips = [];\n    if (inListsCount) {\n      chips.push(`In ${inListsCount} lists`);\n    }\n    return (\n      <MuiGrid item key={show.ids.trakt} lg={2} md={3} sm={6} xs={12}>\n        <InteractiveTileWithRating\n          chips={chips}\n          entity='shows'\n          overallRating={transformRatingToPercentage(show.rating, 0)}\n          primary={show.title}\n          secondary={show.year}\n          slug={show.ids.slug}\n          tmdbId={show.ids.tmdb}\n        />\n      </MuiGrid>\n    );\n  });\n}\n\nfunction renderTiles({ category, shows }) {\n  switch (category) {\n    case 'trending':\n      return renderTrending(shows);\n    case 'popular':\n      return renderPopular(shows);\n    case 'recommended':\n      return renderRecommended(shows);\n    case 'watched':\n      return renderWatched(shows);\n    case 'anticipated':\n      return renderAnticipated(shows);\n    default:\n      return null;\n  }\n}\n\nexport { renderTiles };\n","import { Grid as MuiGrid } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Pagination from '../../components/Pagination/Pagination.component';\nimport usePagination from '../../hooks/usePagination';\nimport {\n  selectEntities,\n  selectPagesTotal,\n} from '../../redux/modules/shows/shows.selectors';\nimport { fetchShows } from '../../redux/modules/shows/shows.slice';\nimport { renderTiles } from './Shows.utils';\n\nfunction Shows({ category }) {\n  const dispatch = useDispatch();\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n  const shows = useSelector(selectEntities);\n\n  useEffect(() => {\n    dispatch(fetchShows({ category, page }));\n  }, [category, dispatch, page]);\n\n  return (\n    <>\n      <MuiGrid container>{renderTiles({ category, shows })}</MuiGrid>\n      <Pagination\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n    </>\n  );\n}\n\nShows.propTypes = {\n  category: PropTypes.oneOf([\n    'trending',\n    'popular',\n    'recommended',\n    'watched',\n    'anticipated',\n  ]).isRequired,\n};\n\nexport default Shows;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.profile.comments.entities;\n  },\n  function (comments) {\n    return comments;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.users.profile.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.user.comments.entities;\n  },\n  function (comments) {\n    return comments;\n  },\n);\n\nconst selectPagesTotal = createSelector(\n  function (state) {\n    return state.users.user.comments.pagination.total;\n  },\n  function (pagesTotal) {\n    return pagesTotal;\n  },\n);\n\nexport { selectEntities, selectPagesTotal };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { renderComment } from '../../../components/Comments/Comments.utils';\nimport Pagination from '../../../components/Pagination/Pagination.component';\nimport usePagination from '../../../hooks/usePagination';\nimport { selectEntities as selectProfileComments } from '../../../redux/modules/users/profile/comments/comments.selectors';\nimport {\n  selectEntities as selectUserComments,\n  selectPagesTotal,\n} from '../../../redux/modules/users/user/comments/comments.selectors';\nimport { fetchComments } from '../../../redux/modules/users/user/comments/comments.slice';\nimport { getUserSlug } from '../../../utils';\n\nfunction Comments() {\n  const dispatch = useDispatch();\n  const { userSlug } = useParams();\n  const selector =\n    userSlug === getUserSlug() ? selectProfileComments : selectUserComments;\n  const comments = useSelector(selector);\n  const {\n    hasNextPage,\n    hasPreviousPage,\n    page,\n    pagesTotal,\n    toFirstPage,\n    toLastPage,\n    toNextPage,\n    toPreviousPage,\n  } = usePagination(selectPagesTotal);\n\n  useEffect(() => {\n    dispatch(fetchComments({ page, userSlug }));\n  }, [dispatch, page, userSlug]);\n\n  //@TODO: Add empty design component\n  if (!comments.length) {\n    return 'No comments found';\n  }\n\n  return (\n    <>\n      <Pagination\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onFirstPage={toFirstPage}\n        onLastPage={toLastPage}\n        onNextPage={toNextPage}\n        onPreviousPage={toPreviousPage}\n        page={page}\n        pagesTotal={pagesTotal}\n      />\n      {comments.map(({ comment }) => renderComment(comment))}\n    </>\n  );\n}\n\nexport default Comments;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.users.profile.list;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntity = createSelector(\n  function (state) {\n    return state.users.user.list;\n  },\n  function (entity) {\n    return entity;\n  },\n);\n\nexport { selectEntity };\n","import { Box as MuiBox, Grid as MuiGrid } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nimport { selectEntity as selectProfileList } from '../../../redux/modules/users/profile/list/list.selectors';\nimport { selectEntity as selectUserList } from '../../../redux/modules/users/user/list/list.selectors';\nimport { fetchList } from '../../../redux/modules/users/user/list/list.slice';\nimport { getUserSlug, renderTileBasedOnType } from '../../../utils';\n\nfunction List() {\n  const { id, userSlug } = useParams();\n  const dispatch = useDispatch();\n  const list = useSelector(\n    userSlug === getUserSlug() ? selectProfileList : selectUserList,\n  );\n\n  useEffect(() => {\n    dispatch(fetchList({ id, userSlug }));\n  }, [dispatch, id, userSlug]);\n\n  return (\n    <MuiBox p={2}>\n      <MuiGrid container spacing={1}>\n        {list.items.map((item) =>\n          renderTileBasedOnType(item, MuiGrid, { item: true, xs: 2 }),\n        )}\n      </MuiGrid>\n    </MuiBox>\n  );\n}\n\nexport default List;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nimport { getUserSlug } from '../../../../../utils';\nimport { fetchLists } from '../../user/lists/lists.slice';\nimport { isForLoggedUser } from '../../utils';\n\nconst addList = createAsyncThunk('users/lists/add', async function (\n  list,\n  { rejectWithValue },\n) {\n  try {\n    const response = await axios.post(\n      `/trakt/users/${getUserSlug()}/lists`,\n      list,\n    );\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst removeList = createAsyncThunk('users/lists/remove', async function (\n  slug,\n  { rejectWithValue },\n) {\n  try {\n    await axios.delete(`/trakt/users/${getUserSlug()}/lists/${slug}`);\n  } catch (error) {\n    return rejectWithValue(error.toString());\n  }\n});\n\nconst { reducer } = createSlice({\n  extraReducers: {\n    [addList.fulfilled](state, action) {\n      state.push(action.payload);\n    },\n    [fetchLists.fulfilled](state, action) {\n      if (isForLoggedUser(action.meta.arg)) {\n        return action.payload;\n      }\n      return state;\n    },\n    [removeList.fulfilled](state, action) {\n      const { arg: slug } = action.meta;\n      const index = state.findIndex((list) => list.ids.slug === slug);\n      state.splice(index, 1);\n    },\n  },\n  initialState: [],\n  name: 'users/lists',\n  reducers: {},\n});\n\nexport { addList, removeList };\nexport default reducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.user.lists;\n  },\n  function (lists) {\n    return lists;\n  },\n);\n\nexport { selectEntities };\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectEntities as selectProfileLists } from '../../../redux/modules/users/profile/lists/lists.selectors';\nimport {\n  addList,\n  removeList,\n} from '../../../redux/modules/users/profile/lists/lists.slice';\nimport { selectEntities as selectUserLists } from '../../../redux/modules/users/user/lists/lists.selectors';\nimport { fetchLists } from '../../../redux/modules/users/user/lists/lists.slice';\nimport { getUserSlug } from '../../../utils';\n\nfunction Lists() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const lists = useSelector(\n    userSlug === getUserSlug() ? selectProfileLists : selectUserLists,\n  );\n\n  useEffect(() => {\n    dispatch(fetchLists(userSlug));\n  }, [dispatch, userSlug]);\n\n  function handleAdd() {\n    dispatch(\n      addList({\n        allowComments: false,\n        description: 'This is my list',\n        name: 'My list',\n      }),\n    );\n  }\n\n  function handleRemove() {\n    dispatch(removeList('my-list'));\n  }\n\n  //@TODO: Add empty design component\n  if (!lists.length) {\n    return 'No lists found';\n  }\n\n  return (\n    <>\n      <button onClick={handleAdd} type='button'>\n        Add list\n      </button>\n      <button onClick={handleRemove} type='button'>\n        Remove list\n      </button>\n      <pre>{JSON.stringify(lists, null, 2)}</pre>\n    </>\n  );\n}\n\nexport default Lists;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.user.ratings;\n  },\n  function (ratings) {\n    return ratings;\n  },\n);\n\nexport { selectEntities };\n","import { Box as MuiBox, Grid as MuiGrid } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectEntities as selectProfileRatings } from '../../../redux/modules/users/profile/ratings/ratings.selectors';\nimport { selectEntities as selectUserRatings } from '../../../redux/modules/users/user/ratings/ratings.selectors';\nimport { fetchRatings } from '../../../redux/modules/users/user/ratings/ratings.slice';\nimport { getUserSlug, renderTileBasedOnType } from '../../../utils';\n\nfunction Ratings() {\n  const dispatch = useDispatch();\n  const { userSlug } = useParams();\n  const ratings = useSelector(\n    userSlug === getUserSlug() ? selectProfileRatings : selectUserRatings,\n  );\n\n  useEffect(() => {\n    dispatch(fetchRatings(userSlug));\n  }, [dispatch, userSlug]);\n\n  //@TODO: Add empty design component\n  if (!ratings.length) {\n    return 'No ratings found';\n  }\n\n  return (\n    <MuiBox p={2}>\n      <MuiGrid container spacing={1}>\n        {ratings.map((rating) =>\n          renderTileBasedOnType(rating, MuiGrid, { item: true, xs: 2 }),\n        )}\n      </MuiGrid>\n    </MuiBox>\n  );\n}\n\nexport default Ratings;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.user.recommendations;\n  },\n  function (recommendations) {\n    return recommendations;\n  },\n);\n\nexport { selectEntities };\n","import { Box as MuiBox, Grid as MuiGrid } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectEntities as selectProfileRecommendations } from '../../../redux/modules/users/profile/recommendations/recommendations.selectors';\nimport { selectEntities as selectUserRecommendations } from '../../../redux/modules/users/user/recommendations/recommendations.selectors';\nimport { fetchRecommendations } from '../../../redux/modules/users/user/recommendations/recommendations.slice';\nimport { getUserSlug, renderTileBasedOnType } from '../../../utils';\n\nfunction Ratings() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const recommendations = useSelector(\n    userSlug === getUserSlug()\n      ? selectProfileRecommendations\n      : selectUserRecommendations,\n  );\n\n  useEffect(() => {\n    dispatch(fetchRecommendations(userSlug));\n  }, [dispatch, userSlug]);\n\n  //@TODO: Add empty design component\n  if (!recommendations.length) {\n    return 'No ratings found';\n  }\n\n  return (\n    <MuiBox p={2}>\n      <MuiGrid container spacing={1}>\n        {recommendations.map((recommendation) =>\n          renderTileBasedOnType(recommendation, MuiGrid, { item: true, xs: 2 }),\n        )}\n      </MuiGrid>\n    </MuiBox>\n  );\n}\n\nexport default Ratings;\n","import React from 'react';\nimport { Link, Outlet, useParams } from 'react-router-dom';\n\nfunction Users() {\n  const { userSlug } = useParams();\n  return (\n    <>\n      <ul>\n        <li>\n          <Link to={`/app/users/${userSlug}/ratings`}>Ratings</Link>\n        </li>\n        <li>\n          <Link to={`/app/users/${userSlug}/recommendations`}>\n            Recommendations\n          </Link>\n        </li>\n        <li>\n          <Link to={`/app/users/${userSlug}/watchlist`}>Watchlist</Link>\n        </li>\n        <li>\n          <Link to={`/app/users/${userSlug}/lists`}>Lists</Link>\n        </li>\n        <li>\n          <Link to={`/app/users/${userSlug}/comments`}>Comments</Link>\n        </li>\n      </ul>\n      <Outlet />\n    </>\n  );\n}\n\nexport default Users;\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst selectEntities = createSelector(\n  function (state) {\n    return state.users.user.watchlist;\n  },\n  function (watchlist) {\n    return watchlist;\n  },\n);\n\nexport { selectEntities };\n","import { Box as MuiBox, Grid as MuiGrid } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\n\nimport { selectEntities as selectProfileWatchlist } from '../../../redux/modules/users/profile/watchlist/watchlist.selectors';\nimport { selectEntities as selectUserWatchlist } from '../../../redux/modules/users/user/watchlist/watchlist.selectors';\nimport { fetchWatchlist } from '../../../redux/modules/users/user/watchlist/watchlist.slice';\nimport { getUserSlug, renderTileBasedOnType } from '../../../utils';\n\nfunction Watchlist() {\n  const { userSlug } = useParams();\n  const dispatch = useDispatch();\n  const watchlist = useSelector(\n    userSlug === getUserSlug() ? selectProfileWatchlist : selectUserWatchlist,\n  );\n\n  useEffect(() => {\n    dispatch(fetchWatchlist(userSlug));\n  }, [dispatch, userSlug]);\n\n  //@TODO: Add empty design component\n  if (!watchlist.length) {\n    return 'No items';\n  }\n\n  return (\n    <MuiBox p={2}>\n      <MuiGrid container spacing={1}>\n        {watchlist.map((item) =>\n          renderTileBasedOnType(item, MuiGrid, { item: true, xs: 2 }),\n        )}\n      </MuiGrid>\n    </MuiBox>\n  );\n}\n\nexport default Watchlist;\n","import { createSlice } from '@reduxjs/toolkit';\n\nfunction matches(action) {\n  const patterns = ['/pending', '/fulfilled', '/rejected'];\n  return patterns.some((pattern) => action.type.endsWith(pattern));\n}\n\nconst { reducer } = createSlice({\n  extraReducers: (builder) => {\n    builder.addMatcher(matches, (state, action) => {\n      const parts = action.type.split('/');\n      const asyncState = parts.pop();\n      state[`${parts.join('/')}`] = asyncState === 'pending';\n    });\n  },\n  initialState: {},\n  name: 'loading',\n  reducers: {},\n});\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport comments from './comments/comments.slice';\nimport list from './list/list.slice';\nimport lists from './lists/lists.slice';\nimport ratings from './ratings/ratings.slice';\nimport recommendations from './recommendations/recommendations.slice';\nimport watchlist from './watchlist/watchlist.slice';\n\nexport default combineReducers({\n  comments,\n  list,\n  lists,\n  ratings,\n  recommendations,\n  watchlist,\n});\n","import { combineReducers } from 'redux';\n\nimport comments from './comments/comments.slice';\nimport list from './list/list.slice';\nimport lists from './lists/lists.slice';\nimport ratings from './ratings/ratings.slice';\nimport recommendations from './recommendations/recommendations.slice';\nimport watchlist from './watchlist/watchlist.slice';\n\nexport default combineReducers({\n  comments,\n  list,\n  lists,\n  ratings,\n  recommendations,\n  watchlist,\n});\n","import { combineReducers } from 'redux';\n\nimport profile from './profile';\nimport user from './user';\n\nexport default combineReducers({\n  profile,\n  user,\n});\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport loading from './loading/loading.slice';\nimport comments from './modules/comments/comments.slice';\nimport movie from './modules/movie/movie.slice';\nimport movies from './modules/movies/movies.slice';\nimport person from './modules/person/person.slice';\nimport search from './modules/search/search.slice';\nimport show from './modules/show/show.slice';\nimport shows from './modules/shows/shows.slice';\nimport users from './modules/users';\nimport notifications from './notifications/notifications.slice';\n\nconst store = configureStore({\n  reducer: {\n    comments,\n    loading,\n    movie,\n    movies,\n    notifications,\n    person,\n    search,\n    show,\n    shows,\n    users,\n  },\n});\n\nexport default store;\n","import { CssBaseline as MuiCssBaseline } from '@material-ui/core';\nimport React, { useMemo } from 'react';\nimport { Provider as ReduxProvider, useSelector } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Navigate,\n  Route,\n  Routes,\n} from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout.component';\nimport LoadingOverlay from './components/LoadingOverlay/LoadingOverlay.component';\nimport NotFound from './components/NotFound/NotFound.component';\nimport useScrollToTopOnLocationChange from './hooks/useScrollToTopOnLocationChange';\nimport {\n  default as MovieComments,\n  default as ShowComments,\n} from './modules/Comments/Comments.component';\nimport Movie from './modules/Movie/Movie.component';\nimport Movies from './modules/Movies/Movies.component';\nimport Person from './modules/Person/Person.component';\nimport Search from './modules/Search/Search.component';\nimport Show from './modules/Show/Show.component';\nimport Shows from './modules/Shows/Shows.component';\nimport Comments from './modules/Users/Comments/Comments.component';\nimport List from './modules/Users/List/List.component';\nimport Lists from './modules/Users/Lists/Lists.component';\nimport Ratings from './modules/Users/Ratings/Ratings.component';\nimport Recommendations from './modules/Users/Recommendations/Recommendations.component';\nimport Users from './modules/Users/Users.component';\nimport Watchlist from './modules/Users/Watchlist/Watchlist.component';\nimport { selectLoadingFlagsReducedFactory } from './redux/loading/loading.selectors';\nimport store from './redux/store';\n\n// In case of any routing change, make sure to reflect the exact change\n// in file ./src/components/Layouts/Layouts/Layouts.utils.js in variable NAV_PATHS\nfunction App() {\n  useScrollToTopOnLocationChange();\n  const selector = useMemo(selectLoadingFlagsReducedFactory, []);\n  const loading = useSelector((state) =>\n    selector(state, [\n      'comments/fetch',\n      'movie/fetch',\n      'movies/fetch',\n      'person/fetch',\n      'search/fetch',\n      'show/fetch',\n      'shows/fetch',\n      'users/comments/fetch',\n      'users/list/fetch',\n      'users/lists/fetch',\n      'users/ratings/fetch',\n      'users/recommendations/fetch',\n      'users/watchlist/fetch',\n    ]),\n  );\n\n  return (\n    <>\n      {loading && <LoadingOverlay />}\n      <Routes basename='/app'>\n        <Route element={<Navigate replace to='movies/trending' />} path='/' />\n        <Route element={<Layout />} path='/'>\n          <Route path='movies'>\n            <Route element={<Navigate replace to='trending' />} path='/' />\n            <Route element={<Movies category='trending' />} path='trending' />\n            <Route element={<Movies category='popular' />} path='popular' />\n            <Route\n              element={<Movies category='recommended' />}\n              path='recommended'\n            />\n            <Route element={<Movies category='watched' />} path='watched' />\n            <Route\n              element={<Movies category='anticipated' />}\n              path='anticipated'\n            />\n            <Route element={<Movie />} path=':slug' />\n            <Route\n              element={<MovieComments entity='movies' />}\n              path=':slug/comments'\n            />\n          </Route>\n          <Route path='shows'>\n            <Route element={<Navigate replace to='trending' />} path='/' />\n            <Route element={<Shows category='trending' />} path='trending' />\n            <Route element={<Shows category='popular' />} path='popular' />\n            <Route\n              element={<Shows category='recommended' />}\n              path='recommended'\n            />\n            <Route element={<Shows category='watched' />} path='watched' />\n            <Route\n              element={<Shows category='anticipated' />}\n              path='anticipated'\n            />\n            <Route element={<Show />} path=':slug' />\n            <Route\n              element={<ShowComments entity='shows' />}\n              path=':slug/comments'\n            />\n          </Route>\n          <Route element={<Person />} path='people/:slug' />\n          <Route path='search'>\n            <Route element={<Navigate replace to='all' />} path='/' />\n            <Route element={<Search entity='all' />} path='all' />\n            <Route element={<Search entity='movies' />} path='movies' />\n            <Route element={<Search entity='shows' />} path='shows' />\n            <Route element={<Search entity='people' />} path='people' />\n          </Route>\n          <Route element={<Users />} path='users/:userSlug'>\n            <Route element={<Navigate replace to='ratings' />} path='/' />\n            <Route element={<Ratings />} path='ratings' />\n            <Route element={<Recommendations />} path='recommendations' />\n            <Route element={<Watchlist />} path='watchlist' />\n            <Route path='lists'>\n              <Route element={<Lists />} path='/' />\n              <Route element={<List />} path=':id' />\n            </Route>\n            <Route element={<Comments />} path='comments' />\n          </Route>\n        </Route>\n        <Route element={<NotFound />} path='*' />\n      </Routes>\n    </>\n  );\n}\n\nfunction Providers() {\n  return (\n    <ReduxProvider store={store}>\n      <Router>\n        <MuiCssBaseline />\n        <App />\n      </Router>\n    </ReduxProvider>\n  );\n}\n\nexport default Providers;\n","import { fetchLists } from './modules/users/user/lists/lists.slice';\nimport { fetchRatings } from './modules/users/user/ratings/ratings.slice';\nimport { fetchRecommendations } from './modules/users/user/recommendations/recommendations.slice';\nimport { fetchWatchlist } from './modules/users/user/watchlist/watchlist.slice';\n\nfunction init() {\n  return async function (dispatch) {\n    await Promise.all([\n      dispatch(fetchLists()),\n      dispatch(fetchRatings()),\n      dispatch(fetchRecommendations()),\n      dispatch(fetchWatchlist()),\n    ]);\n  };\n}\n\nexport default init;\n","import './styles.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App.component';\nimport init from './redux/init';\nimport store from './redux/store';\n\nconst { dispatch } = store;\n\n//@TODO: Add default loading state in public/index.html\ndispatch(init()).then(function () {\n  ReactDOM.render(<App />, document.getElementById('root'));\n});\n"],"sourceRoot":""}