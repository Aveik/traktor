(this["webpackJsonpmovie-tinder-frontend"]=this["webpackJsonpmovie-tinder-frontend"]||[]).push([[0],{149:function(t,e,n){},248:function(t,e,n){"use strict";n.r(e);var a=n(1),r=(n(149),n(0)),c=n.n(r),i=n(21),s=n.n(i),o=n(312),u=n(10),l=n(17),d=n(23),j=n(294),p=n(319),b=n(314),m=n(70),h=n(299),f=n(287),O=n(15),g=n(42),v=Object(g.a)((function(t){return t.notifications}),(function(t){return t})),x=n(6);function y(t){return t.type.endsWith("/rejected")}var w=Object(x.c)({extraReducers:function(t){t.addMatcher(y,(function(t,e){t[e.meta.requestId]=e.payload}))},initialState:{},name:"notifications",reducers:{createNotification:{prepare:function(t){return{payload:{id:Object(x.d)(),message:t}}},reducer:function(t,e){t[e.payload.id]=e.payload.message}},removeNotification:function(t,e){delete t[e.payload]}}}),P=w.actions,k=w.reducer,S=(P.createNotification,P.removeNotification),I=k;var N=function(t){var e=t.id,n=t.message,r=Object(u.b)();return Object(a.jsx)("div",{onClick:function(){r(S(e))},children:n})};var R,C=function(){var t=Object(u.c)(v);return Object.entries(t).map((function(t){var e=Object(O.a)(t,2),n=e[0],r=e[1];return Object(a.jsx)(N,{id:n,message:r},n)}))},W=n(278),z=Object(W.a)({drawerPaper:{width:256}}),L=n(13),F=n(251),T=n(290),V=n(14),M=n(318),A=n(280),E=n(317),B=n(284),_=n(285),D=n(286),q=n(288),G=n(289),H=n(316),J=n(282),K=n(5),U=n.n(K),Y=n(12),Q=n(9),X=n(8),Z=n.n(X),$=Object(x.b)("actions/lists/add",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.post("/trakt/users/".concat(Xt(),"/lists"),e);case 4:return r=t.sent,t.abrupt("return",r.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),tt=Object(x.b)("actions/lists/remove",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.delete("/trakt/users/".concat(Xt(),"/lists/").concat(e));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()),et=Object(x.b)("actions/lists/update",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.description,r=e.name,c=e.privacy,i=e.slug,s=n.rejectWithValue,t.prev=2,t.next=5,Z.a.put("/trakt/users/".concat(Xt(),"/lists/").concat(i),{description:a,name:r,privacy:c,slug:i});case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",s(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),nt=Object(x.b)("app/lists/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.get("/trakt/users/".concat(Xt(),"/lists"));case 4:return r=t.sent,t.next=7,Promise.all(r.data.map((function(t){return Z.a.get("/trakt/users/".concat(Xt(),"/lists/").concat(t.ids.slug,"/items"))})));case 7:return c=t.sent,t.abrupt("return",r.data.map((function(t,e){return Object(L.a)(Object(L.a)({},t),{},{items:Qt(c[e].data)})})));case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()),at=Object(x.c)({extraReducers:(R={},Object(Y.a)(R,nt.fulfilled,(function(t,e){return e.payload})),Object(Y.a)(R,$.fulfilled,(function(t,e){t.push(Object(L.a)(Object(L.a)({},e.payload),{},{items:[]}))})),Object(Y.a)(R,tt.fulfilled,(function(t,e){var n=e.meta.arg,a=t.findIndex((function(t){return t.ids.slug===n}));t.splice(a,1)})),Object(Y.a)(R,et.fulfilled,(function(t,e){var n=e.meta.arg.slug,a=t.findIndex((function(t){return t.ids.slug===n}));t[a]=Object(L.a)(Object(L.a)({},t[a]),e.payload)})),R),initialState:[],name:"app/lists",reducers:{}}).reducer,rt=Object(x.b)("actions/list/add",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.listSlug,c=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/users/".concat(Xt(),"/lists/").concat(r,"/items"),Object(Y.a)({},a,[{ids:{slug:c}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),ct=Object(x.b)("actions/list/remove",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.listSlug,c=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/users/".concat(Xt(),"/lists/").concat(r,"/items/remove"),Object(Y.a)({},a,[{ids:{slug:c}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}());function it(t){return function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(rt(t));case 2:return e.next=4,n(nt());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function st(t){return function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(ct(t));case 2:return e.next=4,n(nt());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function ot(){return Object(g.a)((function(t){return t.app.lists}),(function(t,e){return e}),(function(t,e,n){return n}),(function(t,e,n){return e=te(e),t.map((function(t){return{listed:t.items.some((function(t){return t.type===e&&t[e].ids.slug===n})),name:t.name,slug:t.ids.slug}}))}))}function ut(t){return t.loading}function lt(t,e){return e}var dt=Object(g.a)([ut,lt],(function(t,e){return Boolean(t[e])}));function jt(){return Object(g.a)([ut,lt],(function(t,e){return Object.keys(t).filter((function(t){return e.includes(t)})).some((function(e){return t[e]}))}))}var pt=Object(W.a)({listItemActionRoot:{minWidth:32}});var bt=function(t){var e=t.entity,n=t.size,c=void 0===n?"default":n,i=t.slug,s=pt(),o=Object(u.b)(),l=Object(r.useMemo)(ot,[]),j=Object(r.useMemo)(jt,[]),p=Object(u.c)((function(t){return j(t,["app/lists/fetch","actions/list/add","actions/list/remove"])})),b=Object(u.c)((function(t){return l(t,e,i)})),m=Object(r.useState)(null),h=Object(O.a)(m,2),g=h[0],v=h[1],x=Boolean(g),y=Object(r.useMemo)((function(){return b.filter((function(t){var e=t.listed;return Boolean(e)})).length}),[b]);function w(t){v(t.currentTarget)}function P(t,e,n){return function(){var a=it;e&&(a=st),o(a({entity:t,listSlug:n,slug:i}))}}var k=Object(a.jsx)(A.a,{color:"secondary",disabled:p,fullWidth:!0,onClick:w,startIcon:Object(a.jsx)(J.a,{}),variant:y?"contained":"outlined",children:y?"Listed on ".concat(y," lists"):"Add to your lists"});return"small"===c&&(k=Object(a.jsx)(E.a,{title:y?"Listed on ".concat(y," lists"):"Add to your lists",children:Object(a.jsx)(B.a,{color:y?"secondary":"inherit",onClick:w,size:"small",children:Object(a.jsx)(J.a,{fontSize:"small"})})})),Object(a.jsxs)(a.Fragment,{children:[k,Object(a.jsxs)(_.a,{anchorEl:g,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){v(null)},open:x,transformOrigin:{horizontal:"center",vertical:"top"},children:[p&&Object(a.jsx)(D.a,{color:"secondary"}),Object(a.jsxs)(f.a,{dense:!0,subheader:Object(a.jsxs)(q.a,{children:["Listed on ",y," of ",b.length," lists"]}),children:[b.map((function(t){var n=t.listed,r=t.name,c=t.slug;return Object(a.jsxs)(F.a,{button:!0,disabled:p,onClick:P(e,n,c),children:[Object(a.jsx)(G.a,{classes:{root:s.listItemActionRoot},children:Object(a.jsx)(H.a,{checked:n,disableRipple:!0,edge:"start",size:"small"})}),Object(a.jsx)(T.a,{children:r})]},c)})),Object(a.jsxs)(F.a,{button:!0,component:d.b,to:"?addList",children:[Object(a.jsx)(G.a,{classes:{root:s.listItemActionRoot}}),Object(a.jsx)(T.a,{children:"Add list"})]})]})]})]})},mt=n(291),ht=n(292),ft=Object(x.b)("app/recommendations/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.get("/trakt/users/".concat(Xt(),"/recommendations?extended=full"));case 4:return r=t.sent,t.abrupt("return",r.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),Ot=Object(x.c)({extraReducers:Object(Y.a)({},ft.fulfilled,(function(t,e){return e.payload})),initialState:[],name:"app/recommendations",reducers:{}}).reducer,gt=Object(x.b)("actions/recommendations/recommend",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.slug,c=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/sync/recommendations",Object(Y.a)({},a,[{ids:{slug:r}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",c(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),vt=Object(x.b)("actions/recommendations/unrecommend",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.slug,c=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/sync/recommendations/remove",Object(Y.a)({},a,[{ids:{slug:r}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",c(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}());function xt(){return Object(g.a)([function(t){return t.app.recommendations},function(t,e){return te(e)},function(t,e,n){return n}],(function(t,e,n){var a=t.find((function(t){return t.type===e&&t[e].ids.slug===n}));return Boolean(a)}))}var yt=function(t){var e=t.entity,n=t.size,c=void 0===n?"default":n,i=t.slug,s=Object(u.b)(),o=Object(r.useMemo)(xt,[]),l=Object(r.useMemo)(jt,[]),d=Object(u.c)((function(t){return o(t,e,i)})),j=Object(u.c)((function(t){return l(t,["app/recommendations/fetch","actions/recommendations/recommend","actions/recommendations/unrecommend"])}));function p(){var t;d?s((t={entity:e,slug:i},function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(vt(t));case 2:return e.next=4,n(ft());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):s(function(t){return function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(gt(t));case 2:return e.next=4,n(ft());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({entity:e,slug:i}))}return"small"===c?Object(a.jsx)(E.a,{title:d?"Remove from recommendations":"Recommend",children:Object(a.jsx)("span",{children:Object(a.jsx)(B.a,{color:d?"secondary":"inherit",disabled:j,onClick:p,size:"small",children:j?Object(a.jsx)(mt.a,{color:"secondary",size:20}):Object(a.jsx)(ht.a,{fontSize:"small"})})})}):Object(a.jsx)(A.a,{color:"secondary",disabled:j,fullWidth:!0,onClick:p,startIcon:Object(a.jsx)(ht.a,{}),variant:d?"contained":"outlined",children:d?"Remove from recommendations":"Recommend"})},wt=n(293),Pt=Object(x.b)("app/watchlist/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.get("/trakt/users/".concat(Xt(),"/watchlist?extended=full"));case 4:return r=t.sent,t.abrupt("return",Qt(r.data));case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),kt=Object(x.c)({extraReducers:Object(Y.a)({},Pt.fulfilled,(function(t,e){return e.payload})),initialState:[],name:"app/watchlist",reducers:{}}).reducer,St=Object(x.b)("actions/watchlist/add",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.slug,c=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/sync/watchlist",Object(Y.a)({},a,[{ids:{slug:r}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",c(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),It=Object(x.b)("actions/watchlist/remove",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.slug,c=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/sync/watchlist/remove",Object(Y.a)({},a,[{ids:{slug:r}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",c(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}());function Nt(){return Object(g.a)([function(t){return t.app.watchlist},function(t,e){return te(e)},function(t,e,n){return n}],(function(t,e,n){var a=t.find((function(t){return t.type===e&&t[e].ids.slug===n}));return Boolean(a)}))}var Rt=function(t){var e=t.entity,n=t.size,c=void 0===n?"default":n,i=t.slug,s=Object(u.b)(),o=Object(r.useMemo)(Nt,[]),l=Object(r.useMemo)(jt,[]),d=Object(u.c)((function(t){return o(t,e,i)})),j=Object(u.c)((function(t){return l(t,["app/watchlist/fetch","actions/watchlist/add","actions/watchlist/remove"])}));function p(){var t;d?s((t={entity:e,slug:i},function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(It(t));case 2:return e.next=4,n(Pt());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):s(function(t){return function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(St(t));case 2:return e.next=4,n(Pt());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({entity:e,slug:i}))}return"small"===c?Object(a.jsx)(E.a,{title:d?"Remove from watchlist":"Add to watchlist",children:Object(a.jsx)("span",{children:Object(a.jsx)(B.a,{color:d?"secondary":"inherit",disabled:j,onClick:p,size:"small",children:j?Object(a.jsx)(mt.a,{color:"secondary",size:20}):Object(a.jsx)(wt.a,{fontSize:"small"})})})}):Object(a.jsx)(A.a,{color:"secondary",disabled:j,fullWidth:!0,onClick:p,startIcon:Object(a.jsx)(wt.a,{}),variant:d?"contained":"outlined",children:d?"Remove from watchlist":"Add to watchlist"})};var Ct=function(t){var e=t.entity,n=t.season,a=t.size,r=t.tmdbId,c=t.type;if(e=te(e),!r)return"/images/placeholder.png";var i="/images/".concat(e,"/").concat(r,"/").concat(c,"?");return void 0!==n&&(i+="season=".concat(n)),a&&(i+="size=".concat(a)),i},Wt=Object(W.a)((function(t){return{children:{textAlign:"center"},content:{bottom:t.spacing(1),left:t.spacing(1),position:"absolute"},footer:{"& > *:not(:last-child)":{marginRight:t.spacing(1)},backgroundColor:t.palette.grey[900]},link:function(e){var n=e.backgroundImage,a=e.isPerson;return{background:"url(".concat(n,") no-repeat ").concat(a?"top center":"center"),color:t.palette.primary.contrastText,display:"block",paddingTop:"148%",position:"relative",width:"100%"}},root:{}}}));var zt=function(t){var e=t.children,n=t.content,r=t.entity,c=t.season,i=t.size,s=void 0===i?"default":i,o=t.slug,u=t.tmdbId,l="people"===r,j="small"===s,p=Ct({entity:r,season:c,size:l?j?"w185":"h632":j?"w185":"w342",tmdbId:u,type:l?"profile":"poster"}),b=Wt({backgroundImage:p,isPerson:l});return Object(a.jsxs)("div",{className:b.root,children:[Object(a.jsx)(d.b,{className:b.link,style:{backgroundSize:"cover"},to:"/app/".concat(r,"/").concat(o),children:n&&Object(a.jsx)("div",{className:b.content,children:n})}),Object(a.jsx)("div",{className:b.children,children:e})]})},Lt=Object(W.a)((function(t){return{chips:{"& > *":{margin:"0 ".concat(t.spacing(.5),"px ").concat(t.spacing(.5),"px 0")}},footer:{backgroundColor:t.palette.grey[900],color:t.palette.common.white,padding:8}}}));var Ft=function(t){var e=t.actions,n=t.children,r=t.chips,c=void 0===r?[]:r,i=t.entity,s=t.primary,o=t.season,u=t.secondary,l=t.size,d=t.slug,p=t.tmdbId,b=Lt(),h="people"===i,f=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:b.chips,children:c.map((function(t){return Object(a.jsx)(M.a,{color:"secondary",label:t,size:"small"},t)}))}),Object(a.jsx)(m.a,{display:"inline",variant:"subtitle2",children:s}),u&&Object(a.jsxs)(m.a,{display:"inline",variant:"caption",children:[" ",u]})]});return Object(a.jsxs)(zt,{content:f,entity:i,season:o,size:l,slug:d,tmdbId:p,children:[Object(a.jsx)("div",{className:b.footer,children:Object(a.jsxs)(j.a,{container:!0,justify:"space-between",children:[Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:1,xs:6,children:[Object(a.jsx)(bt,{entity:i,size:"small",slug:d}),!h&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Rt,{entity:i,size:"small",slug:d}),Object(a.jsx)(yt,{entity:i,size:"small",slug:d})]})]}),Object(a.jsx)(j.a,{container:!0,item:!0,justify:"flex-end",spacing:1,xs:6,children:e})]})}),n]})},Tt=n(295),Vt=n(321),Mt=Object(x.b)("app/ratings/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.get("/trakt/users/".concat(Xt(),"/ratings"));case 4:return r=t.sent,t.abrupt("return",Qt(r.data));case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),At=Object(x.c)({extraReducers:Object(Y.a)({},Mt.fulfilled,(function(t,e){return e.payload})),initialState:[],name:"app/ratings",reducers:{}}).reducer,Et=Object(x.b)("actions/ratings/rate",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.rating,c=e.slug,i=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/sync/ratings",Object(Y.a)({},a,[{ids:{slug:c},rating:r}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()),Bt=Object(x.b)("actions/ratings/remove",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.slug,c=n.rejectWithValue,t.prev=2,t.next=5,Z.a.post("/trakt/sync/ratings/remove",Object(Y.a)({},a,[{ids:{slug:r}}]));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",c(t.t0.toString()));case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}());function _t(){return Object(g.a)([function(t){return t.app.ratings},function(t,e){return te(e)},function(t,e,n){return n}],(function(t,e,n){var a=t.find((function(t){return t.type===e&&t[e].ids.slug===n}));return a?a.rating:0}))}var Dt=Object(W.a)((function(t){return{buttonRoot:{minWidth:154},ratingRoot:{color:t.palette.secondary.main}}}));function qt(t){switch(t){case-1:return"Unrate";case 1:return"1 - Weak sauce";case 2:return"2 - Terrible";case 3:return"3 - Bad";case 4:return"4 - Poor";case 5:return"5 - Meh";case 6:return"6 - Fair";case 7:return"7 - Good";case 8:return"8 - Great";case 9:return"9 - Superb";case 10:return"10 - Excellent!";default:return"Rate"}}var Gt=function(t){var e=t.entity,n=t.overallRating,c=t.size,i=t.slug,s=Dt(),o=Object(u.b)(),l=Object(r.useMemo)(_t,[]),d=Object(r.useMemo)(jt,[]),j=Object(u.c)((function(t){return l(t,e,i)})),p=Object(u.c)((function(t){return d(t,["app/ratings/fetch","actions/ratings/rate","actions/ratings/remove"])})),h=Object(r.useState)(null),f=Object(O.a)(h,2),g=f[0],v=f[1],x=Boolean(g),y=Object(r.useState)(null),w=Object(O.a)(y,2),P=w[0],k=w[1],S=null!==P;function I(t){v(t.currentTarget)}var N,R=Object(a.jsx)(A.a,{classes:{root:s.buttonRoot},color:"secondary",fullWidth:!0,onClick:I,startIcon:Object(a.jsx)(Tt.a,{}),variant:j?"contained":"outlined",children:qt(S?P:j)});return"small"===c&&(R=Object(a.jsx)(E.a,{title:"Rate",children:Object(a.jsxs)("span",{children:[Object(a.jsx)(m.a,{color:n||!j?"inherit":"secondary",variant:"caption",children:n||(N=S?P:j,-1===N?0:N)}),Object(a.jsx)(B.a,{color:j?"secondary":"inherit",onClick:I,size:"small",children:Object(a.jsx)(Tt.a,{fontSize:"small"})})]})})),Object(a.jsxs)(a.Fragment,{children:[R,Object(a.jsxs)(_.a,{anchorEl:g,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){k(null),v(null)},open:x,transformOrigin:{horizontal:"center",vertical:"top"},children:[p&&Object(a.jsx)(D.a,{color:"secondary"}),Object(a.jsxs)(b.a,{p:1,pb:.5,children:["small"===c&&Object(a.jsx)(b.a,{textAlign:"center",children:qt(S?P:j)}),Object(a.jsx)(Vt.a,{classes:{root:s.ratingRoot},disabled:p,icon:Object(a.jsx)(Tt.a,{fontSize:"inherit"}),max:10,name:"_",onChange:function(t,n){var a;o(n?function(t){return function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Et(t));case 2:return e.next=4,n(Mt());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({entity:e,rating:n,slug:i}):(a={entity:e,slug:i},function(){var t=Object(Q.a)(U.a.mark((function t(e){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Bt(a));case 2:return t.next=4,e(Mt());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},onChangeActive:function(t,e){k(e!==j?-1!==e?e:null:-1)},value:j})]})]})]})};var Ht=function(t){var e=t.entity,n=t.overallRating,r=t.slug;return Object(a.jsx)(Ft,Object(L.a)({actions:Object(a.jsx)(Gt,{entity:e,overallRating:n,size:"small",slug:r})},t))},Jt=["movie","person","show"],Kt=20,Ut=36;function Yt(t){if(!t)return[];var e=t.ratings,n=t.stats,r=t.summary;return[["Rating",ae(null===e||void 0===e?void 0:e.rating)],["Votes",ne(null===e||void 0===e?void 0:e.votes)],["Released",new Date(null===r||void 0===r?void 0:r.released).toLocaleDateString("da-Dk")],["Genres",null===r||void 0===r?void 0:r.genres.map(V.a).join(", ")],["Certification",null===r||void 0===r?void 0:r.certification],["Watchers",ne(null===n||void 0===n?void 0:n.watchers)],["Plays",ne(null===n||void 0===n?void 0:n.plays)],["Lists",ne(null===n||void 0===n?void 0:n.lists)],["Comments",ne(null===n||void 0===n?void 0:n.comments)],["Trailer",Object(a.jsx)("a",{href:null===r||void 0===r?void 0:r.trailer,children:"Watch trailer"})]]}function Qt(t){return t.filter((function(t){var e=t.type;return Jt.includes(e)}))}function Xt(){return document.cookie.split("; ").reduce((function(t,e){var n=e.split("="),a=Object(O.a)(n,2),r=a[0],c=a[1];return t[r]=c,t}),{}).userSlug}function Zt(t,e,n){var r,c=t.type;t=t[c];var i={chips:[Object(V.a)(c)],entity:ee(c),slug:t.ids.slug,tmdbId:t.ids.tmdb};return"person"===c?(r=Ft,i.primary=t.name):(r=Ht,i.primary=t.title,i.secondary=t.year,i.overallRating=ae(t.rating,0)),e?Object(a.jsx)(e,Object(L.a)(Object(L.a)({},n),{},{children:Object(a.jsx)(r,Object(L.a)({},i))}),t.ids.slug):Object(a.jsx)(r,Object(L.a)({},i),t.ids.slug)}function $t(t,e,n){var r=t.type;t=t[r];var c={entity:ee(r),slug:t.ids.slug,tmdbId:t.ids.tmdb};return e?Object(a.jsx)(e,Object(L.a)(Object(L.a)({},n),{},{children:Object(a.jsx)(zt,Object(L.a)({},c))}),t.ids.slug):Object(a.jsx)(zt,Object(L.a)({},c),t.ids.slug)}function te(t){switch(t){case"movies":return"movie";case"shows":return"show";case"people":return"person";default:return"movie,show,person"}}function ee(t){switch(t){case"movie":return"movies";case"show":return"shows";case"person":return"people";default:return""}}function ne(t){return t?Math.abs(t)>999?Math.sign(t)*(Math.abs(t)/1e3).toFixed(1)+"k":Math.sign(t)*Math.abs(t):""}function ae(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t?"".concat((10*t).toFixed(e),"%"):""}var re=n(38),ce=n(298),ie=n(296),se=n(297),oe=Object(W.a)((function(t){return{nestedListItemGutters:{paddingLeft:t.spacing(4)}}}));var ue=function(t){var e=t.children,n=t.listItemTextProps,i=Object(re.a)(t,["children","listItemTextProps"]),s=oe(),o=Object(r.useState)(!1),u=Object(O.a)(o,2),l=u[0],d=u[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(F.a,Object(L.a)(Object(L.a)({},i),{},{onClick:function(t){t.preventDefault(),d(!l)},children:[Object(a.jsx)(T.a,Object(L.a)({},n)),l?Object(a.jsx)(ie.a,{}):Object(a.jsx)(se.a,{})]})),Object(a.jsx)(ce.a,{in:l,children:Object(a.jsx)(f.a,{disablePadding:!0,children:c.a.Children.map(e,(function(t){return c.a.cloneElement(t,{classes:{gutters:s.nestedListItemGutters}})}))})})]})},le=[{nested:[{path:"movies/trending",title:"Trending"},{path:"movies/popular",title:"Popular"},{path:"movies/recommended",title:"Recommended"},{path:"movies/watched",title:"Watched"},{path:"movies/anticipated",title:"Anticipated"}],title:"Movies"},{nested:[{path:"shows/trending",title:"Trending"},{path:"shows/popular",title:"Popular"},{path:"shows/recommended",title:"Recommended"},{path:"shows/watched",title:"Watched"},{path:"shows/anticipated",title:"Anticipated"}],title:"Shows"},{nested:[{path:"users/".concat(Xt(),"/ratings"),title:"Ratings"},{path:"users/".concat(Xt(),"/recommendations"),title:"Recommendations"},{path:"users/".concat(Xt(),"/watchlist"),title:"Watchlist"},{path:"users/".concat(Xt(),"/lists"),title:"Lists"},{path:"users/".concat(Xt(),"/comments"),title:"Comments"}],title:"Profile"},{nested:[{path:"search/all",title:"All"},{path:"search/movies",title:"Movies"},{path:"search/shows",title:"Shows"},{path:"search/people",title:"People"}],title:"Search"}];var de=function(){var t=z();return Object(a.jsxs)(j.a,{children:[Object(a.jsxs)(p.a,{anchor:"left",classes:{paper:t.drawerPaper},color:"",variant:"permanent",children:[Object(a.jsxs)(b.a,{px:2,py:1,children:[Object(a.jsx)(m.a,{variant:"h6",children:"Traktor"}),Object(a.jsx)(m.a,{variant:"caption",children:"v0.1"})]}),Object(a.jsx)(h.a,{}),Object(a.jsx)(f.a,{disablePadding:!0,children:le.map((function(t){var e=t.nested,n=t.path,c=t.title,i={activeClassName:"Mui-selected",button:!0,component:d.c,key:c,to:n};if(!e&&n)return Object(a.jsx)(F.a,Object(L.a)(Object(L.a)({},i),{},{children:Object(a.jsx)(T.a,{primary:c})}));var s=e.map((function(t){var e=t.path,n=t.title;return Object(r.createElement)(F.a,Object(L.a)(Object(L.a)({},i),{},{key:n,to:e}),Object(a.jsx)(T.a,{primary:n}))})),o={button:!0,key:c,listItemTextProps:{primary:c}};return Object(a.jsx)(ue,Object(L.a)(Object(L.a)({},o),{},{children:s}))}))})]}),Object(a.jsxs)(b.a,{ml:32,children:[Object(a.jsx)(C,{}),Object(a.jsx)(l.b,{})]})]})},je=n(301),pe=n(302),be=n(303),me=n(313),he=n(300);var fe=function(t){var e=t.description,n=void 0===e?"":e,c=t.disabled,i=void 0!==c&&c,s=t.isPrivate,o=void 0!==s&&s,u=t.name,l=void 0===u?"":u,d=t.onSubmit,j=Object(r.useState)({description:n||"",isPrivate:o||!1,name:l||""}),p=Object(O.a)(j,2),m=p[0],h=p[1];function f(){h({description:n,isPrivate:o,name:l})}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{mb:2,children:Object(a.jsx)(me.a,{disabled:i,fullWidth:!0,label:"Name",onChange:function(t){var e=t.target.value;h(Object(L.a)(Object(L.a)({},m),{},{name:e}))},size:"small",value:m.name,variant:"outlined"})}),Object(a.jsx)(b.a,{mb:0,children:Object(a.jsx)(me.a,{disabled:i,fullWidth:!0,helperText:"Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]",label:"Description",multiline:!0,onChange:function(t){var e=t.target.value;h(Object(L.a)(Object(L.a)({},m),{},{description:e}))},size:"small",value:m.description,variant:"outlined"})}),Object(a.jsxs)("div",{style:{textAlign:"right"},children:[Object(a.jsx)(he.a,{color:"primary",disabled:i,onChange:function(){h(Object(L.a)(Object(L.a)({},m),{},{isPrivate:!m.isPrivate}))},selected:m.isPrivate,size:"small",value:m.isPrivate,children:m.isPrivate?"Private":"Public"})," ",Object(a.jsx)(A.a,{color:"secondary",disabled:i,onClick:function(){d({description:m.description,name:m.name,privacy:m.isPrivate?"private":"public",reset:f})},variant:"outlined",children:"Submit"})]})]})};var Oe=function(){var t=Object(u.b)(),e=Object(d.d)(),n=Object(O.a)(e,2),c=n[0],i=n[1],s=Object(u.c)((function(t){return dt(t,"actions/lists/add")})),o=Object(r.useMemo)((function(){return Object.fromEntries(c)}),[c]),l=o.addList,j=Object(re.a)(o,["addList"]),p=void 0!==l;function m(){i(Object(L.a)({},j))}return Object(a.jsxs)(je.a,{onClose:m,open:p,children:[Object(a.jsx)(pe.a,{children:"Add list"}),Object(a.jsx)(be.a,{children:Object(a.jsx)(b.a,{mb:1,children:Object(a.jsx)(fe,{disabled:s,onSubmit:function(e){var n=e.reset,a=Object(re.a)(e,["reset"]);t($(a)).then((function(){n(),m()}))}})})})]})},ge=Object(W.a)((function(t){return{root:{alignItems:"center",backgroundColor:t.palette.text.primary,display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:0,width:"100%",zIndex:t.zIndex.tooltip+1}}}));var ve=function(t){var e=t.fullscreen,n=void 0===e||e,c=ge();return Object(r.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.style.overflow="initial"}}),[]),n?s.a.createPortal(Object(a.jsx)("div",{className:c.root,children:Object(a.jsx)(mt.a,{color:"secondary",size:64})}),document.getElementById("loadingOverlayRoot")):Object(a.jsx)("h1",{children:"hi"})};var xe=function(){return Object(a.jsx)("h1",{children:"404 not found"})};var ye=function(){var t=Object(l.h)();Object(r.useEffect)((function(){window.scrollTo({top:0})}),[t])},we=n(131),Pe=n(304),ke=n(305),Se=n(83),Ie=n.n(Se),Ne=n(84),Re=n.n(Ne),Ce=Object(x.b)("actions/comments/post",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.comment,r=e.entity,c=e.slug,i=e.spoiler,s=void 0!==i&&i,o=n.rejectWithValue,r=te(r),t.prev=3,t.next=6,Z.a.post("/trakt/comments",(u={comment:a},Object(Y.a)(u,r,{ids:{slug:c}}),Object(Y.a)(u,"spoiler",s),u));case 6:return l=t.sent,t.abrupt("return",l.data);case 10:return t.prev=10,t.t0=t.catch(3),t.abrupt("return",o(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}()),We=Object(x.b)("actions/comments/remove",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.delete("/trakt/comments/".concat(e));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()),ze=Object(x.b)("actions/comments/update",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.comment,r=e.id,c=e.spoiler,i=n.rejectWithValue,t.prev=2,t.next=5,Z.a.put("/trakt/comments/".concat(r),{comment:a,spoiler:c});case 5:return s=t.sent,t.abrupt("return",s.data);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",i(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}());var Le=function(t){var e=t.comment,n=void 0===e?"":e,c=t.disabled,i=void 0!==c&&c,s=t.onSubmit,o=t.spoiler,u=void 0!==o&&o,l=Object(r.useState)({comment:n||"",spoiler:u||!1}),d=Object(O.a)(l,2),j=d[0],p=d[1];function b(){p({comment:n,spoiler:u})}return Object(a.jsxs)("div",{children:[Object(a.jsx)(me.a,{disabled:i,fullWidth:!0,helperText:"Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]",label:"Your comment",multiline:!0,onChange:function(t){var e=t.target.value;p(Object(L.a)(Object(L.a)({},j),{},{comment:e}))},value:j.comment,variant:"outlined"}),Object(a.jsxs)("div",{style:{textAlign:"right"},children:[Object(a.jsx)(he.a,{color:"primary",disabled:i,onChange:function(){p(Object(L.a)(Object(L.a)({},j),{},{spoiler:!j.spoiler}))},selected:j.spoiler,size:"small",value:j.spoiler,children:j.spoiler?"Marked as spoiler":"Mark as spoiler"})," ",Object(a.jsx)(A.a,{color:"secondary",disabled:i,onClick:function(){s({comment:j.comment,reset:b,spoiler:j.spoiler})},variant:"outlined",children:"Submit"})]})]})};var Fe=function(t){var e=t.comment,n=t.createdAt,c=t.id,i=t.review,s=t.spoiler,o=t.username,l=t.userRating,p=t.userSlug,h=Object(r.useMemo)(jt,[]),f=Object(u.b)(),g=Object(u.c)((function(t){return h(t,["actions/comments/update","actions/comments/remove"])})),v=Object(r.useState)(null),x=Object(O.a)(v,2),y=x[0],w=x[1],P=Xt()===p,k="editing"===y,S="removing"===y,I=[Object(a.jsxs)(m.a,{display:"inline",variant:"body2",children:[i?"Review":"Shout"," by"," ",Object(a.jsx)(d.b,{to:"/app/users/".concat(p),children:o})]},"".concat(o,"-comment-").concat(c,"-label-0")),Object(a.jsx)("span",{children:" | "},"".concat(o,"-comment-").concat(c,"-label-1")),Object(a.jsx)(m.a,{display:"inline",variant:"caption",children:new Date(n).toLocaleString("da-DK")},"".concat(o,"-comment-").concat(c,"-label-2")),l&&Object(a.jsxs)(r.Fragment,{children:[" | ",Object(a.jsxs)(m.a,{display:"inline",variant:"caption",children:["rated ",l]})]},"".concat(o,"-comment-").concat(c,"-label-3")),s&&Object(a.jsxs)(a.Fragment,{children:[" | "," ",Object(a.jsx)(M.a,{label:"Spoiler",size:"small"})]})];return Object(a.jsxs)(a.Fragment,{children:[(k||S)&&g&&Object(a.jsx)(D.a,{color:"secondary"}),Object(a.jsxs)(b.a,{component:we.a,p:2,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,justify:"space-between",children:[Object(a.jsx)(j.a,{item:!0,children:I.map((function(t){return t}))}),P&&Object(a.jsxs)(j.a,{item:!0,children:[Object(a.jsx)(B.a,{onClick:function(){w(k?"default":"editing")},size:"small",children:Object(a.jsx)(Pe.a,{fontSize:"small"})}),Object(a.jsx)(B.a,{onClick:function(){w("removing"),f(We(c))},size:"small",children:Object(a.jsx)(ke.a,{fontSize:"small"})})]})]}),k?Object(a.jsx)(b.a,{mt:2,children:Object(a.jsx)(Le,{comment:e,disabled:g,onSubmit:function(t){t.reset;var e=Object(re.a)(t,["reset"]);f(ze(Object(L.a)(Object(L.a)({},e),{},{id:c}))).then((function(){return w("default")}))},spoiler:s})}):Object(a.jsx)(Re.a,{allowDangerousHtml:!0,children:Ie.a.shortnameToImage(e)})]})]})};function Te(t){var e={comment:t.comment,createdAt:t.created_at,id:t.id,review:t.review,spoiler:t.spoiler,username:t.user.username,userRating:t.user_rating,userSlug:t.user.ids.slug},n=e.id;return Object(a.jsx)(Fe,Object(L.a)({},e),n)}var Ve=[["highest","Highest"],["newest","Newest"],["likes","Likes"]],Me=n(306),Ae=Object(W.a)((function(t){return{textFieldRoot:{minWidth:133}}}));var Ee=function(t){var e=t.onChange,n=t.value,r=Ae();return Object(a.jsx)(me.a,{classes:{root:r.textFieldRoot},label:"Sort comments by",onChange:function(t){var n=t.target.value;e(n)},select:!0,size:"small",value:n,variant:"outlined",children:Ve.map((function(t){var e=Object(O.a)(t,2),n=e[0],r=e[1];return Object(a.jsx)(Me.a,{value:n,children:r},n)}))})},Be=n(307),_e=n(308),De=n(309),qe=n(310),Ge=Object(W.a)((function(t){return{root:function(e){var n=e.isWrapped;return{"& > *:not(:last-child)":{marginRight:t.spacing(1)},display:n?"block":"inline-block",margin:n?"".concat(t.spacing(1),"px 0"):"initial",textAlign:n?"right":"inherit"}}}}));var He=function(t){var e=t.disabled,n=void 0!==e&&e,r=t.hasNextPage,c=t.hasPreviousPage,i=t.onFirstPage,s=t.onLastPage,o=t.onNextPage,u=t.onPreviousPage,l=t.page,d=t.pagesTotal,j=t.variant,p=Ge({isWrapped:"wrapped"===(void 0===j?"wrapped":j)}),b=n||1===l,h=n||!c,f=n||!r,O=n||l===d;return Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsx)(E.a,{title:"Go to first page",children:Object(a.jsx)("span",{children:Object(a.jsx)(B.a,{disabled:b,onClick:i,size:"small",children:Object(a.jsx)(Be.a,{})})})}),Object(a.jsx)(E.a,{title:"Go to previous page",children:Object(a.jsx)("span",{children:Object(a.jsx)(B.a,{disabled:h,onClick:u,size:"small",children:Object(a.jsx)(_e.a,{})})})}),Object(a.jsxs)(m.a,{variant:"caption",children:["Page ",l," of ",d]}),Object(a.jsx)(E.a,{title:"Go to next page",children:Object(a.jsx)("span",{children:Object(a.jsx)(B.a,{disabled:f,onClick:o,size:"small",children:Object(a.jsx)(De.a,{})})})}),Object(a.jsx)(E.a,{title:"Go to last page",children:Object(a.jsx)("span",{children:Object(a.jsx)(B.a,{disabled:O,onClick:s,size:"small",children:Object(a.jsx)(qe.a,{})})})})]})};var Je,Ke,Ue,Ye=function(t){var e=Object(d.d)(),n=Object(O.a)(e,2),a=n[0],c=n[1],i=Object(r.useMemo)((function(){return Object.fromEntries(a)}),[a]),s=i.page,o=void 0===s?"1":s,l=Object(re.a)(i,["page"]),j=Object(u.c)(t);return{hasNextPage:parseInt(o)<j,hasPreviousPage:parseInt(o)>1,page:parseInt(o),pagesTotal:j,toFirstPage:function(){c(Object(L.a)({page:1},l))},toLastPage:function(){c(Object(L.a)({page:j},l))},toNextPage:function(){c(Object(L.a)({page:parseInt(o)+1},l))},toPage:function(t){c(Object(L.a)({page:parseInt(t)},l))},toPreviousPage:function(){c(Object(L.a)({page:parseInt(o)-1},l))}}},Qe=Object(g.a)((function(t){return t.comments.entities}),(function(t){return t})),Xe=Object(g.a)((function(t){return t.comments.pagination.total}),(function(t){return t})),Ze=Object(x.b)("movie/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l,d;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([Z.a.get("/trakt/movies/".concat(e,"/stats")),Z.a.get("/trakt/movies/".concat(e,"?extended=full")),Z.a.get("/trakt/movies/".concat(e,"/comments/highest")),Z.a.get("/trakt/movies/".concat(e,"/people")),Z.a.get("/trakt/movies/".concat(e,"/ratings")),Z.a.get("/trakt/movies/".concat(e,"/related?extended=full"))]);case 4:return r=t.sent,c=Object(O.a)(r,6),i=c[0],s=c[1],o=c[2],u=c[3],l=c[4],d=c[5],t.abrupt("return",{comments:o.data,people:u.data,ratings:l.data,related:d.data,stats:i.data,summary:s.data});case 15:return t.prev=15,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,n){return t.apply(this,arguments)}}()),$e=Object(x.c)({extraReducers:(Je={},Object(Y.a)(Je,Ze.fulfilled,(function(t,e){return e.payload})),Object(Y.a)(Je,We.fulfilled,(function(t,e){var n=e.meta.arg,a=t.comments.findIndex((function(t){return t.id===n}));-1!==a&&t.comments.splice(a,1)})),Object(Y.a)(Je,ze.fulfilled,(function(t,e){var n=t.comments.findIndex((function(t){return t.id===e.payload.id}));-1!==n&&(t.comments[n]=e.payload)})),Je),initialState:{comments:[],people:null,ratings:null,related:[],stats:null,summary:null},name:"movie",reducers:{}}).reducer,tn=Object(x.b)("show/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l,d,j;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([Z.a.get("/trakt/shows/".concat(e,"?extended=full")),Z.a.get("/trakt/shows/".concat(e,"/comments/highest")),Z.a.get("/trakt/shows/".concat(e,"/people")),Z.a.get("/trakt/shows/".concat(e,"/ratings")),Z.a.get("/trakt/shows/".concat(e,"/related?extended=full")),Z.a.get("/trakt/shows/".concat(e,"/stats")),Z.a.get("/trakt/shows/".concat(e,"/seasons?extended=episodes"))]);case 4:return r=t.sent,c=Object(O.a)(r,7),i=c[0],s=c[1],o=c[2],u=c[3],l=c[4],d=c[5],j=c[6],t.abrupt("return",{comments:s.data,people:o.data,ratings:u.data,related:l.data,seasons:j.data.reverse(),stats:d.data,summary:i.data});case 16:return t.prev=16,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}()),en=Object(x.c)({extraReducers:(Ke={},Object(Y.a)(Ke,tn.fulfilled,(function(t,e){return e.payload})),Object(Y.a)(Ke,We.fulfilled,(function(t,e){var n=e.meta.arg,a=t.comments.findIndex((function(t){return t.id===n}));-1!==a&&t.comments.splice(a,1)})),Object(Y.a)(Ke,ze.fulfilled,(function(t,e){var n=t.comments.findIndex((function(t){return t.id===e.payload.id}));-1!==n&&(t.comments[n]=e.payload)})),Ke),initialState:{comments:[],people:null,ratings:null,related:[],seasons:[],stats:null,summary:null},name:"show",reducers:{}}).reducer,nn=Object(x.b)("comments/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l,d;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.limit,c=void 0===r?Kt:r,i=e.page,s=void 0===i?1:i,o=e.slug,u=e.sort,l=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/".concat(a,"/").concat(o,"/comments/").concat(u,"?page=").concat(s,"&limit=").concat(c));case 5:return d=t.sent,t.abrupt("return",{entities:d.data,total:parseInt(d.headers["x-pagination-page-count"])});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",l(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}());var an=Object(x.c)({extraReducers:(Ue={},Object(Y.a)(Ue,nn.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),Object(Y.a)(Ue,Ce.fulfilled,(function(t,e){t.entities.unshift(e.payload)})),Object(Y.a)(Ue,We.fulfilled,(function(t,e){var n=e.meta.arg,a=t.entities.findIndex((function(t){return t.id===n}));-1!==a&&t.entities.splice(a,1)})),Object(Y.a)(Ue,ze.fulfilled,(function(t,e){var n=t.entities.findIndex((function(t){return t.id===e.payload.id}));-1!==n&&(t.entities[n]=e.payload)})),Ue),initialState:{entities:[],pagination:{total:0}},name:"comments",reducers:{}}).reducer,rn=Object(g.a)((function(t){return t.movie}),(function(t){return t})),cn=Object(g.a)((function(t){return t.show}),(function(t){return t})),sn=Object(W.a)((function(t){return{buttons:{"& > *:not(last-child)":{marginBottom:t.spacing(1)}},commentsRoot:{"& > *:not(:last-child)":{marginBottom:t.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:t.spacing(2)},marginLeft:342,paddingLeft:t.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:t.spacing(1)},marginBottom:t.spacing(1),marginRight:t.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},overview:{marginBottom:t.spacing(3)},root:{padding:t.spacing(2),position:"relative"}}})),on=[["Comments","#comments"]];var un=function(t){var e,n,c,i=t.entity,s=sn(),o=Object(r.useRef)(!0),d=Object(l.j)().slug,p=Object(u.b)(),b=Ye(Xe),g=b.hasNextPage,v=b.hasPreviousPage,x=b.page,y=b.pagesTotal,w=b.toFirstPage,P=b.toLastPage,k=b.toNextPage,S=b.toPreviousPage,I=Object(u.c)("movies"===i?rn:cn),N=Object(u.c)(Qe),R=Object(u.c)((function(t){return dt(t,"actions/comments/post")})),C=Object(r.useState)("highest"),W=Object(O.a)(C,2),z=W[0],V=W[1];return Object(r.useEffect)((function(){if(o.current)return o.current=!1,void p(function(t){var e=t.entity,n=t.slug,a="movies"===e?Ze:tn;return function(){var e=Object(Q.a)(U.a.mark((function e(r){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r(a(n)),r(nn(t))]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({entity:i,page:x,slug:d,sort:"highest"}));p(nn({entity:i,page:x,slug:d,sort:z}))}),[p,i,x,d,z]),Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsxs)("div",{className:s.fixedColumn,children:[Object(a.jsx)(zt,{entity:i,slug:d,tmdbId:null===(e=I.summary)||void 0===e?void 0:e.ids.tmdb}),Object(a.jsx)(f.a,{children:on.map((function(t){var e=Object(O.a)(t,2),n=e[0],c=e[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(F.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(T.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsxs)("div",{className:s.buttons,children:[Object(a.jsx)(bt,{entity:i,slug:d}),Object(a.jsx)(Rt,{entity:i,slug:d}),Object(a.jsx)(yt,{entity:i,slug:d}),Object(a.jsx)(Gt,{entity:i,slug:d})]})]}),Object(a.jsxs)("div",{className:s.content,children:[Object(a.jsxs)("div",{className:s.overview,id:"overview",children:[Object(a.jsx)(m.a,{display:"block",variant:"overline",children:"All comments about:"}),Object(a.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(n=I.summary)||void 0===n?void 0:n.title," "]}),Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(c=I.summary)||void 0===c?void 0:c.year})]}),Object(a.jsx)(m.a,{id:"actors",variant:"h5",children:"Add comment"}),Object(a.jsx)(Le,{disabled:R,onSubmit:function(t){var e=t.reset,n=Object(re.a)(t,["reset"]);p(Ce(Object(L.a)(Object(L.a)({},n),{},{entity:i,slug:d}))).then(e)}}),Object(a.jsxs)(j.a,{alignItems:"flex-end",classes:{root:s.commentsRoot},container:!0,justify:"space-between",children:[Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(Ee,{onChange:V,value:z})}),Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(He,{hasNextPage:g,hasPreviousPage:v,onFirstPage:w,onLastPage:P,onNextPage:k,onPreviousPage:S,page:x,pagesTotal:y,variant:"inlined"})}),N.map((function(t){return Object(a.jsx)(j.a,{item:!0,xs:12,children:Te(t)},t.id)})),Object(a.jsx)("div",{children:"\u1cbc"}),Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(He,{hasNextPage:g,hasPreviousPage:v,onFirstPage:w,onLastPage:P,onNextPage:k,onPreviousPage:S,page:x,pagesTotal:y,variant:"inlined"})})]})]})]})},ln=Object(W.a)((function(t){return{buttons:{"& > *:not(last-child)":{marginBottom:t.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:t.spacing(2)},marginLeft:342,paddingLeft:t.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:t.spacing(1)},marginBottom:t.spacing(1),marginRight:t.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:t.spacing(2),position:"relative"}}})),dn=[["Overview","#overview"],["Actors","#actors"],["Comments","#comments"],["Related","#related"]];var jn=function(){var t,e,n,c,i,s,o,p=ln(),b=Object(u.b)(),g=Object(l.j)().slug,v=Object(u.c)(rn);return Object(r.useEffect)((function(){b(Ze(g))}),[b,g]),Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsxs)("div",{className:p.fixedColumn,children:[Object(a.jsx)(zt,{entity:"movies",slug:g,tmdbId:null===(t=v.summary)||void 0===t?void 0:t.ids.tmdb}),Object(a.jsx)(f.a,{children:dn.map((function(t){var e=Object(O.a)(t,2),n=e[0],c=e[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(F.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(T.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsxs)("div",{className:p.buttons,children:[Object(a.jsx)(bt,{entity:"movies",slug:g}),Object(a.jsx)(Rt,{entity:"movies",slug:g}),Object(a.jsx)(yt,{entity:"movies",slug:g}),Object(a.jsx)(Gt,{entity:"movies",slug:g})]})]}),Object(a.jsxs)("div",{className:p.content,children:[Object(a.jsxs)("div",{id:"overview",children:[Object(a.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(e=v.summary)||void 0===e?void 0:e.title," "]}),Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(n=v.summary)||void 0===n?void 0:n.year})]}),Object(a.jsx)("div",{className:p.facts,children:Yt(v).map((function(t){var e=Object(O.a)(t,2),n=e[0],r=e[1];return Object(a.jsxs)("span",{className:p.factsItem,children:[Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(a.jsx)(m.a,{display:"inline",variant:"body2",children:r})]},n)}))}),Object(a.jsxs)(m.a,{variant:"body2",children:[Object(a.jsxs)("i",{children:[null===(c=v.summary)||void 0===c?void 0:c.tagline," "]}),null===(i=v.summary)||void 0===i?void 0:i.overview]}),Object(a.jsx)(m.a,{id:"actors",variant:"h5",children:"Actors"}),Object(a.jsx)(j.a,{container:!0,spacing:1,style:{overflow:"auto"},wrap:"nowrap",children:null===(s=v.people)||void 0===s?void 0:s.cast.map((function(t){var e=t.character,n=t.person;return Object(a.jsx)(j.a,{item:!0,style:{flex:"0 0 128px"},children:Object(a.jsxs)(zt,{entity:"people",size:"small",slug:n.ids.slug,tmdbId:n.ids.tmdb,children:[Object(a.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[n.name," "]}),Object(a.jsx)(m.a,{variant:"caption",children:e})]})},n.name)}))}),Object(a.jsxs)(j.a,{container:!0,direction:"column",spacing:1,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,item:!0,justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{id:"comments",variant:"h5",children:"Comments"}),Object(a.jsxs)(A.a,{color:"secondary",component:d.b,size:"small",to:"comments",variant:"outlined",children:["All ",null===(o=v.stats)||void 0===o?void 0:o.comments," comments"]})]}),v.comments.map((function(t){return Object(a.jsx)(j.a,{item:!0,xs:12,children:Te(t)},t.id)}))]}),Object(a.jsx)(m.a,{id:"related",variant:"h5",children:"Related"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:v.related.map((function(t){return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Ht,{entity:"movies",overallRating:ae(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.slug)}))})]})]})},pn=Object(g.a)((function(t){return t.movies.entities}),(function(t){return t})),bn=Object(g.a)((function(t){return t.movies.pagination.total}),(function(t){return t})),mn=Object(x.b)("movies/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.category,r=e.limit,c=void 0===r?Ut:r,i=e.page,s=void 0===i?1:i,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/movies/".concat(a,"?page=").concat(s,"&limit=").concat(c,"&extended=full"));case 5:return u=t.sent,"popular"===a&&(u.data=u.data.map((function(t){return{movie:t}}))),t.abrupt("return",{entities:u.data,total:parseInt(u.headers["x-pagination-page-count"])});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),hn=Object(x.c)({extraReducers:Object(Y.a)({},mn.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"movies",reducers:{}}).reducer;function fn(t){var e=t.category,n=t.movies;switch(e){case"trending":return function(t){return t.map((function(t){var e=t.movie,n=t.watchers,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people watching")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:c,entity:"movies",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"popular":return function(t){return t.map((function(t){var e=t.movie;return Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{entity:"movies",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"recommended":return function(t){return t.map((function(t){var e=t.movie,n=t.user_count,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:c,entity:"movies",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"watched":return function(t){return t.map((function(t){var e=t.movie,n=t.play_count,r=void 0===n?0:n,c=t.watcher_count,i=void 0===c?0:c,s=[];return r&&s.push("".concat(r," plays")),i&&s.push("".concat(i," watches")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:s,entity:"movies",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"anticipated":return function(t){return t.map((function(t){var e=t.list_count,n=void 0===e?0:e,r=t.movie,c=[];return n&&c.push("In ".concat(n," lists")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:c,entity:"movies",overallRating:ae(r.rating,0),primary:r.title,secondary:r.year,slug:r.ids.slug,tmdbId:r.ids.tmdb})},r.ids.trakt)}))}(n);default:return null}}var On=function(t){var e=t.category,n=Object(u.b)(),c=Ye(bn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,d=c.toFirstPage,p=c.toLastPage,b=c.toNextPage,m=c.toPreviousPage,h=Object(u.c)(pn);return Object(r.useEffect)((function(){n(mn({category:e,page:o}))}),[e,n,o]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{container:!0,children:fn({category:e,movies:h})}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:d,onLastPage:p,onNextPage:b,onPreviousPage:m,page:o,pagesTotal:l})]})},gn=Object(g.a)((function(t){return t.person}),(function(t){return t})),vn=Object(x.b)("person/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([Z.a.get("/trakt/people/".concat(e,"?extended=full")),Z.a.get("/trakt/people/".concat(e,"/movies?extended=full")),Z.a.get("/trakt/people/".concat(e,"/shows?extended=full"))]);case 4:return r=t.sent,c=Object(O.a)(r,3),i=c[0],s=c[1],o=c[2],t.abrupt("return",{movies:s.data,shows:o.data,summary:i.data});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()),xn=Object(x.c)({extraReducers:Object(Y.a)({},vn.fulfilled,(function(t,e){return e.payload})),initialState:{movies:[],shows:[],summary:null},name:"person",reducers:{}}).reducer,yn=Object(W.a)((function(t){return{buttons:{"& > *:not(last-child)":{marginBottom:t.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:t.spacing(2)},marginLeft:342,paddingLeft:t.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:t.spacing(1)},marginBottom:t.spacing(1),marginRight:t.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:t.spacing(2),position:"relative"}}})),wn=[["Overview","#overview"],["Movies","#movies"],["Shows","#shows"]];function Pn(t){if(!t)return[];var e=t.summary;return[["Birthplace",null===e||void 0===e?void 0:e.birthplace],["Birthday",new Date(null===e||void 0===e?void 0:e.birthday).toLocaleDateString("da-Dk")]]}var kn=function(){var t,e,n,c,i,s,o,d=yn(),p=Object(u.b)(),b=Object(l.j)().slug,g=Object(u.c)(gn);return Object(r.useEffect)((function(){p(vn(b))}),[p,b]),Object(a.jsxs)("div",{className:d.root,children:[Object(a.jsxs)("div",{className:d.fixedColumn,children:[Object(a.jsx)(zt,{entity:"people",slug:b,tmdbId:null===(t=g.summary)||void 0===t?void 0:t.ids.tmdb}),Object(a.jsx)(f.a,{children:wn.map((function(t){var e=Object(O.a)(t,2),n=e[0],c=e[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(F.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(T.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsx)("div",{className:d.buttons,children:Object(a.jsx)(bt,{entity:"people",slug:b})})]}),Object(a.jsxs)("div",{className:d.content,children:[Object(a.jsx)("div",{id:"overview",children:Object(a.jsx)(m.a,{display:"inline",variant:"h4",children:null===(e=g.summary)||void 0===e?void 0:e.name})}),Object(a.jsx)("div",{className:d.facts,children:Pn(g).map((function(t){var e=Object(O.a)(t,2),n=e[0],r=e[1];return Object(a.jsxs)("span",{className:d.factsItem,children:[Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(a.jsx)(m.a,{display:"inline",variant:"body2",children:r})]},n)}))}),Object(a.jsx)(m.a,{variant:"body2",children:null===(n=g.summary)||void 0===n?void 0:n.biography}),Object(a.jsx)(m.a,{id:"movies",variant:"h5",children:"Movies"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:null===(c=g.movies)||void 0===c||null===(i=c.cast)||void 0===i?void 0:i.map((function(t){var e=t.character,n=t.movie;return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Ht,{entity:"movies",overallRating:ae(n.rating,0),primary:n.title,secondary:n.year,slug:n.ids.slug,tmdbId:n.ids.tmdb,children:Object(a.jsx)(m.a,{variant:"caption",children:e})})},n.ids.slug)}))}),Object(a.jsx)(m.a,{id:"shows",variant:"h5",children:"Shows"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:null===(s=g.shows)||void 0===s||null===(o=s.cast)||void 0===o?void 0:o.map((function(t){var e=t.character,n=t.show;return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Ht,{entity:"shows",overallRating:ae(n.rating,0),primary:n.title,secondary:n.year,slug:n.ids.slug,tmdbId:n.ids.tmdb,children:Object(a.jsx)(m.a,{variant:"caption",children:e})})},n.ids.slug)}))})]})]})},Sn=Object(g.a)((function(t){return t.search.entities}),(function(t){return t})),In=Object(g.a)((function(t){return t.search.pagination.total}),(function(t){return t})),Nn=Object(x.b)("search/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.entity,r=e.limit,c=void 0===r?Ut:r,i=e.page,s=void 0===i?1:i,o=e.query,u=n.rejectWithValue,t.prev=2,a=te(a),t.next=6,Z.a.get("/trakt/search/".concat(a,"?query=").concat(o,"&page=").concat(s,"&limit=").concat(c,"?extended=full"));case 6:return l=t.sent,t.abrupt("return",{entities:l.data,total:parseInt(l.headers["x-pagination-page-count"])});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",u(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),Rn=Object(x.c)({extraReducers:Object(Y.a)({},Nn.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"search",reducers:{}}).reducer;var Cn=function(t){var e=t.entity,n=Object(u.b)(),c=Ye(In),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage,g=Object(d.d)(),v=Object(O.a)(g,2),x=v[0],y=v[1],w=Object(r.useMemo)((function(){return Object.fromEntries(x)}),[x]).query,P=void 0===w?"":w,k=Object(u.c)(Sn);return Object(r.useEffect)((function(){n(Nn({entity:e,page:o,query:P}))}),[n,e,o,P]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{m:2,children:Object(a.jsx)(me.a,{color:"secondary",defaultValue:P,label:"What are you looking for?",onKeyDown:function(t){13===t.keyCode&&y({query:t.target.value})},size:"small",variant:"outlined"})}),Object(a.jsx)(j.a,{container:!0,children:k.map((function(t){return Zt(t,j.a,{item:!0,lg:2,md:3,sm:6,xs:12})}))}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:l})]})},Wn=Object(W.a)((function(t){return{buttons:{"& > *:not(last-child)":{marginBottom:t.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:t.spacing(2)},marginLeft:342,paddingLeft:t.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:t.spacing(1)},marginBottom:t.spacing(1),marginRight:t.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:t.spacing(2),position:"relative"}}})),zn=[["Overview","#overview"],["Actors","#actors"],["Seasons","#seasons"],["Comments","#comments"],["Related","#related"]];var Ln=function(){var t,e,n,c,i,s,o,p=Wn(),b=Object(u.b)(),g=Object(l.j)().slug,v=Object(u.c)(cn);return Object(r.useEffect)((function(){b(tn(g))}),[b,g]),Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsxs)("div",{className:p.fixedColumn,children:[Object(a.jsx)(zt,{entity:"shows",slug:g,tmdbId:null===(t=v.summary)||void 0===t?void 0:t.ids.tmdb}),Object(a.jsx)(f.a,{children:zn.map((function(t){var e=Object(O.a)(t,2),n=e[0],c=e[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(F.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(T.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsxs)("div",{className:p.buttons,children:[Object(a.jsx)(bt,{entity:"shows",slug:g}),Object(a.jsx)(Rt,{entity:"shows",slug:g}),Object(a.jsx)(yt,{entity:"shows",slug:g}),Object(a.jsx)(Gt,{entity:"shows",slug:g})]})]}),Object(a.jsxs)("div",{className:p.content,children:[Object(a.jsxs)("div",{id:"overview",children:[Object(a.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(e=v.summary)||void 0===e?void 0:e.title," "]}),Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(n=v.summary)||void 0===n?void 0:n.year})]}),Object(a.jsx)("div",{className:p.facts,children:Yt(v).map((function(t){var e=Object(O.a)(t,2),n=e[0],r=e[1];return Object(a.jsxs)("span",{className:p.factsItem,children:[Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(a.jsx)(m.a,{display:"inline",variant:"body2",children:r})]},n)}))}),Object(a.jsxs)(m.a,{variant:"body2",children:[Object(a.jsxs)("i",{children:[null===(c=v.summary)||void 0===c?void 0:c.tagline," "]}),null===(i=v.summary)||void 0===i?void 0:i.overview]}),Object(a.jsx)(m.a,{id:"actors",variant:"h5",children:"Actors"}),Object(a.jsx)(j.a,{container:!0,spacing:1,style:{overflow:"auto"},wrap:"nowrap",children:null===(s=v.people)||void 0===s?void 0:s.cast.map((function(t){var e=t.character,n=t.person;return Object(a.jsx)(j.a,{item:!0,style:{flex:"0 0 128px"},children:Object(a.jsxs)(zt,{entity:"people",size:"small",slug:n.ids.slug,tmdbId:n.ids.tmdb,children:[Object(a.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[n.name," "]}),Object(a.jsx)(m.a,{variant:"caption",children:e})]})},n.name)}))}),Object(a.jsx)(m.a,{id:"seasons",variant:"h5",children:"Seasons"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:v.seasons.map((function(t){var e,n,r;return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsxs)(zt,{entity:"shows",season:t.number,slug:null===(e=v.summary)||void 0===e?void 0:e.ids.slug,tmdbId:null===(n=v.summary)||void 0===n?void 0:n.ids.tmdb,children:[Object(a.jsxs)(m.a,{variant:"body2",children:[0===t.number?"Specials":"Season ".concat(t.number)," "]}),Object(a.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[(null===(r=t.episodes)||void 0===r?void 0:r.length)||0," episodes"]})]})},t.number)}))}),Object(a.jsxs)(j.a,{container:!0,spacing:1,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,item:!0,justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{id:"comments",variant:"h5",children:"Comments"}),Object(a.jsxs)(A.a,{color:"secondary",component:d.b,size:"small",to:"comments",variant:"outlined",children:["All ",null===(o=v.stats)||void 0===o?void 0:o.comments," comments"]})]}),v.comments.map((function(t){return Object(a.jsx)(j.a,{item:!0,xs:12,children:Te(t)},t.id)}))]}),Object(a.jsx)(m.a,{id:"related",variant:"h5",children:"Related"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:v.related.map((function(t){return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Ht,{entity:"shows",overallRating:ae(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.slug)}))})]})]})},Fn=Object(g.a)((function(t){return t.shows.entities}),(function(t){return t})),Tn=Object(g.a)((function(t){return t.shows.pagination.total}),(function(t){return t})),Vn=Object(x.b)("shows/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.category,r=e.limit,c=void 0===r?Ut:r,i=e.page,s=void 0===i?1:i,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/shows/".concat(a,"?page=").concat(s,"&limit=").concat(c,"&extended=full"));case 5:return u=t.sent,"popular"===a&&(u.data=u.data.map((function(t){return{show:t}}))),t.abrupt("return",{entities:u.data,total:parseInt(u.headers["x-pagination-page-count"])});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),Mn=Object(x.c)({extraReducers:Object(Y.a)({},Vn.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"shows",reducers:{}}).reducer;function An(t){var e=t.category,n=t.shows;switch(e){case"trending":return function(t){return t.map((function(t){var e=t.show,n=t.watchers,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people watching")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:c,entity:"shows",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"popular":return function(t){return t.map((function(t){var e=t.show;return Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{entity:"shows",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"recommended":return function(t){return t.map((function(t){var e=t.show,n=t.user_count,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:c,entity:"shows",overallRating:ae(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.trakt)}))}(n);case"watched":return function(t){return t.map((function(t){var e=t.play_count,n=void 0===e?0:e,r=t.show,c=t.watcher_count,i=void 0===c?0:c,s=[];return n&&s.push("".concat(n," plays")),i&&s.push("".concat(i," watches")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:s,entity:"shows",overallRating:ae(r.rating,0),primary:r.title,secondary:r.year,slug:r.ids.slug,tmdbId:r.ids.tmdb})},r.ids.trakt)}))}(n);case"anticipated":return function(t){return t.map((function(t){var e=t.list_count,n=void 0===e?0:e,r=t.show,c=[];return n&&c.push("In ".concat(n," lists")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Ht,{chips:c,entity:"shows",overallRating:ae(r.rating,0),primary:r.title,secondary:r.year,slug:r.ids.slug,tmdbId:r.ids.tmdb})},r.ids.trakt)}))}(n);default:return null}}var En,Bn=function(t){var e=t.category,n=Object(u.b)(),c=Ye(Tn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,d=c.toFirstPage,p=c.toLastPage,b=c.toNextPage,m=c.toPreviousPage,h=Object(u.c)(Fn);return Object(r.useEffect)((function(){n(Vn({category:e,page:o}))}),[e,n,o]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{container:!0,children:An({category:e,shows:h})}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:d,onLastPage:p,onNextPage:b,onPreviousPage:m,page:o,pagesTotal:l})]})},_n=Object(g.a)((function(t){return t.users.comments.entities}),(function(t){return t})),Dn=Object(g.a)((function(t){return t.users.comments.pagination.total}),(function(t){return t})),qn=Object(x.b)("users/comments/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.limit,r=void 0===a?Kt:a,c=e.page,i=void 0===c?1:c,s=e.userSlug,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(s,"/comments/all/movies,shows?page=").concat(i,"&limit=").concat(r));case 5:return u=t.sent,t.abrupt("return",{entities:Qt(u.data),total:parseInt(u.headers["x-pagination-page-count"])});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),Gn=Object(x.c)({extraReducers:(En={},Object(Y.a)(En,qn.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),Object(Y.a)(En,We.fulfilled,(function(t,e){var n=e.meta.arg,a=t.entities.findIndex((function(t){return t.comment.id===n}));-1!==a&&t.entities.splice(a,1)})),Object(Y.a)(En,ze.fulfilled,(function(t,e){var n=t.entities.findIndex((function(t){return t.comment.id===e.payload.id}));-1!==n&&(t.entities[n].comment=e.payload)})),En),initialState:{entities:[],pagination:{total:0}},name:"users/comments",reducers:{}}).reducer;var Hn,Jn=function(){var t=Object(u.b)(),e=Object(l.j)().userSlug,n=Object(u.c)(_n),c=Ye(Dn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){t(qn({page:o,userSlug:e}))}),[t,o,e]),n.length?Object(a.jsxs)(b.a,{p:2,children:[Object(a.jsx)(j.a,{container:!0,direction:"column",spacing:2,children:n.map((function(t){return Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(a.jsx)(j.a,{item:!0,style:{width:220},children:Zt(t)}),Object(a.jsx)(j.a,{item:!0,xs:!0,children:Te(t.comment)})]},t.comment.id)}))}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]}):"No comments found"},Kn=(Object(g.a)((function(t){return t.users.list.summary}),(function(t){return t})),Object(g.a)((function(t){return t.users.list.items.entities}),(function(t){return t}))),Un=Object(g.a)((function(t){return t.users.list.items.pagination.total}),(function(t){return t})),Yn=Object(x.b)("users/list/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,r=e.userSlug,c=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(r,"/lists/").concat(a));case 5:return i=t.sent,t.abrupt("return",i.data);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",c(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),Qn=Object(x.b)("users/list/items/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,r=e.limit,c=void 0===r?Kt:r,i=e.page,s=void 0===i?1:i,o=e.userSlug,u=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(o,"/lists/").concat(a,"/items?extended=full&page=").concat(s,"&limit=").concat(c));case 5:return l=t.sent,t.abrupt("return",{entities:Qt(l.data),total:parseInt(l.headers["x-pagination-page-count"])});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",u(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}());var Xn=Object(x.c)({extraReducers:(Hn={},Object(Y.a)(Hn,Yn.fulfilled,(function(t,e){t.summary=e.payload})),Object(Y.a)(Hn,Qn.fulfilled,(function(t,e){t.items.entities=e.payload.entities,t.items.pagination.total=e.payload.total})),Hn),initialState:{items:{entities:[],pagination:{total:0}},summary:null},name:"list",reducers:{}}).reducer;var Zn=function(){var t=Object(l.j)(),e=t.id,n=t.userSlug,c=Object(u.b)(),i=Object(u.c)(Kn),s=Ye(Un),o=s.hasNextPage,d=s.hasPreviousPage,p=s.page,m=s.pagesTotal,h=s.toFirstPage,f=s.toLastPage,O=s.toNextPage,g=s.toPreviousPage;return Object(r.useEffect)((function(){c(Qn({id:e,page:p,userSlug:n}))}),[c,e,p,n]),Object(a.jsxs)(b.a,{p:2,children:[Object(a.jsx)(j.a,{container:!0,spacing:1,children:i.map((function(t){return Zt(t,j.a,{item:!0,xs:2})}))}),Object(a.jsx)(He,{hasNextPage:o,hasPreviousPage:d,onFirstPage:h,onLastPage:f,onNextPage:O,onPreviousPage:g,page:p,pagesTotal:m,variant:"wrapped"})]})};var $n=function(t){var e=t.description,n=(t.itemCount,t.listSlug),c=t.name,i=t.privacy,s=t.username,o=t.userSlug,l=Object(r.useMemo)(jt,[]),p=Object(u.b)(),h=Object(u.c)((function(t){return l(t,["actions/lists/update","actions/lists/remove"])})),f=Object(r.useState)(null),g=Object(O.a)(f,2),v=g[0],x=g[1],y=Xt()===o,w="editing"===v,P="removing"===v,k=[Object(a.jsx)(m.a,{display:"inline",variant:"subtitle1",children:Object(a.jsx)(d.b,{to:"/app/users/".concat(o,"/lists/").concat(n),children:c})},"".concat(s,"-").concat(n,"-label-0")),Object(a.jsxs)(m.a,{display:"inline",variant:"body2",children:[" ","by ",Object(a.jsx)(d.b,{to:"/app/users/".concat(o),children:s})]},"".concat(s,"-").concat(n,"-label-1"))];return Object(a.jsxs)(a.Fragment,{children:[(w||P)&&h&&Object(a.jsx)(D.a,{color:"secondary"}),Object(a.jsxs)(b.a,{component:we.a,p:2,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,justify:"space-between",children:[Object(a.jsx)(j.a,{item:!0,children:k.map((function(t){return t}))}),y&&Object(a.jsxs)(j.a,{item:!0,children:[Object(a.jsx)(B.a,{onClick:function(){x(w?"default":"editing")},size:"small",children:Object(a.jsx)(Pe.a,{fontSize:"small"})}),Object(a.jsx)(B.a,{onClick:function(){x("removing"),p(tt(n))},size:"small",children:Object(a.jsx)(ke.a,{fontSize:"small"})})]})]}),w?Object(a.jsx)(b.a,{mt:2,children:Object(a.jsx)(fe,{description:e,disabled:h,isPrivate:"private"===i,name:c,onSubmit:function(t){t.reset;var e=Object(re.a)(t,["reset"]);p(et(Object(L.a)(Object(L.a)({},e),{},{slug:n}))).then((function(){return x("default")}))}})}):Object(a.jsx)(Re.a,{allowDangerousHtml:!0,children:Ie.a.shortnameToImage(e)})]})]})},ta=Object(W.a)((function(t){return{item:{transition:"0.25s"},root:{}}}));var ea,na=function(t){var e=t.items,n=ta(),c=Object(r.useRef)(),i=Object(r.useState)(0),s=Object(O.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(e.length-1),d=Object(O.a)(l,2),p=d[0],m=d[1];function h(){u(c.current.clientWidth)}function f(t){return function(){m(t)}}return Object(r.useEffect)((function(){return c.current&&(u(c.current.clientWidth),window.addEventListener("resize",h)),function(){return window.removeEventListener("resize",h)}}),[c]),Object(a.jsx)(j.a,{container:!0,direction:"row-reverse",onMouseLeave:function(){m(e.length-1)},ref:c,title:o,children:e.map((function(t,e){return Object(a.jsx)(b.a,{className:n.item,display:"inline-block",onMouseOver:f(e),overflow:"hidden",width:e===p?"52%":"12%",children:$t(t,b.a,{width:.52*o+"px"})},e)}))})},aa=Object(g.a)((function(t){return t.users.lists}),(function(t){return t})),ra=Object(x.b)("users/lists/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u,l;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.limit,r=void 0===a?5:a,c=e.page,i=void 0===c?1:c,s=e.userSlug,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(s,"/lists"));case 5:return u=t.sent,t.next=8,Promise.all(u.data.map((function(t){return Z.a.get("/trakt/users/".concat(s,"/lists/").concat(t.ids.slug,"/items?page=").concat(i,"&limit=").concat(r))})));case 8:return l=t.sent,t.abrupt("return",u.data.map((function(t,e){return Object(L.a)(Object(L.a)({},t),{},{items:Qt(l[e].data)})})));case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,n){return t.apply(this,arguments)}}()),ca=Object(x.c)({extraReducers:(ea={},Object(Y.a)(ea,ra.fulfilled,(function(t,e){return e.payload})),Object(Y.a)(ea,$.fulfilled,(function(t,e){t.push(Object(L.a)(Object(L.a)({},e.payload),{},{items:[]}))})),Object(Y.a)(ea,tt.fulfilled,(function(t,e){var n=e.meta.arg,a=t.findIndex((function(t){return t.ids.slug===n}));t.splice(a,1)})),Object(Y.a)(ea,et.fulfilled,(function(t,e){var n=e.meta.arg.slug,a=t.findIndex((function(t){return t.ids.slug===n}));t[a]=Object(L.a)(Object(L.a)({},t[a]),e.payload)})),ea),initialState:[],name:"users/lists",reducers:{}}).reducer;var ia=function(){var t=Object(l.j)().userSlug,e=Object(u.b)(),n=Object(u.c)(aa);return Object(r.useEffect)((function(){e(ra({userSlug:t}))}),[e,t]),n.length?Object(a.jsxs)(b.a,{p:2,children:[t===Xt()&&Object(a.jsx)(b.a,{mb:2,textAlign:"right",children:Object(a.jsx)(A.a,{color:"secondary",component:d.b,to:"?addList",variant:"outlined",children:"Add list"})}),n.map((function(t){return Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(b.a,{width:368,children:Object(a.jsx)(na,{items:t.items.slice(0,5)})})}),Object(a.jsx)(j.a,{item:!0,xs:!0,children:Object(a.jsx)($n,{description:t.description,itemCount:t.items.length,listSlug:t.ids.slug,name:t.name,privacy:t.privacy,username:t.user.username,userSlug:t.user.ids.slug})})]},t.ids.slug)}))]}):"No lists found"},sa=Object(g.a)((function(t){return t.users.ratings.entities}),(function(t){return t})),oa=Object(g.a)((function(t){return t.users.ratings.pagination.total}),(function(t){return t})),ua=Object(x.b)("users/ratings/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.limit,r=void 0===a?Kt:a,c=e.page,i=void 0===c?1:c,s=e.userSlug,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(s,"/ratings?page=").concat(i,"&limit=").concat(r));case 5:return u=t.sent,t.abrupt("return",{entities:Qt(u.data),total:parseInt(u.headers["x-pagination-page-count"])});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),la=Object(x.c)({extraReducers:Object(Y.a)({},ua.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/ratings",reducers:{}}).reducer;var da=function(){var t=Object(u.b)(),e=Object(l.j)().userSlug,n=Object(u.c)(sa),c=Ye(oa),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){t(ua({page:o,userSlug:e}))}),[t,o,e]),n.length?Object(a.jsxs)(b.a,{p:2,children:[Object(a.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(t){return Zt(t,j.a,{item:!0,xs:2})}))}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]}):"No ratings found"},ja=Object(g.a)((function(t){return t.users.recommendations.entities}),(function(t){return t})),pa=Object(g.a)((function(t){return t.users.recommendations.pagination.total}),(function(t){return t})),ba=Object(x.b)("users/recommendations/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.limit,r=void 0===a?Kt:a,c=e.page,i=void 0===c?1:c,s=e.userSlug,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(s,"/recommendations?extended=full&page=").concat(i,"&limit=").concat(r));case 5:return u=t.sent,t.abrupt("return",{entities:u.data,total:parseInt(u.headers["x-pagination-page-count"])});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),ma=Object(x.c)({extraReducers:Object(Y.a)({},ba.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/recommendations",reducers:{}}).reducer;var ha=function(){var t=Object(l.j)().userSlug,e=Object(u.b)(),n=Object(u.c)(ja),c=Ye(pa),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){e(ba({page:o,userSlug:t}))}),[e,o,t]),n.length?Object(a.jsxs)(b.a,{p:2,children:[Object(a.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(t){return Zt(t,j.a,{item:!0,xs:2})}))}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]}):"No ratings found"},fa=n(315),Oa=n(311),ga=Object(x.b)("app/connections/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([Z.a.get("/api/users/".concat(Xt(),"/followers")),Z.a.get("/api/users/".concat(Xt(),"/following"))]);case 4:return r=t.sent,c=Object(O.a)(r,2),i=c[0],s=c[1],t.abrupt("return",{followers:i.data,following:s.data});case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()),va=Object(x.c)({extraReducers:Object(Y.a)({},ga.fulfilled,(function(t,e){return e.payload})),initialState:{followers:[],following:[]},name:"app/connections",reducers:{}}).reducer,xa=Object(x.b)("actions/connections/follow",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.post("/api/users/".concat(e,"/follow"));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()),ya=Object(x.b)("actions/connections/unfollow",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Z.a.delete("/api/users/".concat(e,"/unfollow"));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}());function wa(){return Object(g.a)((function(t){return t.app.connections.following}),(function(t,e){return e}),(function(t,e){var n=t.find((function(t){return t.slug===e}));return Boolean(n)}))}var Pa=[["Ratings","ratings"],["Recommendations","recommendations"],["Watchlist","watchlist"],["Lists","lists"],["Comments","comments"]];function ka(){return(ka=Object(Q.a)(U.a.mark((function t(e){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.a.get("/api/users/".concat(e));case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}var Sa=function(){var t=Object(r.useMemo)(wa,[]),e=Object(l.j)().userSlug,n=Object(u.b)(),c=Object(r.useState)(!1),i=Object(O.a)(c,2),s=i[0],o=i[1],j=Object(u.c)((function(n){return t(n,e)}));return Object(r.useEffect)((function(){(function(t){return ka.apply(this,arguments)})(e).then(o)}),[n,e]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(we.a,{square:!0,children:Object(a.jsx)(fa.a,{centered:!0,indicatorColor:"secondary",textColor:"secondary",value:!1,children:Pa.map((function(t){var n=Object(O.a)(t,2),r=n[0],c=n[1];return Object(a.jsx)(Oa.a,{activeClassName:"Mui-selected",component:d.c,label:r,to:"/app/users/".concat(e,"/").concat(c)},c)}))})}),e!==Xt()&&Object(a.jsx)(b.a,{p:2,textAlign:"right",children:Object(a.jsx)(E.a,{title:s?"Follow or unfollow":"This user is not traktor user",children:Object(a.jsx)("span",{children:Object(a.jsx)(A.a,{color:"secondary",disabled:!s,onClick:function(){var t;n(j?(t=e,function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(ya(t));case 2:return e.next=4,n(ga());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):function(t){return function(){var e=Object(Q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(xa(t));case 2:return e.next=4,n(ga());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))},variant:j?"contained":"outlined",children:j?"Unfollow":"Follow"})})})}),Object(a.jsx)(l.b,{})]})},Ia=Object(g.a)((function(t){return t.users.watchlist.entities}),(function(t){return t})),Na=Object(g.a)((function(t){return t.users.watchlist.pagination.total}),(function(t){return t})),Ra=Object(x.b)("users/watchlist/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s,o,u;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.limit,r=void 0===a?Kt:a,c=e.page,i=void 0===c?1:c,s=e.userSlug,o=n.rejectWithValue,t.prev=2,t.next=5,Z.a.get("/trakt/users/".concat(s,"/watchlist?extended=full&page=").concat(i,"&limit=").concat(r));case 5:return u=t.sent,t.abrupt("return",{entities:Qt(u.data),total:parseInt(u.headers["x-pagination-page-count"])});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",o(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()),Ca=Object(x.c)({extraReducers:Object(Y.a)({},Ra.fulfilled,(function(t,e){t.entities=e.payload.entities,t.pagination.total=e.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/watchlist",reducers:{}}).reducer;var Wa=function(){var t=Object(l.j)().userSlug,e=Object(u.b)(),n=Object(u.c)(Ia),c=Ye(Na),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){e(Ra({page:o,userSlug:t}))}),[e,o,t]),n.length?Object(a.jsxs)(b.a,{p:2,children:[Object(a.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(t){return Zt(t,j.a,{item:!0,xs:2})}))}),Object(a.jsx)(He,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]}):"No items"},za=n(33),La=Object(za.c)({connections:va,lists:at,ratings:At,recommendations:Ot,watchlist:kt});function Fa(t){return["/pending","/fulfilled","/rejected"].some((function(e){return t.type.endsWith(e)}))}var Ta=Object(x.c)({extraReducers:function(t){t.addMatcher(Fa,(function(t,e){var n=e.type.split("/"),a=n.pop();t["".concat(n.join("/"))]="pending"===a}))},initialState:{},name:"loading",reducers:{}}).reducer,Va=Object(x.b)("users/connections/fetch",function(){var t=Object(Q.a)(U.a.mark((function t(e,n){var a,r,c,i,s;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,Promise.all([Z.a.get("/api/users/".concat(e,"/followers")),Z.a.get("/api/users/".concat(e,"/following"))]);case 4:return r=t.sent,c=Object(O.a)(r,2),i=c[0],s=c[1],t.abrupt("return",{followers:i.data,following:s.data});case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",a(t.t0.toString()));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()),Ma=Object(x.c)({extraReducers:Object(Y.a)({},Va.fulfilled,(function(t,e){return e.payload})),initialState:{followers:[],following:[]},name:"users/connections",reducers:{}}).reducer,Aa=Object(za.c)({comments:Gn,connections:Ma,list:Xn,lists:ca,ratings:la,recommendations:ma,watchlist:Ca}),Ea=Object(x.a)({reducer:{app:La,comments:an,loading:Ta,movie:$e,movies:hn,notifications:I,person:xn,search:Rn,show:en,shows:Mn,users:Aa}});function Ba(){ye();var t=Object(r.useMemo)(jt,[]),e=Object(u.c)((function(e){return t(e,["comments/fetch","movie/fetch","movies/fetch","person/fetch","search/fetch","show/fetch","shows/fetch","users/comments/fetch","users/list/fetch","users/list/items/fetch","users/lists/fetch","users/ratings/fetch","users/recommendations/fetch","users/watchlist/fetch"])}));return Object(a.jsxs)(a.Fragment,{children:[e&&Object(a.jsx)(ve,{}),Object(a.jsx)(Oe,{}),Object(a.jsxs)(l.e,{basename:"/app",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"movies/trending"}),path:"/"}),Object(a.jsxs)(l.c,{element:Object(a.jsx)(de,{}),path:"/",children:[Object(a.jsxs)(l.c,{path:"movies",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"trending"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(On,{category:"trending"}),path:"trending"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(On,{category:"popular"}),path:"popular"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(On,{category:"recommended"}),path:"recommended"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(On,{category:"watched"}),path:"watched"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(On,{category:"anticipated"}),path:"anticipated"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(jn,{}),path:":slug"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(un,{entity:"movies"}),path:":slug/comments"})]}),Object(a.jsxs)(l.c,{path:"shows",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"trending"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Bn,{category:"trending"}),path:"trending"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Bn,{category:"popular"}),path:"popular"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Bn,{category:"recommended"}),path:"recommended"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Bn,{category:"watched"}),path:"watched"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Bn,{category:"anticipated"}),path:"anticipated"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Ln,{}),path:":slug"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(un,{entity:"shows"}),path:":slug/comments"})]}),Object(a.jsx)(l.c,{element:Object(a.jsx)(kn,{}),path:"people/:slug"}),Object(a.jsxs)(l.c,{path:"search",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"all"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Cn,{entity:"all"}),path:"all"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Cn,{entity:"movies"}),path:"movies"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Cn,{entity:"shows"}),path:"shows"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Cn,{entity:"people"}),path:"people"})]}),Object(a.jsxs)(l.c,{element:Object(a.jsx)(Sa,{}),path:"users/:userSlug",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"ratings"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(da,{}),path:"ratings"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(ha,{}),path:"recommendations"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Wa,{}),path:"watchlist"}),Object(a.jsxs)(l.c,{path:"lists",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(ia,{}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Zn,{}),path:":id"})]}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Jn,{}),path:"comments"})]})]}),Object(a.jsx)(l.c,{element:Object(a.jsx)(xe,{}),path:"*"})]})]})}var _a=function(){return Object(a.jsx)(u.a,{store:Ea,children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(o.a,{}),Object(a.jsx)(Ba,{})]})})};var Da=function(){return function(){var t=Object(Q.a)(U.a.mark((function t(e){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e(ga()),e(nt()),e(Mt()),e(ft()),e(Pt())]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};(0,Ea.dispatch)(Da()).then((function(){s.a.render(Object(a.jsx)(_a,{}),document.getElementById("root"))}))}},[[248,1,2]]]);
//# sourceMappingURL=main.9fafd664.chunk.js.map